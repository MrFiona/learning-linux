<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0038)http://linuxfire.com.cn/~lily/awk.html -->
<HTML><HEAD><TITLE>awk 手册</TITLE>
<META http-equiv=Content-Type content="text/html; charset=gb2312">
<META content="MSHTML 6.00.2900.3395" name=GENERATOR>
<STYLE>@font-face {
	font-family: Helvetica;
}
@font-face {
	font-family: Wingdings;
}
@font-face {
	font-family: 宋体;
}
@font-face {
	font-family: 文鼎PL细上海宋Uni;
}
@font-face {
	font-family: StarSymbol;
}
@font-face {
	font-family: Times;
}
@font-face {
	font-family: Kochi Mincho;
}
@font-face {
	font-family: @宋体;
}
@page Section1 {size: 595.25pt 841.85pt; margin: 2.0cm 2.0cm 2.0cm 2.0cm; }
P.MsoNormal {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"
}
LI.MsoNormal {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"
}
DIV.MsoNormal {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"
}
H1 {
	FONT-SIZE: 16pt; MARGIN: 12pt 0cm 6pt 14.15pt; TEXT-INDENT: -14.15pt; FONT-FAMILY: Helvetica
}
H2 {
	FONT-SIZE: 14pt; MARGIN: 12pt 0cm 6pt 11.35pt; TEXT-INDENT: -11.35pt; FONT-FAMILY: Helvetica
}
H4 {
	FONT-SIZE: 12pt; MARGIN: 12pt 0cm 6pt; TEXT-INDENT: 0cm; FONT-STYLE: italic; FONT-FAMILY: Helvetica
}
P.MsoList {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 6pt; FONT-FAMILY: Times
}
LI.MsoList {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 6pt; FONT-FAMILY: Times
}
DIV.MsoList {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 6pt; FONT-FAMILY: Times
}
P.MsoBodyText {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 6pt; FONT-FAMILY: "Times New Roman"
}
LI.MsoBodyText {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 6pt; FONT-FAMILY: "Times New Roman"
}
DIV.MsoBodyText {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 6pt; FONT-FAMILY: "Times New Roman"
}
A:link {
	COLOR: navy; TEXT-DECORATION: underline
}
SPAN.MsoHyperlink {
	COLOR: navy; TEXT-DECORATION: underline
}
A:visited {
	COLOR: maroon; TEXT-DECORATION: underline
}
SPAN.MsoHyperlinkFollowed {
	COLOR: maroon; TEXT-DECORATION: underline
}
SPAN.a1 {
	FONT-FAMILY: StarSymbol
}
P.1 {
	FONT-SIZE: 14pt; MARGIN: 12pt 0cm 6pt; FONT-FAMILY: Helvetica
}
LI.1 {
	FONT-SIZE: 14pt; MARGIN: 12pt 0cm 6pt; FONT-FAMILY: Helvetica
}
DIV.1 {
	FONT-SIZE: 14pt; MARGIN: 12pt 0cm 6pt; FONT-FAMILY: Helvetica
}
P.a3 {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"
}
LI.a3 {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"
}
DIV.a3 {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"
}
P.a4 {
	FONT-WEIGHT: bold; FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"; TEXT-ALIGN: center
}
LI.a4 {
	FONT-WEIGHT: bold; FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"; TEXT-ALIGN: center
}
DIV.a4 {
	FONT-WEIGHT: bold; FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Times New Roman"; TEXT-ALIGN: center
}
P.a5 {
	FONT-SIZE: 12pt; MARGIN: 6pt 0cm; FONT-STYLE: italic; FONT-FAMILY: Times
}
LI.a5 {
	FONT-SIZE: 12pt; MARGIN: 6pt 0cm; FONT-STYLE: italic; FONT-FAMILY: Times
}
DIV.a5 {
	FONT-SIZE: 12pt; MARGIN: 6pt 0cm; FONT-STYLE: italic; FONT-FAMILY: Times
}
P.a6 {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: Times
}
LI.a6 {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: Times
}
DIV.a6 {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: Times
}
P.a7 {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt 1cm; FONT-FAMILY: "Times New Roman"
}
LI.a7 {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt 1cm; FONT-FAMILY: "Times New Roman"
}
DIV.a7 {
	FONT-SIZE: 12pt; MARGIN: 0cm 0cm 0pt 1cm; FONT-FAMILY: "Times New Roman"
}
P.a8 {
	FONT-SIZE: 10.5pt; BACKGROUND: #e6e6e6; MARGIN: 0cm 1cm 0pt; LINE-HEIGHT: 14.15pt; FONT-FAMILY: "Kochi Mincho"
}
LI.a8 {
	FONT-SIZE: 10.5pt; BACKGROUND: #e6e6e6; MARGIN: 0cm 1cm 0pt; LINE-HEIGHT: 14.15pt; FONT-FAMILY: "Kochi Mincho"
}
DIV.a8 {
	FONT-SIZE: 10.5pt; BACKGROUND: #e6e6e6; MARGIN: 0cm 1cm 0pt; LINE-HEIGHT: 14.15pt; FONT-FAMILY: "Kochi Mincho"
}
DIV.Section1 {
	page: Section1
}
OL {
	MARGIN-BOTTOM: 0cm
}
UL {
	MARGIN-BOTTOM: 0cm
}
</STYLE>
</HEAD>
<BODY lang=ZH-CN style="LINE-BREAK: strict" vLink=maroon link=navy>
<DIV class=Section1>
<P class=MsoNormal style="TEXT-ALIGN: center" align=center><B><SPAN lang=EN-US 
style="FONT-SIZE: 24pt">awk </SPAN></B><B><SPAN 
style="FONT-SIZE: 24pt; FONT-FAMILY: 宋体">手册</SPAN></B><B><SPAN lang=EN-US 
style="FONT-SIZE: 24pt"> </SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c"></SPAN>&nbsp;</P>
<P class=MsoBodyText><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">简体中文版由</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">bones7456 (</SPAN><SPAN 
lang=EN-US><A 
href="mailto:bones7456@gmail.com">bones7456@gmail.com</A></SPAN><SPAN lang=EN-US 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">)</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">整理</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">.</SPAN></P>
<P class=MsoBodyText><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">原文</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">:</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">应该是</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c"> </SPAN><SPAN lang=EN-US><A 
href="http://phi.sinica.edu.tw/aspac/reports/94/94011/">http://phi.sinica.edu.tw/aspac/reports/94/94011/</A></SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c"> </SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">但是原文很乱</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">.</SPAN></P>
<P class=MsoBodyText><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">说明</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">:</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">之前也是对</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">awk</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">几乎一无所知</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">,</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">无意中看到这篇文章</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">,</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">网上一搜</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">,</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">居然没有像样的简体中文版</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">.</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">有的也是不怎么完整</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">,</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">或者错误一大堆的</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">.</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">于是就顺手整理了下这篇文章</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">.</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">通过整理这篇文章</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">,</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">自己也渐渐掌握了</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">awk</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">的种种用法</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">.</SPAN></P>
<P class=MsoBodyText><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">原文可能比较老</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">,</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">有些目前已经不适用的命令有所改动</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">,</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">文中所有命令均在</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">ubuntu7.04</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">下调试通过</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">,</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">用的</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">awk</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">是</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">mawk.</SPAN></P>
<P class=MsoBodyText><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">由于本人能力有限</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">,</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">错误和不妥之处在所难免</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">,</SPAN><SPAN 
style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c; FONT-FAMILY: 宋体">欢迎多多指正</SPAN><SPAN 
lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: #4c4c4c">.</SPAN></P>
<H1><SPAN lang=EN-US>1.<SPAN style="FONT: 7pt 'Times New Roman'"> 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">前言</SPAN><SPAN lang=EN-US> 
</SPAN></H1>
<P class=MsoNormal><B><SPAN style="FONT-FAMILY: 宋体">有关本手册</SPAN> <SPAN 
lang=EN-US>: </SPAN></B></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">这是一本</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">学习指引</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">其重点着重于</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">适于解决哪些问题</SPAN><SPAN lang=EN-US> ? </SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">常见的解题模式为何</SPAN><SPAN lang=EN-US> ? </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">为使读者快速掌握</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">解题的模式及特性</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">本手册系由一些较具代表性的范例及其题解所构成</SPAN><SPAN lang=EN-US>; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">各范例由浅入深</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">彼此间相互连贯</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">范例中并对所使用的</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">语法及指令辅以必要的说明</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">有关</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">的指令</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">函数</SPAN><SPAN lang=EN-US>,...</SPAN><SPAN 
style="FONT-FAMILY: 宋体">等条列式的说明则收录于附录中</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以利读者往后撰写程序时查阅</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如此编排</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可让读者在短时间内顺畅地学会使用</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">来解决问题</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">建议读者循着范例上机实习</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以加深学习效果</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN style="FONT-FAMILY: 宋体">读者宜先具备下列背景</SPAN> <SPAN 
lang=EN-US>: </SPAN></B></P>
<P class=MsoNormal><SPAN lang=EN-US>[a.] UNIX </SPAN><SPAN 
style="FONT-FAMILY: 宋体">环境下的简单操作及基本概念</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">文件编辑</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件复制</SPAN> <SPAN style="FONT-FAMILY: 宋体">及</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">管道</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">输入</SPAN><SPAN lang=EN-US>/</SPAN><SPAN 
style="FONT-FAMILY: 宋体">输出重定向</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">等概念</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[b.] C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言的基本语法及流程控制指令</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令并不多</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">且其中之大部分与</SPAN><SPAN lang=EN-US> C</SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中之用法一致</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">本手册中对该类指令之语法及特性不再加以繁冗的说明</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">读者若欲深究</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">可自行翻阅相关的</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言书籍</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>2.<SPAN style="FONT: 7pt 'Times New Roman'"> 
</SPAN></SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">概述</SPAN><SPAN lang=EN-US> </SPAN></H1>
<P class=MsoNormal><B><SPAN style="FONT-FAMILY: 宋体">为什么使用</SPAN><SPAN 
lang=EN-US>awk </SPAN></B></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是一种程序语言</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">它具有一般程序语言常见的功能</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">因</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">语言具有某些特点</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US> : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">使用直译器</SPAN><SPAN 
lang=EN-US>(Interpreter)</SPAN><SPAN style="FONT-FAMILY: 宋体">不需先行编译</SPAN><SPAN 
lang=EN-US>; </SPAN><SPAN style="FONT-FAMILY: 宋体">变量无类型之分</SPAN><SPAN 
lang=EN-US>(Typeless), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可使用文字当数组的下标</SPAN><SPAN lang=EN-US>(Associative 
Array)...</SPAN><SPAN style="FONT-FAMILY: 宋体">等特色</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">因此</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">撰写程序比起使用其它语言更简洁便利且节省时间</SPAN><SPAN lang=EN-US>. 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">还具有一些内建功能</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">使得</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">擅于处理具数据行</SPAN><SPAN lang=EN-US>(Record), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">字段</SPAN><SPAN lang=EN-US>(Field)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">型态的资料</SPAN><SPAN lang=EN-US>; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">此外</SPAN><SPAN lang=EN-US>, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">内建有</SPAN><SPAN lang=EN-US>pipe</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的功能</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可将处理中的数据传送给外部的</SPAN><SPAN lang=EN-US> Shell</SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令加以处理</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">再将</SPAN><SPAN lang=EN-US>Shell</SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令处理后的数据传回</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这个特点也使得</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序很容易使用系统资源</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">由于</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">具有上述特色</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">在问题处理的过程中</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">可轻易使用</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">来撰写一些小工具</SPAN><SPAN 
lang=EN-US>; </SPAN><SPAN style="FONT-FAMILY: 宋体">这些小工具并非用来解决整个大问题</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">它们只扮演解决个别问题过程的某些角色</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">可藉由</SPAN><SPAN 
lang=EN-US>Shell</SPAN><SPAN style="FONT-FAMILY: 宋体">所提供的</SPAN><SPAN 
lang=EN-US>pipe</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将数据按需要传送给不同的小工具进行处理</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">以解决整个大问题</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">这种解题方式</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">使得这些小工具可因不同需求而被重复组合及重用</SPAN><SPAN 
lang=EN-US>(reuse); </SPAN><SPAN 
style="FONT-FAMILY: 宋体">也可藉此方式来先行测试大程序原型的可行性与正确性</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">将来若需要较高的执行速度时再用</SPAN><SPAN 
lang=EN-US>C</SPAN><SPAN style="FONT-FAMILY: 宋体">语言来改写</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">这是</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">最常被应用之处</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">若能常常如此处理问题</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">读者可以以更高的角度来思考抽象的问题</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">而不会被拘泥于细节的部份</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本手册为</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">入门的学习指引</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">其内容将先强调如何撰写</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">未列入进一步解题方式的应用实例</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">这部分将留待</SPAN><SPAN 
lang=EN-US>UNIX</SPAN><SPAN style="FONT-FAMILY: 宋体">进阶手册中再行讨论</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN style="FONT-FAMILY: 宋体">如何取得</SPAN><SPAN 
lang=EN-US>awk </SPAN></B></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">一般的</SPAN><SPAN 
lang=EN-US>UNIX</SPAN><SPAN style="FONT-FAMILY: 宋体">操作系统</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">本身即附有</SPAN><SPAN 
lang=EN-US>awk. </SPAN><SPAN style="FONT-FAMILY: 宋体">不同的</SPAN><SPAN 
lang=EN-US>UNIX</SPAN><SPAN style="FONT-FAMILY: 宋体">操作系统</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">所附的</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">其版本亦不尽相同</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">若读者所使用的系统上未附有</SPAN><SPAN 
lang=EN-US>awk, </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">可透过</SPAN><SPAN lang=EN-US> 
anonymous ftp </SPAN><SPAN style="FONT-FAMILY: 宋体">到下列地方取得</SPAN><SPAN 
lang=EN-US> : </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>phi.sinica.edu.tw:/pub/gnu </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>ftp.edu.tw:/UNIX/gnu </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>prep.ai.mit.edu:/pub/gnu </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN lang=EN-US>awk</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">如何工作</SPAN><SPAN lang=EN-US> </SPAN></B></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">为便于解释</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序架构</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">及有关术语</SPAN><SPAN lang=EN-US>(terminology), 
</SPAN><SPAN style="FONT-FAMILY: 宋体">先以一个员工薪资档</SPAN><SPAN lang=EN-US>(emp.dat 
), </SPAN><SPAN style="FONT-FAMILY: 宋体">来加以介绍</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>A125 Jenny 100 210 </SPAN></P>
<P class=a8><SPAN lang=EN-US>A341 Dan 110 215 </SPAN></P>
<P class=a8><SPAN lang=EN-US>P158 Max 130 209 </SPAN></P>
<P class=a8><SPAN lang=EN-US>P148 John 125 220 </SPAN></P>
<P class=a8><SPAN lang=EN-US>A123 Linda 95 210 </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">文件中各字段依次为</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">员工</SPAN><SPAN lang=EN-US>ID, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">姓名</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">薪资率</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">及</SPAN> <SPAN style="FONT-FAMILY: 宋体">实际工时</SPAN><SPAN 
lang=EN-US>. ID</SPAN><SPAN style="FONT-FAMILY: 宋体">中的第一码为部门识别码</SPAN><SPAN 
lang=EN-US>. "A","P"</SPAN><SPAN style="FONT-FAMILY: 宋体">分别表示</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">组装</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">及</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">包装</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">部门</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本小节着重于说明</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序的主要架构及工作原理</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">并对一些重要的名词辅以必要的解释</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">由这部分内容</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">读者可体会出</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">语言的主要精神及</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">与其它语程序言的差异处</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">为便于说明</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">以条列方式说明于后</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><B><SPAN style="FONT-FAMILY: 宋体">名词定义</SPAN></B><SPAN 
lang=EN-US> </SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体">数据行</SPAN><SPAN lang=EN-US>: 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">从数据文件上读取数据的基本单位</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">以上列文件</SPAN><SPAN 
lang=EN-US>emp.dat</SPAN><SPAN style="FONT-FAMILY: 宋体">为例</SPAN><SPAN 
lang=EN-US>, awk</SPAN><SPAN style="FONT-FAMILY: 宋体">读入的</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=MsoNormal style="TEXT-INDENT: 37.5pt"><SPAN 
style="FONT-FAMILY: 宋体">第一笔数据行是</SPAN><SPAN lang=EN-US> "A125 Jenny 100 210" 
</SPAN></P>
<P class=MsoNormal style="TEXT-INDENT: 37.5pt"><SPAN 
style="FONT-FAMILY: 宋体">第二笔数据行是</SPAN><SPAN lang=EN-US> "A341 Dan 110 215" 
</SPAN></P>
<P class=MsoNormal style="TEXT-INDENT: 37.5pt"><SPAN 
style="FONT-FAMILY: 宋体">一般而言</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">一个</SPAN> <SPAN style="FONT-FAMILY: 宋体">数据行</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">就相当于数据文件上的一行资料</SPAN><SPAN lang=EN-US>. (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">参考</SPAN><SPAN lang=EN-US> : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">附录</SPAN><SPAN lang=EN-US> B </SPAN><SPAN 
style="FONT-FAMILY: 宋体">内建变量</SPAN><SPAN lang=EN-US>"RS" ) </SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体">字段</SPAN><SPAN lang=EN-US>(Field) : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为数据行上被分隔开的子字符串</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal style="TEXT-INDENT: 37.5pt"><SPAN 
style="FONT-FAMILY: 宋体">以数据行</SPAN><SPAN lang=EN-US>"A125 Jenny 100 
210"</SPAN><SPAN style="FONT-FAMILY: 宋体">为例</SPAN><SPAN lang=EN-US>, </SPAN></P>
<P class=MsoNormal style="TEXT-INDENT: 37.5pt"><SPAN 
style="FONT-FAMILY: 宋体">第一栏</SPAN> <SPAN style="FONT-FAMILY: 宋体">第二栏</SPAN> 
<SPAN style="FONT-FAMILY: 宋体">第三栏</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">第四栏</SPAN><SPAN lang=EN-US> "A125" "Jenny" 100 210 
</SPAN></P>
<P class=MsoNormal style="TEXT-INDENT: 37.5pt"><SPAN 
style="FONT-FAMILY: 宋体">一般是以空格符来分隔相邻的字段</SPAN><SPAN lang=EN-US>. ( </SPAN><SPAN 
style="FONT-FAMILY: 宋体">参考</SPAN><SPAN lang=EN-US> : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">附录</SPAN><SPAN lang=EN-US> D </SPAN><SPAN 
style="FONT-FAMILY: 宋体">内建变量</SPAN><SPAN lang=EN-US>"FS" ) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>3.<SPAN style="FONT: 7pt 'Times New Roman'"> 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">如何执行</SPAN><SPAN 
lang=EN-US>awk </SPAN></H1>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">于</SPAN><SPAN 
lang=EN-US>UNIX</SPAN><SPAN style="FONT-FAMILY: 宋体">的命令行上键入诸如下列格式的指令</SPAN><SPAN 
lang=EN-US>: ( "$"</SPAN><SPAN style="FONT-FAMILY: 宋体">表</SPAN><SPAN 
lang=EN-US>Shell</SPAN><SPAN style="FONT-FAMILY: 宋体">命令行上的提示符号</SPAN><SPAN 
lang=EN-US>) </SPAN></P>
<P class=a8><SPAN lang=EN-US>$awk 'awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US>' </SPAN><SPAN 
style="FONT-FAMILY: 宋体">数据文件文件名</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">则</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">会先编译该程序</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">然后执行该程序来处理所指定的数据文件</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">上列方式系直接把程序写在</SPAN><SPAN lang=EN-US>UNIX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的命令行上</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><B><SPAN lang=EN-US>awk</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">程序的主要结构</SPAN><SPAN lang=EN-US>: </SPAN></B></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中主要语法是</SPAN><SPAN lang=EN-US> Pattern { Actions}, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">故常见之</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">程序其型态如下</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>Pattern1 { Actions1 } </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>Pattern2 { Actions2 } </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>...... </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>Pattern3 { Actions3 } </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN lang=EN-US>Pattern </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">是什么</SPAN> <SPAN lang=EN-US>? </SPAN></B></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可接受许多不同型态的</SPAN><SPAN lang=EN-US> Pattern. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">一般常使用</SPAN><SPAN lang=EN-US> "</SPAN><SPAN 
style="FONT-FAMILY: 宋体">关系表达式</SPAN><SPAN lang=EN-US>"(Relational expression) 
</SPAN><SPAN style="FONT-FAMILY: 宋体">来当成</SPAN><SPAN lang=EN-US> Pattern. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>x &gt; 34 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是一个</SPAN><SPAN lang=EN-US>Pattern, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">判断变量</SPAN><SPAN lang=EN-US> x </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> 34 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是否存在大于的关系</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>x == y </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是一个</SPAN><SPAN lang=EN-US>Pattern, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">判断变量</SPAN><SPAN lang=EN-US> x </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与变量</SPAN><SPAN lang=EN-US> y </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是否存在等于的关系</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">上式中</SPAN><SPAN lang=EN-US> x 
&gt;34 , x == y </SPAN><SPAN style="FONT-FAMILY: 宋体">便是典型的</SPAN><SPAN 
lang=EN-US>Pattern. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">提供</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中常见的关系运算符</SPAN><SPAN lang=EN-US>(Relational 
Operators) </SPAN><SPAN style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>&gt;, &lt;, &gt;=, &lt;=, ==, !=</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">此外</SPAN><SPAN lang=EN-US>, awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">还提供</SPAN><SPAN lang=EN-US> ~ (match) 
</SPAN><SPAN style="FONT-FAMILY: 宋体">及</SPAN><SPAN lang=EN-US> !~(not match) 
</SPAN><SPAN style="FONT-FAMILY: 宋体">二个关系运算符</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">注一</SPAN><SPAN lang=EN-US>). 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">其用法与涵义如下</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US> A 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为一字符串</SPAN><SPAN lang=EN-US>, B 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为一正则表达式</SPAN><SPAN lang=EN-US>(Regular 
Expression)</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>A ~ B </SPAN><SPAN 
style="FONT-FAMILY: 宋体">判断</SPAN> <SPAN style="FONT-FAMILY: 宋体">字符串</SPAN><SPAN 
lang=EN-US>A </SPAN><SPAN style="FONT-FAMILY: 宋体">中是否</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">包含</SPAN> <SPAN style="FONT-FAMILY: 宋体">能匹配</SPAN><SPAN 
lang=EN-US>(match)B</SPAN><SPAN style="FONT-FAMILY: 宋体">表达式的子字符串</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>A !~ B </SPAN><SPAN 
style="FONT-FAMILY: 宋体">判断</SPAN> <SPAN style="FONT-FAMILY: 宋体">字符串</SPAN><SPAN 
lang=EN-US>A </SPAN><SPAN style="FONT-FAMILY: 宋体">中是否</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">不包含</SPAN> <SPAN style="FONT-FAMILY: 宋体">能匹配</SPAN><SPAN 
lang=EN-US>(match)B</SPAN><SPAN style="FONT-FAMILY: 宋体">表达式的子字符串</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>"banana" ~ /an/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">整个是一个</SPAN><SPAN lang=EN-US>Pattern. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">因为</SPAN><SPAN 
lang=EN-US>"banana"</SPAN><SPAN style="FONT-FAMILY: 宋体">中含有可以匹配</SPAN><SPAN 
lang=EN-US> /an/ </SPAN><SPAN style="FONT-FAMILY: 宋体">的子字符串</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">故此关系式成立</SPAN><SPAN 
lang=EN-US>(true),</SPAN><SPAN style="FONT-FAMILY: 宋体">整个</SPAN><SPAN 
lang=EN-US>Pattern</SPAN><SPAN style="FONT-FAMILY: 宋体">的值也是</SPAN><SPAN 
lang=EN-US>true. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">相关细节请参考</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">附录</SPAN><SPAN lang=EN-US> A Patterns, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">附录</SPAN><SPAN lang=EN-US> E Regular Expression 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">注一</SPAN><SPAN lang=EN-US>:) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">有少数</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">论著</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">把</SPAN><SPAN lang=EN-US> ~, !~ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">当成另一类的</SPAN><SPAN lang=EN-US> Operator,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不视为一种</SPAN><SPAN lang=EN-US> Relational Operator. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">本手册中将这两个运算符当成一种</SPAN><SPAN lang=EN-US> 
Relational Operator. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN lang=EN-US>Actions </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">是什么</SPAN><SPAN lang=EN-US>? </SPAN></B></P>
<P class=MsoNormal><SPAN lang=EN-US>Actions </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是由许多</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令构成</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">而</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的指令与</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中的指令十分类似</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US> I/O</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> : print, printf( ), 
getline...</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">流程控制指令</SPAN><SPAN lang=EN-US> : if(...){..} else{..}, 
while(...){...}... </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">请参考</SPAN> <SPAN style="FONT-FAMILY: 宋体">附录</SPAN><SPAN 
lang=EN-US> B --- "Actions" ) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN lang=EN-US>awk </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">如何处理</SPAN> <SPAN lang=EN-US>Pattern { Actions } 
?</SPAN></B><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">会先判断</SPAN><SPAN lang=EN-US>(Evaluate) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">该</SPAN><SPAN lang=EN-US> Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的值</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US> Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">判断后的值为</SPAN><SPAN lang=EN-US>true (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">或不为</SPAN><SPAN lang=EN-US>0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的数字</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">或不是空的字符串</SPAN><SPAN lang=EN-US>), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US> awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将执行该</SPAN><SPAN lang=EN-US> Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所对应的</SPAN><SPAN lang=EN-US> Actions.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">反之</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US> Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值不为</SPAN><SPAN lang=EN-US> true, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将不执行该</SPAN><SPAN lang=EN-US> Pattern</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所对应的</SPAN><SPAN lang=EN-US> Actions. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中有下列两指令</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>50 &gt; 23 {print "Hello! The word!!" } 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>"banana" ~ /123/ { print "Good morning !" } 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">会先判断</SPAN><SPAN lang=EN-US> 50 &gt;23 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是否成立</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">因为该式成立</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所以</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将印出</SPAN><SPAN lang=EN-US>"Hello! The word!!". 
</SPAN><SPAN style="FONT-FAMILY: 宋体">而另一</SPAN><SPAN lang=EN-US> Pattern 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> "banana" ~/123/, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">因为</SPAN><SPAN lang=EN-US>"banana" 
</SPAN><SPAN style="FONT-FAMILY: 宋体">内未含有任何子字符串可</SPAN><SPAN lang=EN-US> match 
/123/, </SPAN><SPAN style="FONT-FAMILY: 宋体">该</SPAN><SPAN lang=EN-US> Pattern 
</SPAN><SPAN style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US>false, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">故</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将不会印出</SPAN><SPAN lang=EN-US> "Good morning !" 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN lang=EN-US>awk </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">如何处理</SPAN><SPAN lang=EN-US>{ Actions } 
</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">的语法</SPAN><SPAN 
lang=EN-US>?(</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">缺少</SPAN><SPAN 
lang=EN-US>Pattern</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">部分</SPAN><SPAN 
lang=EN-US>) </SPAN></B></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">有时语法</SPAN><SPAN lang=EN-US> 
Pattern { Actions }</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN 
lang=EN-US>, Pattern </SPAN><SPAN style="FONT-FAMILY: 宋体">部分被省略</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">只剩</SPAN><SPAN lang=EN-US> 
{Actions}.</SPAN><SPAN style="FONT-FAMILY: 宋体">这种情形表示</SPAN><SPAN lang=EN-US> 
"</SPAN><SPAN style="FONT-FAMILY: 宋体">无条件执行这个</SPAN><SPAN lang=EN-US> Actions". 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN lang=EN-US>awk </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">的字段变量</SPAN><SPAN lang=EN-US> </SPAN></B></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所内建的字段变量及其涵意如下</SPAN><SPAN lang=EN-US> : </SPAN></P>
<TABLE class=MsoNormalTable 
style="MARGIN-LEFT: 2.75pt; BORDER-COLLAPSE: collapse" cellSpacing=0 
cellPadding=0 border=0>
  <TBODY>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: black 1pt solid; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 84.8pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=113>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">字段变量</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: black 1pt solid; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 397.05pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=529>
      <P class=a3><SPAN style="FONT-FAMILY: 宋体">含义</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 84.8pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    width=113>
      <P class=MsoNormal><SPAN lang=EN-US>$0</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 397.05pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=529>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">一字符串</SPAN><SPAN 
      lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">其内容为目前</SPAN><SPAN 
      lang=EN-US> awk </SPAN><SPAN style="FONT-FAMILY: 宋体">所读入的数据行</SPAN><SPAN 
      lang=EN-US>.</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 84.8pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    width=113>
      <P class=MsoNormal><SPAN lang=EN-US>$1</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 397.05pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=529>
      <P class=MsoNormal><SPAN lang=EN-US>$0 </SPAN><SPAN 
      style="FONT-FAMILY: 宋体">上第一个字段的数据</SPAN><SPAN 
lang=EN-US>.</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 84.8pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    width=113>
      <P class=MsoNormal><SPAN lang=EN-US>$2</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 397.05pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=529>
      <P class=MsoNormal><SPAN lang=EN-US>$0 </SPAN><SPAN 
      style="FONT-FAMILY: 宋体">上第二个字段的数据</SPAN><SPAN 
lang=EN-US>.</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 84.8pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    width=113>
      <P class=MsoNormal><SPAN lang=EN-US>...</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 397.05pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=529>
      <P class=MsoNormal><SPAN 
  style="FONT-FAMILY: 宋体">其余类推</SPAN></P></TD></TR></TBODY></TABLE>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN style="FONT-FAMILY: 宋体">读入数据行时</SPAN><SPAN 
lang=EN-US>, awk</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">如何更新</SPAN><SPAN 
lang=EN-US>(update)</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">这些内建的字段变量</SPAN><SPAN lang=EN-US>?</SPAN></B><SPAN 
lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">从数据文件中读取一个数据行时</SPAN><SPAN lang=EN-US>, awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">会使用内建变量</SPAN><SPAN lang=EN-US>$0 
</SPAN><SPAN style="FONT-FAMILY: 宋体">予以记录</SPAN><SPAN lang=EN-US>.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">每当</SPAN><SPAN lang=EN-US> $0 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">被改动时</SPAN><SPAN lang=EN-US> (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">读入新的数据行</SPAN> <SPAN style="FONT-FAMILY: 宋体">或</SPAN> 
<SPAN style="FONT-FAMILY: 宋体">自行变更</SPAN><SPAN lang=EN-US> $0,...) awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">会立刻重新分析</SPAN><SPAN lang=EN-US> $0 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的字段情况</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并将</SPAN><SPAN lang=EN-US> $0 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">上各字段的数据用</SPAN><SPAN lang=EN-US> $1, $2, ..</SPAN><SPAN 
style="FONT-FAMILY: 宋体">予以记录</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN lang=EN-US>awk</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">的内建变量</SPAN><SPAN lang=EN-US>(Built-in Variables) 
</SPAN></B></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">提供了许多内建变量</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用者于程序中可使用这些变量来取得相关信息</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">常见的内建变量有</SPAN><SPAN 
lang=EN-US> : </SPAN></P>
<TABLE class=MsoNormalTable 
style="MARGIN-LEFT: 2.75pt; BORDER-COLLAPSE: collapse" cellSpacing=0 
cellPadding=0 border=0>
  <TBODY>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: black 1pt solid; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 133.3pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=178>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">内建变量</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: black 1pt solid; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 348.55pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=465>
      <P class=a3><SPAN style="FONT-FAMILY: 宋体">含义</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 133.3pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=178>
      <P class=MsoNormal><SPAN lang=EN-US>NF (Number of Fields)</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 348.55pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=465>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">为一整数</SPAN><SPAN 
      lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">其值表</SPAN><SPAN 
      lang=EN-US>$0</SPAN><SPAN style="FONT-FAMILY: 宋体">上所存在的字段数目</SPAN><SPAN 
      lang=EN-US>.</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 133.3pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=178>
      <P class=MsoNormal><SPAN lang=EN-US>NR (Number of Records)</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 348.55pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=465>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">为一整数</SPAN><SPAN 
      lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">其值表</SPAN><SPAN 
      lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">已读入的数据行数目</SPAN><SPAN 
      lang=EN-US>.</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 133.3pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=178>
      <P class=MsoNormal><SPAN lang=EN-US>FILENAMEawk</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 348.55pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=465>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">正在处理的数据文件文件名</SPAN><SPAN 
      lang=EN-US>. </SPAN></P></TD></TR></TBODY></TABLE>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
awk </SPAN><SPAN style="FONT-FAMILY: 宋体">从资料文件</SPAN><SPAN lang=EN-US> emp.dat 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中读入第一笔数据行</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>"A125 Jenny 100 210" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之后</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中</SPAN><SPAN lang=EN-US>: </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$0 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值将是</SPAN><SPAN lang=EN-US> "A125 Jenny 100 210" 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$1 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> "A125" </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> "Jenny" </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$3 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> 100 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$4 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> 210 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$NF </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> 4 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$NR </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> 1 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$FILENAME </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> "emp.dat" </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN lang=EN-US>awk</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">的工作流程</SPAN> <SPAN lang=EN-US>: </SPAN></B></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">它会反复进行下列四步骤</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<OL style="MARGIN-TOP: 0cm" type=1>
  <LI class=MsoNormal><SPAN 
  style="FONT-FAMILY: 宋体">自动从指定的数据文件中读取一个数据行</SPAN><SPAN lang=EN-US>. </SPAN>
  <LI class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">自动更新</SPAN><SPAN 
  lang=EN-US>(Update)</SPAN><SPAN style="FONT-FAMILY: 宋体">相关的内建变量之值</SPAN><SPAN 
  lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US> : 
  NF, NR, $0... </SPAN>
  <LI class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">依次执行程序中</SPAN> <SPAN 
  style="FONT-FAMILY: 宋体">所有</SPAN> <SPAN style="FONT-FAMILY: 宋体">的</SPAN><SPAN 
  lang=EN-US> Pattern { Actions } </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>. </SPAN>
  <LI class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">当执行完程序中所有</SPAN><SPAN 
  lang=EN-US> Pattern { Actions } </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">若数据文件中还有未读取的数据</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">则反复执行步骤</SPAN><SPAN lang=EN-US>1</SPAN><SPAN 
  style="FONT-FAMILY: 宋体">到步骤</SPAN><SPAN lang=EN-US>4. </SPAN></LI></OL>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">会自动重复进行上述</SPAN><SPAN lang=EN-US>4</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个步骤</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用者不须于程序中编写这个循环</SPAN><SPAN lang=EN-US> (Loop). 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN 
style="FONT-FAMILY: 宋体">打印文件中指定的字段数据并加以计算</SPAN></B><SPAN lang=EN-US> 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">处理数据时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">它会自动从数据文件中一次读取一笔记录</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并会</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">将该数据切分成一个个的字段</SPAN><SPAN 
lang=EN-US>; </SPAN><SPAN style="FONT-FAMILY: 宋体">程序中可使用</SPAN><SPAN lang=EN-US> 
$1, $2,... </SPAN><SPAN style="FONT-FAMILY: 宋体">直接取得</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">各个字段的内容</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">这个特色让使用者易于用</SPAN><SPAN 
lang=EN-US> awk </SPAN><SPAN style="FONT-FAMILY: 宋体">编写</SPAN><SPAN lang=EN-US> 
reformatter </SPAN><SPAN style="FONT-FAMILY: 宋体">来改变量据格式</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> :] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以文件</SPAN><SPAN lang=EN-US> emp.dat </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为例</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">计算每人应发工资并打印报表</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">分析</SPAN><SPAN lang=EN-US> :] awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">会自行一次读入一列数据</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故程序中仅需告诉</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如何处理所读入的数据行</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行如下命令</SPAN><SPAN lang=EN-US> 
: ( $ </SPAN><SPAN style="FONT-FAMILY: 宋体">表</SPAN><SPAN 
lang=EN-US>UNIX</SPAN><SPAN style="FONT-FAMILY: 宋体">命令行上的提示符</SPAN><SPAN 
lang=EN-US> ) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US>$ awk '{ print $2, $3 * $4 }' emp.dat </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行结果如下</SPAN><SPAN lang=EN-US> 
: </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">屏幕出现</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>Jenny 21000 </SPAN></P>
<P class=a8><SPAN lang=EN-US>Dan 23650 </SPAN></P>
<P class=a8><SPAN lang=EN-US>Max 27170 </SPAN></P>
<P class=a8><SPAN lang=EN-US>John 27500 </SPAN></P>
<P class=a8><SPAN lang=EN-US>Linda 19950 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说明</SPAN><SPAN lang=EN-US> :] </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>UNIX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令行上</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的语法为</SPAN><SPAN lang=EN-US>: </SPAN></P>
<P class=a8><SPAN lang=EN-US>$awk 'awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US>' </SPAN><SPAN 
style="FONT-FAMILY: 宋体">欲处理的资料文件文件名</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本范例中的</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">程序部分</SPAN> <SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN 
lang=EN-US> {print $2, $3 * $4}. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">把程序置于命令行时</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">程序之前后须以</SPAN><SPAN 
lang=EN-US> ' </SPAN><SPAN style="FONT-FAMILY: 宋体">括住</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>emp.dat </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为指定给该程序处理的数据文件文件名</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本程序中使用</SPAN><SPAN lang=EN-US> 
: Pattern { Actions } </SPAN><SPAN style="FONT-FAMILY: 宋体">语法</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">部分被省略</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表无任何限制条件</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">读入每笔数据行后都将无条件执行这个</SPAN><SPAN lang=EN-US> Actions. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>print</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所提供的输出指令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">会将数据输出到</SPAN><SPAN lang=EN-US>stdout(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">屏幕</SPAN><SPAN lang=EN-US>). </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>print </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的参数间彼此以</SPAN><SPAN lang=EN-US> "," (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">逗号</SPAN><SPAN lang=EN-US>) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">隔开</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">印出数据时彼此间会以空白隔开</SPAN><SPAN lang=EN-US>. (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">参考</SPAN> <SPAN style="FONT-FAMILY: 宋体">附录</SPAN><SPAN 
lang=EN-US> D </SPAN><SPAN style="FONT-FAMILY: 宋体">内建变量</SPAN><SPAN 
lang=EN-US>OFS) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">将上述的</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">程序部分</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">储存于文件</SPAN><SPAN lang=EN-US> pay1.awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行命令时再指定</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序文件</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">之文件名</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这是执行</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的另一种方式</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">特别适用于程序较大的情况</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其语法如下</SPAN><SPAN lang=EN-US>: </SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk -f awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序文件名</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">数据文件文件名</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">故执行下列两命令</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">将产生同样的结果</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk -f pay1.awk emp.dat </SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk '{ print $2, $3 * $4 }' emp.dat </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">读者可使用</SPAN><SPAN lang=EN-US> 
"-f" </SPAN><SPAN style="FONT-FAMILY: 宋体">参数</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">让</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">主程序使用</SPAN><SPAN 
lang=EN-US>“</SPAN><SPAN style="FONT-FAMILY: 宋体">其它仅含</SPAN><SPAN lang=EN-US> 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">函数</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">的文件中的函数</SPAN><SPAN lang=EN-US> ”</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">其语法如下</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk -f awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">主程序文件名</SPAN><SPAN lang=EN-US> -f awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">函数文件名</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">数据文件文件名</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">有关</SPAN> <SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中函数的声明与使用于</SPAN> <SPAN lang=EN-US>7.4 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中说明</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中也提供与</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中类似用法的</SPAN><SPAN lang=EN-US> printf() </SPAN><SPAN 
style="FONT-FAMILY: 宋体">函数</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用该函数可进一步控制数据的输出格式</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">编辑另一个</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序如下</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">并取名为</SPAN><SPAN lang=EN-US> pay2.awk 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US>{ printf("%6s Work hours: %3d Pay: %5d\n", $2,$3, 
$3* $4) } </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行下列命令</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US>$awk -f pay2.awk emp.dat </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行结果屏幕出现</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;Jenny Work hours: 100 Pay: 21000 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp; Dan Work hours: 110 Pay: 23650 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp; Max Work hours: 130 Pay: 27170 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp; John Work hours: 125 Pay: 27500 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;Linda Work hours:&nbsp; 95 Pay: 19950 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>4.<SPAN style="FONT: 7pt 'Times New Roman'"> 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">选择符合指定条件的记录</SPAN><SPAN 
lang=EN-US> </SPAN></H1>
<P class=MsoNormal><SPAN lang=EN-US>Pattern { Action }</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中最主要的语法</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若某</SPAN><SPAN lang=EN-US>Pattern</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为真则执行它后方的</SPAN><SPAN lang=EN-US> Action. 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">中常使用</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">关系表达式</SPAN><SPAN lang=EN-US>" 
(Relational Expression)</SPAN><SPAN style="FONT-FAMILY: 宋体">来当成</SPAN><SPAN 
lang=EN-US> Pattern. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中除了</SPAN><SPAN lang=EN-US>&gt;, &lt;, ==, != 
,...</SPAN><SPAN style="FONT-FAMILY: 宋体">等关系运算符</SPAN><SPAN lang=EN-US>( 
Relational Operators )</SPAN><SPAN style="FONT-FAMILY: 宋体">外</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">另外提供</SPAN><SPAN lang=EN-US> 
~(match),!~(Not Match) </SPAN><SPAN style="FONT-FAMILY: 宋体">二个关系运算符</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">利用这两个运算符</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可判断某字符串是否包含能匹配所指定正则表达式的子字符串</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">由于这些特性</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">很容易使用</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">来编写需要字符串比对</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">判断的程序</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> :] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">承上例</SPAN><SPAN lang=EN-US>, </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">组装部门员工调薪</SPAN><SPAN 
lang=EN-US>5%,(</SPAN><SPAN style="FONT-FAMILY: 宋体">组装部门员工之</SPAN><SPAN 
lang=EN-US>ID</SPAN><SPAN style="FONT-FAMILY: 宋体">以</SPAN><SPAN 
lang=EN-US>"A"</SPAN><SPAN style="FONT-FAMILY: 宋体">开头</SPAN><SPAN lang=EN-US>) 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">所有员工最后之薪资率若仍低于</SPAN><SPAN 
lang=EN-US>100, </SPAN><SPAN style="FONT-FAMILY: 宋体">则以</SPAN><SPAN 
lang=EN-US>100</SPAN><SPAN style="FONT-FAMILY: 宋体">计</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">编写</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序打印新的员工薪资率报表</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[</SPAN><SPAN 
style="FONT-FAMILY: 宋体">分析</SPAN><SPAN lang=EN-US> ] : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这个程序须先判断所读入的数据行是否合于指定条件</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">再进行某些动作</SPAN><SPAN 
lang=EN-US>.awk</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US> 
Pattern { Actions } </SPAN><SPAN style="FONT-FAMILY: 宋体">的语法已涵盖这种</SPAN><SPAN 
lang=EN-US> " if ( </SPAN><SPAN style="FONT-FAMILY: 宋体">条件</SPAN><SPAN 
lang=EN-US>) { </SPAN><SPAN style="FONT-FAMILY: 宋体">动作</SPAN><SPAN lang=EN-US>} 
"</SPAN><SPAN style="FONT-FAMILY: 宋体">的架构</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">编写如下之程序</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并取名</SPAN><SPAN lang=EN-US> adjust1.awk </SPAN></P>
<P class=a8><SPAN lang=EN-US>$1 ~ /^A.*/ { $3 *= 1.05 } $3&lt;100 { $3 = 100 } 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>{ printf("%s %8s %d\n", $1, $2, $3)} </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行下列命令</SPAN><SPAN lang=EN-US> 
: </SPAN></P>
<P class=a8><SPAN lang=EN-US>$awk -f adjust1.awk emp.dat </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">结果如下</SPAN><SPAN lang=EN-US> : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">屏幕出现</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=a8><SPAN lang=EN-US>A125&nbsp;&nbsp;&nbsp; Jenny 105 </SPAN></P>
<P class=a8><SPAN lang=EN-US>A341&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Dan 115 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>P158&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Max 130 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>P148&nbsp;&nbsp;&nbsp;&nbsp; John 125 </SPAN></P>
<P class=a8><SPAN lang=EN-US>A123&nbsp;&nbsp;&nbsp; Linda 100 </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">说</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">明</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的工作程序是</SPAN><SPAN lang=EN-US>: </SPAN><SPAN 
style="FONT-FAMILY: 宋体">从数据文件中每次读入一个数据行</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">依序执行完程序中所有的</SPAN><SPAN lang=EN-US> Pattern{ Action 
}</SPAN><SPAN style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>:</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$1~/^A.*/ { $3 *= 1.05 } </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$3 &lt; 100 { $3 = 100 } </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>{printf("%s %8s %d\n",$1,$2,$3)} </SPAN></P>
<P class=MsoNormal><SPAN 
style="FONT-FAMILY: 宋体">再从数据文件中读进下一笔记录继续进行处理</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">第一个</SPAN><SPAN lang=EN-US> 
Pattern { Action }</SPAN><SPAN style="FONT-FAMILY: 宋体">是</SPAN><SPAN 
lang=EN-US>: $1 ~ /^A.*/ { $3 *= 1.05 } </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$1 ~ /^A.*/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是一个</SPAN><SPAN lang=EN-US>Pattern, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用来判断该笔数据行的第一栏是否包含以</SPAN><SPAN 
lang=EN-US>"A"</SPAN><SPAN style="FONT-FAMILY: 宋体">开头的子字符串</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">其中</SPAN><SPAN lang=EN-US> 
/^A.*/ </SPAN><SPAN style="FONT-FAMILY: 宋体">是一个</SPAN><SPAN lang=EN-US>Regular 
Expression, </SPAN><SPAN style="FONT-FAMILY: 宋体">用以表示任何以</SPAN><SPAN 
lang=EN-US>"A"</SPAN><SPAN style="FONT-FAMILY: 宋体">开头的字符串</SPAN><SPAN 
lang=EN-US>. (</SPAN><SPAN style="FONT-FAMILY: 宋体">有关</SPAN><SPAN lang=EN-US> 
Regular Expression </SPAN><SPAN style="FONT-FAMILY: 宋体">之用法</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">参考</SPAN> <SPAN style="FONT-FAMILY: 宋体">附录</SPAN><SPAN 
lang=EN-US> E ). </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>Actions </SPAN><SPAN 
style="FONT-FAMILY: 宋体">部分为</SPAN><SPAN lang=EN-US> $3 *= 1.05 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$3 *= 1.05 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> $3 = $3 * 1.05 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">意义相同</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">运算子</SPAN><SPAN lang=EN-US>"*=" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之用法则与</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中一样</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">此后与</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中用法相同的运算子或语法将不予赘述</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">第二个</SPAN><SPAN lang=EN-US> 
Pattern { Actions } </SPAN><SPAN style="FONT-FAMILY: 宋体">是</SPAN><SPAN 
lang=EN-US>: $3 &lt;100 {$3 = 100 } </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若第三栏的数据内容</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表薪资率</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">小于</SPAN><SPAN lang=EN-US>100, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则调整为</SPAN><SPAN lang=EN-US>100. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">第三个</SPAN><SPAN lang=EN-US> 
Pattern { Actions } </SPAN><SPAN style="FONT-FAMILY: 宋体">是</SPAN><SPAN 
lang=EN-US>: {printf("%s %8s %d\n",$1, $2, $3 )} </SPAN><SPAN 
style="FONT-FAMILY: 宋体">省略了</SPAN><SPAN lang=EN-US>Pattern(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">无条件执行</SPAN><SPAN lang=EN-US>Actions), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故所有数据行调整后的数据都将被印出</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>5.<SPAN style="FONT: 7pt 'Times New Roman'"> 
</SPAN></SPAN><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">中数组</SPAN><SPAN lang=EN-US> </SPAN></H1>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中允许使用字符串当做数组的下标</SPAN><SPAN lang=EN-US>(index). 
</SPAN><SPAN style="FONT-FAMILY: 宋体">利用这个特色十分有助于资料统计工作</SPAN><SPAN 
lang=EN-US>.(</SPAN><SPAN style="FONT-FAMILY: 宋体">使用字符串当下标的数组称为</SPAN><SPAN 
lang=EN-US>Associative Array) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">首先建立一个数据文件</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">并取名为</SPAN><SPAN lang=EN-US> 
reg.dat. </SPAN><SPAN style="FONT-FAMILY: 宋体">此为一学生注册的资料文件</SPAN><SPAN 
lang=EN-US>; </SPAN><SPAN style="FONT-FAMILY: 宋体">第一栏为学生姓名</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">其后为该生所修课程</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>Mary O.S. Arch. Discrete </SPAN></P>
<P class=a8><SPAN lang=EN-US>Steve D.S. Algorithm Arch. </SPAN></P>
<P class=a8><SPAN lang=EN-US>Wang Discrete Graphics O.S. </SPAN></P>
<P class=a8><SPAN lang=EN-US>Lisa Graphics A.I. </SPAN></P>
<P class=a8><SPAN lang=EN-US>Lily Discrete Algorithm </SPAN></P>
<P class=MsoNormal><B><SPAN lang=EN-US>awk</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">中数组的特性</SPAN><SPAN lang=EN-US> </SPAN></B></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">使用字符串当数组的下标</SPAN><SPAN 
lang=EN-US>(index). </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">使用数组前不须宣告数组名及其大小</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
</SPAN><SPAN style="FONT-FAMILY: 宋体">希望用数组来记录</SPAN><SPAN lang=EN-US> reg.dat 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中各门课程的修课人数</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">这情况</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">有二项信息必须储存</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(a) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">课程名称</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US>: "O.S.","Arch.".. 
,</SPAN><SPAN style="FONT-FAMILY: 宋体">共有哪些课程事先并不明确</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(b)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">各课程的修课人数</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US>: </SPAN><SPAN 
style="FONT-FAMILY: 宋体">有几个人修</SPAN><SPAN lang=EN-US>"O.S." </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">在</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中只要用一个数组就可同时记录上列信息</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其方法如下</SPAN><SPAN lang=EN-US>: </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">使用一个数组</SPAN><SPAN lang=EN-US> 
Number[ ] : </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">以课程名称当</SPAN><SPAN lang=EN-US> 
Number[ ] </SPAN><SPAN style="FONT-FAMILY: 宋体">的下标</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US> 
Number[ ] </SPAN><SPAN style="FONT-FAMILY: 宋体">中不同下标所对映的元素代表修课人数</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">有</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">个学生修</SPAN><SPAN lang=EN-US> 
"O.S.", </SPAN><SPAN style="FONT-FAMILY: 宋体">则以</SPAN><SPAN lang=EN-US> 
Number["O.S."] = 2 </SPAN><SPAN style="FONT-FAMILY: 宋体">表之</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">若修</SPAN><SPAN 
lang=EN-US>"O.S."</SPAN><SPAN style="FONT-FAMILY: 宋体">的人数增加一人</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US> 
Number["O.S."] = Number["O.S."] + 1 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> Number["O.S."]++ . </SPAN></P>
<P class=MsoNormal><B><SPAN style="FONT-FAMILY: 宋体">如何取出数组中储存的信息</SPAN><SPAN 
lang=EN-US> </SPAN></B></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US> C 
</SPAN><SPAN style="FONT-FAMILY: 宋体">语言为例</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">声明</SPAN><SPAN lang=EN-US> int Arr[100]; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之后</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若想得知</SPAN><SPAN lang=EN-US> Arr[ ]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中所储存的数据</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">只须用一个循环</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>for(i=0; i&lt;100; i++) printf("%d\n", 
Arr[i]); </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">即可</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">上式中</SPAN><SPAN lang=EN-US>: </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">数组</SPAN><SPAN lang=EN-US> Arr[ 
] </SPAN><SPAN style="FONT-FAMILY: 宋体">的下标</SPAN><SPAN lang=EN-US> : 0, 1, 
2,..., 99 </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">数组</SPAN><SPAN lang=EN-US> Arr[ 
] </SPAN><SPAN style="FONT-FAMILY: 宋体">中各下标所对应的值</SPAN><SPAN lang=EN-US> : 
Arr[0], Arr[1],...Arr[99] </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">但</SPAN><SPAN lang=EN-US> awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中使用数组并不须事先宣告</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">以刚才使用的</SPAN><SPAN lang=EN-US> Number[ ] 
</SPAN><SPAN style="FONT-FAMILY: 宋体">而言</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序执行前</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不知将来有哪些课程名称可能被当成</SPAN><SPAN lang=EN-US> Number[ ] 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的下标</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">提供了一个指令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">藉由该指令</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">会自动找寻数组中使用过的所有下标</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US> Number[ ] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为例</SPAN><SPAN lang=EN-US>, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将会找到</SPAN><SPAN lang=EN-US> "O.S.", "Arch.",... 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">使用该指令时</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">须指定所要找寻的数组</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">及一个变量</SPAN><SPAN lang=EN-US>. 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">会使用该的变量来记录从数组中找到的每一个下标</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>for(course in Number){....} </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">指定用</SPAN><SPAN lang=EN-US> 
course </SPAN><SPAN style="FONT-FAMILY: 宋体">来记录</SPAN><SPAN lang=EN-US> awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">从</SPAN><SPAN lang=EN-US>Number[ ] 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中所找到的下标</SPAN><SPAN lang=EN-US>. 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">每找到一个下标时</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">就用</SPAN><SPAN 
lang=EN-US>course</SPAN><SPAN style="FONT-FAMILY: 宋体">记录该下标之值且执行</SPAN><SPAN 
lang=EN-US>{....}</SPAN><SPAN style="FONT-FAMILY: 宋体">中之指令</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">藉由这个方式便可取出数组中储存的信息</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">详见下例</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> : ] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">统计各科修课人数</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">并印出结果</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">建立如下程序</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">并取名为</SPAN><SPAN lang=EN-US> 
course.awk: </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ for( i=2; i &lt;= NF; i++) Number[$i]++ } 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>END{for(course in Number) printf("%10s %d\n", 
course, Number[course] )} </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行下列命令</SPAN><SPAN lang=EN-US> 
: </SPAN></P>
<P class=a8><SPAN lang=EN-US>$awk -f course.awk reg.dat </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行结果如下</SPAN><SPAN lang=EN-US> 
: </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp; Graphics 2 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; O.S. 2 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp; Discrete 3 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A.I. 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D.S. 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp; Arch. 2 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;Algorithm 2 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说</SPAN> <SPAN style="FONT-FAMILY: 宋体">明</SPAN><SPAN 
lang=EN-US> : ] </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">这程序包含二个</SPAN><SPAN 
lang=EN-US>Pattern { Actions }</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ for( i=2; i &lt;= NF; i++) Number[$i]++ } 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>END{for(course in Number) printf("%10s %d\n", 
course, Number[course] )} </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">第一个</SPAN><SPAN 
lang=EN-US>Pattern { Actions }</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令中省略了</SPAN><SPAN lang=EN-US>Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">部分</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故随着</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">每笔数据行的读入其</SPAN><SPAN 
lang=EN-US>Actions</SPAN><SPAN style="FONT-FAMILY: 宋体">部分将逐次无条件被执行</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">以</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">读入第一笔资料</SPAN><SPAN 
lang=EN-US> " Mary O.S. Arch. Discrete" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为例</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">因为该笔数据</SPAN><SPAN lang=EN-US> NF = 4(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">有</SPAN><SPAN lang=EN-US>4</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个字段</SPAN><SPAN lang=EN-US>), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故该</SPAN><SPAN lang=EN-US> Action </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US>for Loop</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>i = 2,3,4. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>i $i </SPAN><SPAN 
style="FONT-FAMILY: 宋体">最初</SPAN><SPAN lang=EN-US> Number[$i] Number[$i]++ 
</SPAN><SPAN style="FONT-FAMILY: 宋体">之后</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>i=2</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US> $i="O.S." 
Number["O.S."]</SPAN><SPAN style="FONT-FAMILY: 宋体">的值从默认的</SPAN><SPAN 
lang=EN-US>0,</SPAN><SPAN style="FONT-FAMILY: 宋体">变成了</SPAN><SPAN lang=EN-US>1 
;</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>i=3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US> $i="Arch." 
Number["Arch."]</SPAN><SPAN style="FONT-FAMILY: 宋体">的值从默认的</SPAN><SPAN 
lang=EN-US>0,</SPAN><SPAN style="FONT-FAMILY: 宋体">变成了</SPAN><SPAN lang=EN-US>1 
;</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">同理</SPAN><SPAN 
lang=EN-US>,i=4</SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US> 
$i="Discrete" Number["Discrete"]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的值从默认的</SPAN><SPAN lang=EN-US>0,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">变成了</SPAN><SPAN lang=EN-US>1 ;</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">第二个</SPAN><SPAN lang=EN-US> 
Pattern { Actions }</SPAN><SPAN style="FONT-FAMILY: 宋体">指令中</SPAN><SPAN 
lang=EN-US>END </SPAN><SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">之保留字</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> Pattern 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的一种</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>END </SPAN><SPAN 
style="FONT-FAMILY: 宋体">成立</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">其值为</SPAN><SPAN lang=EN-US>true)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的条件是</SPAN><SPAN lang=EN-US>: "awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">处理完所有数据</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">即将离开程序时</SPAN><SPAN lang=EN-US>. "</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">平常读入数据行时</SPAN><SPAN 
lang=EN-US>, END</SPAN><SPAN style="FONT-FAMILY: 宋体">并不成立</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">故其后的</SPAN><SPAN 
lang=EN-US>Actions </SPAN><SPAN style="FONT-FAMILY: 宋体">并不被执行</SPAN><SPAN 
lang=EN-US>; </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">唯有当</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">读完所有数据时</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">该</SPAN><SPAN 
lang=EN-US>Actions</SPAN><SPAN style="FONT-FAMILY: 宋体">才会被执行</SPAN><SPAN 
lang=EN-US> ( </SPAN><SPAN style="FONT-FAMILY: 宋体">注意</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">不管数据行有多少笔</SPAN><SPAN lang=EN-US>, 
END</SPAN><SPAN style="FONT-FAMILY: 宋体">仅在最后才成立</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">故该</SPAN><SPAN 
lang=EN-US>Actions</SPAN><SPAN style="FONT-FAMILY: 宋体">仅被执行一次</SPAN><SPAN 
lang=EN-US>.) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>BEGIN </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> END </SPAN><SPAN 
style="FONT-FAMILY: 宋体">有点类似</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中另一个保留的</SPAN><SPAN lang=EN-US>Pattern. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">唯一不同的是</SPAN><SPAN lang=EN-US>: 
"</SPAN><SPAN style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US> BEGIN 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> Pattern 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US> Actions 
</SPAN><SPAN style="FONT-FAMILY: 宋体">于程序一开始执行时</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">被执行一次</SPAN><SPAN lang=EN-US>." </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>NF </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的内建变量</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以表示</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">正处理的数据行中</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所包含的字段个数</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中若含有以</SPAN><SPAN lang=EN-US> $ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">开头的自定变量</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">都将以如下方式解释</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US> i= 2 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为例</SPAN><SPAN lang=EN-US>, $i = $2 
</SPAN><SPAN style="FONT-FAMILY: 宋体">表第二个字段数据</SPAN><SPAN lang=EN-US>. ( 
</SPAN><SPAN style="FONT-FAMILY: 宋体">实际上</SPAN><SPAN lang=EN-US>, $ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">在</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中为一运算符</SPAN><SPAN lang=EN-US>(Operator), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以取得字段数据</SPAN><SPAN lang=EN-US>.) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>6.<SPAN style="FONT: 7pt 'Times New Roman'"> 
</SPAN></SPAN><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">程序中使用</SPAN><SPAN lang=EN-US> Shell 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">命令</SPAN><SPAN lang=EN-US> 
</SPAN></H1>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中允许呼叫</SPAN><SPAN lang=EN-US>Shell</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并提供管道解决</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">与系统间数据传递的问题</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所以</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">很容易使用系统资源</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">读者可利用这个特点来编写某些适用的系统工具</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> : ] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">写一个</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序来打印出线上人数</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">将下列程序建文件</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">命名为</SPAN><SPAN lang=EN-US> 
count.awk </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>while ( "who" | getline ) n++ </SPAN></P>
<P class=a8><SPAN lang=EN-US>print n </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">并执行下列命令</SPAN><SPAN lang=EN-US> 
: </SPAN></P>
<P class=a8><SPAN lang=EN-US>awk -f count.awk </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行结果将会印出目前在线人数</SPAN><SPAN 
lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说</SPAN> <SPAN style="FONT-FAMILY: 宋体">明</SPAN><SPAN 
lang=EN-US> : ]</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序并不一定要处理数据文件</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以本例而言</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">仅输入程序文件</SPAN><SPAN lang=EN-US>count.awk, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">未输入任何数据文件</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>BEGIN </SPAN><SPAN 
style="FONT-FAMILY: 宋体">和</SPAN><SPAN lang=EN-US> END </SPAN><SPAN 
style="FONT-FAMILY: 宋体">同为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中的一种</SPAN><SPAN lang=EN-US> Pattern. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US> BEGIN </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> Pattern</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US>Actions ,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">只有在</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">开始执行程序</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">尚未开启任何输入文件前</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">被执行一次</SPAN><SPAN lang=EN-US>.(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">注意</SPAN><SPAN lang=EN-US>: </SPAN><SPAN 
style="FONT-FAMILY: 宋体">只被执行一次</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>"|" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中表示管道的符号</SPAN><SPAN lang=EN-US>. awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">把</SPAN><SPAN lang=EN-US> | </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之前的字符串</SPAN><SPAN lang=EN-US>"who"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">当成</SPAN><SPAN lang=EN-US>Shell</SPAN><SPAN 
style="FONT-FAMILY: 宋体">上的命令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并将该命令送往</SPAN><SPAN lang=EN-US>Shell</SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行的结果</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">原先应于屏幕印出者</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">则藉由</SPAN><SPAN lang=EN-US>pipe</SPAN><SPAN 
style="FONT-FAMILY: 宋体">送进</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>getline</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所提供的输入指令</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">其语法如下</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<TABLE class=MsoNormalTable style="MARGIN-LEFT: 6pt; BORDER-COLLAPSE: collapse" 
cellSpacing=0 cellPadding=0 border=0>
  <TBODY>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: black 1pt solid; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 113.35pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=151>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">语法</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: black 1pt solid; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 110pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=147>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">由何处读取数据</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: black 1pt solid; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 250pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=333>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">数据读入后置于</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 113.35pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=151>
      <P class=MsoNormal><SPAN lang=EN-US>getline var &lt; file</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 110pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=147>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">所指定的</SPAN><SPAN 
      lang=EN-US> file</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 250pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=333>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">变量</SPAN><SPAN 
      lang=EN-US> var(var</SPAN><SPAN style="FONT-FAMILY: 宋体">省略时</SPAN><SPAN 
      lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">表示置于</SPAN><SPAN 
      lang=EN-US>$0)</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 113.35pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=151>
      <P class=MsoNormal><SPAN lang=EN-US>getline var</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 110pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=147>
      <P class=MsoNormal><SPAN lang=EN-US>pipe </SPAN><SPAN 
      style="FONT-FAMILY: 宋体">变量</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 250pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=333>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">变量</SPAN><SPAN 
      lang=EN-US> var(var</SPAN><SPAN style="FONT-FAMILY: 宋体">省略时</SPAN><SPAN 
      lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">表示置于</SPAN><SPAN 
      lang=EN-US>$0) </SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 113.35pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=151>
      <P class=MsoNormal><SPAN lang=EN-US>getline var</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 110pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=147>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">见</SPAN> <SPAN 
      style="FONT-FAMILY: 宋体">注一</SPAN><SPAN lang=EN-US> </SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 250pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=333>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">变量</SPAN><SPAN 
      lang=EN-US> var(var</SPAN><SPAN style="FONT-FAMILY: 宋体">省略时</SPAN><SPAN 
      lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">表示置于</SPAN><SPAN 
      lang=EN-US>$0) </SPAN></P></TD></TR></TBODY></TABLE>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">注一</SPAN><SPAN lang=EN-US> : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> Pattern 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> BEGIN 
</SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> END </SPAN><SPAN 
style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, getline </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将由</SPAN><SPAN lang=EN-US> stdin </SPAN><SPAN 
style="FONT-FAMILY: 宋体">读取数据</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">否则由</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">正处理的数据文件上读取数据</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>getline </SPAN><SPAN 
style="FONT-FAMILY: 宋体">一次读取一行数据</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若读取成功则</SPAN><SPAN lang=EN-US>return 1, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若读取失败则</SPAN><SPAN lang=EN-US>return -1, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若遇到文件结束</SPAN><SPAN lang=EN-US>(EOF), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US>return 0; </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本程序使用</SPAN><SPAN lang=EN-US> 
getline </SPAN><SPAN style="FONT-FAMILY: 宋体">所</SPAN><SPAN lang=EN-US> return 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的数据来做为</SPAN><SPAN lang=EN-US> while 
</SPAN><SPAN style="FONT-FAMILY: 宋体">判断循环停止的条件</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">某些</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">版本较旧</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">并不容许使用者改变</SPAN><SPAN 
lang=EN-US> $0 </SPAN><SPAN style="FONT-FAMILY: 宋体">之值</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">这种版的</SPAN><SPAN lang=EN-US> awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">执行本程序时会产生</SPAN><SPAN lang=EN-US> Error, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">读者可于</SPAN><SPAN lang=EN-US> getline 
</SPAN><SPAN style="FONT-FAMILY: 宋体">之后置上一个变量</SPAN><SPAN lang=EN-US> 
(</SPAN><SPAN style="FONT-FAMILY: 宋体">如此</SPAN><SPAN lang=EN-US>, getline 
</SPAN><SPAN style="FONT-FAMILY: 宋体">读进来的数据便不会被置于</SPAN><SPAN lang=EN-US> $0 ), 
</SPAN><SPAN style="FONT-FAMILY: 宋体">或直接改用</SPAN><SPAN 
lang=EN-US>gawk</SPAN><SPAN style="FONT-FAMILY: 宋体">便可解决</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>7.<SPAN style="FONT: 7pt 'Times New Roman'"> 
</SPAN></SPAN><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">程序的应用实例</SPAN><SPAN lang=EN-US> </SPAN></H1>
<P class=MsoNormal><SPAN 
style="FONT-FAMILY: 宋体">本节将示范一个统计上班到达时间及迟到次数的程序</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">这程序每日被执行时将读入二个文件</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">员工当日到班时间的数据文件</SPAN><SPAN 
lang=EN-US> ( </SPAN><SPAN style="FONT-FAMILY: 宋体">如下列之</SPAN><SPAN lang=EN-US> 
arr.dat ) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">存放员工当月迟到累计次数的文件</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN 
style="FONT-FAMILY: 宋体">当程序执行执完毕后将更新第二个文件的数据</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">迟到次数</SPAN><SPAN lang=EN-US>), 
</SPAN><SPAN style="FONT-FAMILY: 宋体">并打印当日的报表</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">这程序将分成下列数小节逐步完成</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">其大纲如下</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><B><SPAN lang=EN-US>[7.1] </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">在到班资料文件</SPAN> <SPAN lang=EN-US>arr.dat 
</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">之前增加一行抬头</SPAN><SPAN lang=EN-US> 
</SPAN></B></P>
<P class=MsoNormal><SPAN lang=EN-US>"ID Number Arrvial Time", </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并产生报表输出到文件</SPAN><SPAN lang=EN-US>today_rpt1 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>&lt; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">思考</SPAN><SPAN lang=EN-US>: </SPAN><SPAN 
style="FONT-FAMILY: 宋体">在</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中如何将数据输出到文件</SPAN><SPAN lang=EN-US> &gt; </SPAN></P>
<P class=MsoNormal><B><SPAN lang=EN-US>[7.2]</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">将</SPAN> <SPAN lang=EN-US>today_rpt1 </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">上的数据按员工代号排序</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">并加注执行当日日期</SPAN><SPAN lang=EN-US>; </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">产生文件</SPAN> <SPAN lang=EN-US>today_rpt2 </SPAN></B></P>
<P class=MsoNormal><SPAN lang=EN-US>&lt;</SPAN><SPAN 
style="FONT-FAMILY: 宋体">思考</SPAN><SPAN lang=EN-US> awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中如何运用系统资源及</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>Pipe</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之特性</SPAN><SPAN lang=EN-US> &gt; </SPAN></P>
<P class=MsoNormal><B><SPAN lang=EN-US>[7.3] </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">将</SPAN><SPAN lang=EN-US>awk</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">程序包含在一个</SPAN><SPAN lang=EN-US>shell 
script</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">文件中</SPAN></B></P>
<P class=MsoNormal><B><SPAN lang=EN-US>[7.4] </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">于</SPAN> <SPAN lang=EN-US>today_rpt2 </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">每日报表上</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">迟到者之前加上</SPAN><SPAN lang=EN-US>"*", </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">并加注当日平均到班时间</SPAN><SPAN lang=EN-US>;</SPAN></B></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">产生文件</SPAN><SPAN lang=EN-US> 
today_rpt3 </SPAN></P>
<P class=MsoNormal><B><SPAN lang=EN-US>[7.5] </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">从文件中读取当月迟到次数</SPAN><SPAN lang=EN-US>, 
</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">并根据当日出勤状况更新迟到累计数</SPAN><SPAN 
lang=EN-US>. </SPAN></B></P>
<P class=MsoNormal><SPAN lang=EN-US>&lt;</SPAN><SPAN 
style="FONT-FAMILY: 宋体">思考</SPAN> <SPAN style="FONT-FAMILY: 宋体">使用者在</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">中如何读取文件数据</SPAN><SPAN 
lang=EN-US> &gt; </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">某公司其员工到勤时间档如下</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">取名为</SPAN><SPAN lang=EN-US> 
arr.dat. </SPAN><SPAN style="FONT-FAMILY: 宋体">文件中第一栏为员工代号</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">第二栏为到达时间</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">本范例中</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">将使用该文件为数据文件</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>1034 7:26 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1025 7:27 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1101 7:32 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1006 7:45 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1012 7:46 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1028 7:49 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1051 7:51 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1029 7:57 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1042 7:59 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1008 8:01 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1052 8:05 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1005 8:12 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">重定向输出到文件</SPAN><SPAN lang=EN-US> </SPAN></H2>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中并未提供如</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中之</SPAN><SPAN lang=EN-US>fopen() </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">也未有</SPAN><SPAN lang=EN-US>fprintf() </SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件输出这样的指令</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">但</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中任何输出函数之后皆可借助使用与</SPAN><SPAN lang=EN-US>UNIX 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中类似的</SPAN><SPAN lang=EN-US> I/O 
</SPAN><SPAN style="FONT-FAMILY: 宋体">重定向符</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将输出的数据重定向到指定的文件</SPAN><SPAN lang=EN-US>; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其符号仍为</SPAN><SPAN lang=EN-US> &gt; (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">输出到一个新产生的文件</SPAN><SPAN lang=EN-US>) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> &gt;&gt; ( </SPAN><SPAN 
style="FONT-FAMILY: 宋体">添加输出的数据到文件末尾</SPAN><SPAN lang=EN-US> ). </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[</SPAN><SPAN 
style="FONT-FAMILY: 宋体">例</SPAN><SPAN lang=EN-US> :]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">在到班数据文件</SPAN><SPAN lang=EN-US> arr.dat </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之前增加一行抬头如下</SPAN><SPAN lang=EN-US>: </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>"ID Number Arrival Time", </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并产生报表输出到文件</SPAN><SPAN lang=EN-US> 
today_rpt1</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">建立如下文件并取名为</SPAN><SPAN 
lang=EN-US>reformat1.awk </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { print " ID Number Arrival Time" &gt; 
"today_rpt1" </SPAN></P>
<P class=a8><SPAN lang=EN-US>print "===========================" &gt; 
"today_rpt1" </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ printf(" %s %s\n", $1,$2 ) &gt; "today_rpt1" } 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$awk -f reformat1.awk arr.dat </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行后将产生文件</SPAN><SPAN 
lang=EN-US> today_rpt1, </SPAN><SPAN style="FONT-FAMILY: 宋体">其内容如下</SPAN><SPAN 
lang=EN-US> : </SPAN></P>
<P class=a8><SPAN lang=EN-US>ID Number Arrival Time </SPAN></P>
<P class=a8><SPAN lang=EN-US>============================ </SPAN></P>
<P class=a8><SPAN lang=EN-US>1034 7:26 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1025 7:27 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1101 7:32 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1006 7:45 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1012 7:46 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1028 7:49 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1051 7:51 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1029 7:57 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1042 7:59 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1008 8:01 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1052 8:05 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1005 8:12 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说</SPAN> <SPAN style="FONT-FAMILY: 宋体">明</SPAN><SPAN 
lang=EN-US> :&nbsp; ]</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件名称</SPAN><SPAN lang=EN-US> today_rpt1 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的前后须以</SPAN><SPAN lang=EN-US>" (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">双引号</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">括住</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示</SPAN><SPAN lang=EN-US> today_rpt1 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为一字符串常量</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若未以</SPAN><SPAN lang=EN-US>"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">括住</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US> today_rpt1 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将被</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">解释为一个变量名称</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">在</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">中任何变量使用之前</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">并不须事先声明</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">其初始值为空字符串</SPAN><SPAN 
lang=EN-US>(Null string) </SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN 
lang=EN-US> 0.</SPAN><SPAN style="FONT-FAMILY: 宋体">因此程序中若未以</SPAN><SPAN 
lang=EN-US> " </SPAN><SPAN style="FONT-FAMILY: 宋体">将</SPAN><SPAN lang=EN-US> 
today_rpt1 </SPAN><SPAN style="FONT-FAMILY: 宋体">括住</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US> today_rpt1 
</SPAN><SPAN style="FONT-FAMILY: 宋体">将是一变量</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其值将是空字符串</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这会在执行时造成错误</SPAN><SPAN lang=EN-US>(Unix </SPAN><SPAN 
style="FONT-FAMILY: 宋体">无法帮您开启一个以空字符串为文件名的文件</SPAN><SPAN lang=EN-US>). 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">因此在编辑</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序时</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">须格外留心</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">因为若敲错变量名称</SPAN><SPAN lang=EN-US>,awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">在编译程序时会认为是一新的变量</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不会察觉</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">因此往往会造成运行时错误</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>BEGIN </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的保留字</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是</SPAN><SPAN lang=EN-US> Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的一种</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US> BEGIN 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> Pattern 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US> Actions 
</SPAN><SPAN style="FONT-FAMILY: 宋体">于</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序刚被执行尚未读取数据文件时被执行一次</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">此后便不再被执行</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">读者或许觉得本程序中的</SPAN><SPAN 
lang=EN-US>I/O</SPAN><SPAN style="FONT-FAMILY: 宋体">重定向符号应使用</SPAN><SPAN 
lang=EN-US> " &gt;&gt;" (append)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">而非</SPAN><SPAN lang=EN-US> " &gt;". </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本程序中若使用</SPAN><SPAN lang=EN-US> 
"&gt;" </SPAN><SPAN style="FONT-FAMILY: 宋体">将数据重导到</SPAN><SPAN lang=EN-US> 
today_rpt1, awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">第一次执行该指令时会产生一个新档</SPAN><SPAN lang=EN-US> today_rpt1, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">其后再执行该指令时则把数据追加到</SPAN><SPAN 
lang=EN-US>today_rpt1</SPAN><SPAN style="FONT-FAMILY: 宋体">文件末</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">并非每执行一次就重开一个新文件</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">若采用</SPAN><SPAN 
lang=EN-US>"&gt;&gt;"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">其差异仅在第一次执行该指令时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若已存在</SPAN><SPAN lang=EN-US>today_rpt1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将直接把数据</SPAN><SPAN lang=EN-US>append</SPAN><SPAN 
style="FONT-FAMILY: 宋体">在原文件之末尾</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这一点</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US>UNIX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中的用法不同</SPAN><SPAN lang=EN-US>. </SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">中如何利用系统资源</SPAN><SPAN lang=EN-US> 
</SPAN></H2>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中很容易使用系统资源</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这包括在程序中途调用</SPAN><SPAN lang=EN-US> Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令来处理程序中的部分数据</SPAN><SPAN lang=EN-US>; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或在调用</SPAN><SPAN lang=EN-US> Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令后将其产生的结果交回</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">不需将结果暂存于某个文件</SPAN><SPAN lang=EN-US>). </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这一过程是借助</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所提供的管道</SPAN><SPAN lang=EN-US> (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">虽然有些类似</SPAN><SPAN lang=EN-US> Unix </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中的管道</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">但特性有些不同</SPAN><SPAN lang=EN-US>),</SPAN><SPAN 
style="FONT-FAMILY: 宋体">及一个从</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中呼叫</SPAN><SPAN lang=EN-US> Unix </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US> Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令的语法来达成的</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[</SPAN><SPAN 
style="FONT-FAMILY: 宋体">例</SPAN><SPAN lang=EN-US> :] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">承上题</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将数据按员工</SPAN><SPAN lang=EN-US>ID</SPAN><SPAN 
style="FONT-FAMILY: 宋体">排序后再输出到文件</SPAN><SPAN lang=EN-US> today_rpt2 , 
</SPAN><SPAN style="FONT-FAMILY: 宋体">并于表头附加执行时的日期</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">分</SPAN> <SPAN style="FONT-FAMILY: 宋体">析</SPAN><SPAN 
lang=EN-US> : ]</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">提供与</SPAN><SPAN lang=EN-US> UNIX </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用法近似的</SPAN><SPAN lang=EN-US> pipe, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其记号亦为</SPAN><SPAN lang=EN-US> "|". </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其用法及含意如下</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中可接受下列两种语法</SPAN><SPAN lang=EN-US>: </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[a. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语法</SPAN><SPAN lang=EN-US>] awk output </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> | "Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">接受的命令</SPAN><SPAN lang=EN-US>" </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>( </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US> : print $1,$2 | "sort -k 1" ) 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>[b. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语法</SPAN><SPAN lang=EN-US>] "Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">接受的命令</SPAN><SPAN lang=EN-US>" | awk input </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>( </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US> : "ls " | getline) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">注</SPAN><SPAN lang=EN-US> : awk 
input </SPAN><SPAN style="FONT-FAMILY: 宋体">指令只有</SPAN><SPAN lang=EN-US> getline 
</SPAN><SPAN style="FONT-FAMILY: 宋体">一个</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk output </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令有</SPAN><SPAN lang=EN-US> print, printf() </SPAN><SPAN 
style="FONT-FAMILY: 宋体">二个</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">在</SPAN><SPAN lang=EN-US>a 
</SPAN><SPAN style="FONT-FAMILY: 宋体">语法中</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">所输出的数据将转送往</SPAN><SPAN lang=EN-US> Shell 
, </SPAN><SPAN style="FONT-FAMILY: 宋体">由</SPAN><SPAN lang=EN-US> Shell 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的命令进行处理</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">以上例而言</SPAN><SPAN lang=EN-US>, 
print </SPAN><SPAN style="FONT-FAMILY: 宋体">所输出的数据将经由</SPAN><SPAN lang=EN-US> 
Shell </SPAN><SPAN style="FONT-FAMILY: 宋体">命令</SPAN><SPAN lang=EN-US> "sort -k 
1" </SPAN><SPAN style="FONT-FAMILY: 宋体">排序后再送往屏幕</SPAN><SPAN 
lang=EN-US>(stdout). </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">上列</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序中</SPAN><SPAN lang=EN-US>, 
"print$1, $2" </SPAN><SPAN style="FONT-FAMILY: 宋体">可能反复执行很多次</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">其输出的结果将先暂存于</SPAN><SPAN 
lang=EN-US> pipe </SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">等到该程序结束时</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">才会一并进行</SPAN><SPAN lang=EN-US> 
"sort -k 1". </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">须注意二点</SPAN><SPAN lang=EN-US> : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">不论</SPAN><SPAN lang=EN-US> print $1, $2 
</SPAN><SPAN style="FONT-FAMILY: 宋体">被执行几次</SPAN><SPAN lang=EN-US>, "sort -k 1" 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的执行时间是</SPAN><SPAN lang=EN-US> 
"awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序结束时</SPAN><SPAN lang=EN-US>", 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>"sort -k 1" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的执行次数是</SPAN><SPAN lang=EN-US> "</SPAN><SPAN 
style="FONT-FAMILY: 宋体">一次</SPAN><SPAN lang=EN-US>". </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">在</SPAN><SPAN lang=EN-US> b 
</SPAN><SPAN style="FONT-FAMILY: 宋体">语法中</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">将先调用</SPAN><SPAN lang=EN-US> Shell 
</SPAN><SPAN style="FONT-FAMILY: 宋体">命令</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其执行结果将通过</SPAN><SPAN lang=EN-US> pipe </SPAN><SPAN 
style="FONT-FAMILY: 宋体">送入</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">以上例而言</SPAN><SPAN lang=EN-US>, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">先让</SPAN><SPAN lang=EN-US> Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> "ls",Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行后将结果存于</SPAN><SPAN lang=EN-US> pipe, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> getline</SPAN><SPAN 
style="FONT-FAMILY: 宋体">再从</SPAN><SPAN lang=EN-US> pipe </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中读取数据</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">使用本语法时应留心</SPAN><SPAN 
lang=EN-US>: </SPAN><SPAN style="FONT-FAMILY: 宋体">以上例而言</SPAN><SPAN 
lang=EN-US>,awk "</SPAN><SPAN style="FONT-FAMILY: 宋体">立刻</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">调用</SPAN><SPAN lang=EN-US> 
Shell </SPAN><SPAN style="FONT-FAMILY: 宋体">来执行</SPAN><SPAN lang=EN-US> "ls", 
</SPAN><SPAN style="FONT-FAMILY: 宋体">执行次数是一次</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>getline </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则可能执行多次</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US>pipe</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中存在多行数据</SPAN><SPAN lang=EN-US>). </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">除上列</SPAN><SPAN lang=EN-US> a, 
b </SPAN><SPAN style="FONT-FAMILY: 宋体">二中语法外</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序中其它地方如出现像</SPAN><SPAN lang=EN-US> 
"date", "cls", "ls"... </SPAN><SPAN style="FONT-FAMILY: 宋体">这样的字符串</SPAN><SPAN 
lang=EN-US>, awk</SPAN><SPAN style="FONT-FAMILY: 宋体">只把它当成一般字符串处理</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">建立如下文件并取名为</SPAN><SPAN 
lang=EN-US> reformat2.awk </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US> reformat2.awk </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这程序用以练习</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中的</SPAN><SPAN lang=EN-US>pipe </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>"date" | getline # Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> "date". getline </SPAN><SPAN 
style="FONT-FAMILY: 宋体">取得结果并以</SPAN><SPAN lang=EN-US>$0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">记录</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>print " Today is " , $2, $3 &gt;"today_rpt2" 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>print "=========================" &gt; "today_rpt2" 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>print " ID Number Arrival Time" &gt;"today_rpt2" 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>close( "today_rpt2" ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>{printf( "%s %s\n", $1 ,$2 ) | "sort -k 1 
&gt;&gt;today_rpt2"} </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行如下命令</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk -f reformat2.awk arr.dat </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行后</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">系统会自动将</SPAN><SPAN lang=EN-US> sort 
</SPAN><SPAN style="FONT-FAMILY: 宋体">后的数据追加</SPAN><SPAN lang=EN-US>( Append; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">因为使用</SPAN><SPAN lang=EN-US> " &gt;&gt;") 
</SPAN><SPAN style="FONT-FAMILY: 宋体">到文件</SPAN><SPAN lang=EN-US> 
today_rpt2</SPAN><SPAN style="FONT-FAMILY: 宋体">末端</SPAN><SPAN lang=EN-US>. 
today_rpt2 </SPAN><SPAN style="FONT-FAMILY: 宋体">内容如下</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;Today is&nbsp; 09<SPAN 
style="FONT-FAMILY: 宋体">月</SPAN> 21</SPAN><SPAN 
style="FONT-FAMILY: 宋体">日</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>========================= </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;ID Number Arrival Time </SPAN></P>
<P class=a8><SPAN lang=EN-US>1005 8:12 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1006 7:45 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1008 8:01 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1012 7:46 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1025 7:27 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1028 7:49 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1029 7:57 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1034 7:26 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1042 7:59 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1051 7:51 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1052 8:05 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1101 7:32 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说</SPAN> <SPAN style="FONT-FAMILY: 宋体">明</SPAN><SPAN 
lang=EN-US> : ]</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序由三个主要部分构成</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ i.] Pattern { Action} </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ ii.] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">函数主体</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : function double( x ){ 
return 2*x } (</SPAN><SPAN style="FONT-FAMILY: 宋体">参考第</SPAN><SPAN 
lang=EN-US>11</SPAN><SPAN style="FONT-FAMILY: 宋体">节</SPAN><SPAN lang=EN-US> 
Recursive Program ) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ iii.] Comment ( </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US> # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">开头识别之</SPAN><SPAN lang=EN-US> ) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的输入指令</SPAN><SPAN lang=EN-US> getline, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">每次读取一列数据</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US>getline</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之后</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">未接任何变量</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">则所读入之资料将以</SPAN><SPAN lang=EN-US>$0 
</SPAN><SPAN style="FONT-FAMILY: 宋体">记录</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">否则以所指定的变量储存之</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以本例而言</SPAN><SPAN lang=EN-US>] : </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> 
"date" | getline </SPAN><SPAN style="FONT-FAMILY: 宋体">后</SPAN><SPAN lang=EN-US>, 
$0 </SPAN><SPAN style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> "2007<SPAN 
style="FONT-FAMILY: 宋体">年</SPAN> 09<SPAN style="FONT-FAMILY: 宋体">月</SPAN> 
21</SPAN><SPAN style="FONT-FAMILY: 宋体">日</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">星期五</SPAN><SPAN lang=EN-US> 14:28:02 CST",</SPAN><SPAN 
style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> $0 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值被更新时</SPAN><SPAN lang=EN-US>, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将自动更新相关的内建变量</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US>: $1,$2,..,NF.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">故</SPAN><SPAN lang=EN-US> $2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值将为</SPAN><SPAN lang=EN-US>"09</SPAN><SPAN 
style="FONT-FAMILY: 宋体">月</SPAN><SPAN lang=EN-US>", $3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值将为</SPAN><SPAN lang=EN-US>"21</SPAN><SPAN 
style="FONT-FAMILY: 宋体">日</SPAN><SPAN lang=EN-US>". </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">有少数旧版的</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">不允许即使用者自行更新</SPAN><SPAN 
lang=EN-US>(update)$0</SPAN><SPAN style="FONT-FAMILY: 宋体">的值</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">或者更新</SPAN><SPAN 
lang=EN-US>$0</SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">它不会自动更新</SPAN><SPAN lang=EN-US> 
$1,$2,..NF. </SPAN><SPAN style="FONT-FAMILY: 宋体">这情况下</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">可改用</SPAN><SPAN lang=EN-US>gawk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US>nawk. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">否则使用者也可自行以</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">字符串函数</SPAN><SPAN lang=EN-US>split()</SPAN><SPAN 
style="FONT-FAMILY: 宋体">来分隔</SPAN><SPAN lang=EN-US>$0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">上的数据</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本程序中</SPAN><SPAN lang=EN-US> 
printf() </SPAN><SPAN style="FONT-FAMILY: 宋体">指令会被执行</SPAN><SPAN 
lang=EN-US>12</SPAN><SPAN style="FONT-FAMILY: 宋体">次</SPAN><SPAN lang=EN-US>( 
</SPAN><SPAN style="FONT-FAMILY: 宋体">因为有</SPAN><SPAN 
lang=EN-US>arr.dat</SPAN><SPAN style="FONT-FAMILY: 宋体">中有</SPAN><SPAN 
lang=EN-US>12</SPAN><SPAN style="FONT-FAMILY: 宋体">行数据</SPAN><SPAN lang=EN-US>), 
</SPAN><SPAN style="FONT-FAMILY: 宋体">但读者不用担心数据被重复</SPAN><SPAN 
lang=EN-US>sort</SPAN><SPAN style="FONT-FAMILY: 宋体">了</SPAN><SPAN 
lang=EN-US>12</SPAN><SPAN style="FONT-FAMILY: 宋体">次</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">结束该程序时才会</SPAN><SPAN lang=EN-US> close </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这个</SPAN><SPAN lang=EN-US> pipe , </SPAN><SPAN 
style="FONT-FAMILY: 宋体">此时才将这</SPAN><SPAN lang=EN-US>12</SPAN><SPAN 
style="FONT-FAMILY: 宋体">行数据一次送往系统</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">并呼叫</SPAN><SPAN lang=EN-US> "sort -k 1 &gt;&gt; 
today_rpt2" </SPAN><SPAN style="FONT-FAMILY: 宋体">处理之</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">提供另一个调用</SPAN><SPAN lang=EN-US>Shell</SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令的方法</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">即使用</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">函数</SPAN><SPAN lang=EN-US>system("shell</SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令</SPAN><SPAN lang=EN-US>") </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>system("date &gt; date.dat") </SPAN></P>
<P class=a8><SPAN lang=EN-US>getline &lt; "date.dat"</SPAN></P>
<P class=a8><SPAN lang=EN-US>print "Today is ", $2, $3 </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>' </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">但使用</SPAN><SPAN lang=EN-US> 
system( "shell </SPAN><SPAN style="FONT-FAMILY: 宋体">命令</SPAN><SPAN lang=EN-US>" 
) </SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">无法直接将执行中的部分数据输出给</SPAN><SPAN 
lang=EN-US>Shell </SPAN><SPAN style="FONT-FAMILY: 宋体">命令</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">且</SPAN><SPAN lang=EN-US> 
Shell </SPAN><SPAN style="FONT-FAMILY: 宋体">命令执行的结果也无法直接输入到</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">执行</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">程序的几种方式</SPAN><SPAN lang=EN-US> </SPAN></H2>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本小节中描述如何将</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序直接写在</SPAN><SPAN 
lang=EN-US> shell script </SPAN><SPAN style="FONT-FAMILY: 宋体">之中</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">此后使用者执行</SPAN><SPAN 
lang=EN-US> awk </SPAN><SPAN style="FONT-FAMILY: 宋体">程序时</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">就不需要每次都键入</SPAN><SPAN 
lang=EN-US> " awk -f program datafile" .</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>script </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中还可包含其它</SPAN><SPAN lang=EN-US> Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如此更可增加执行过程的自动化</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">建立一个简单的</SPAN><SPAN lang=EN-US> 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US> mydump.awk, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">如下</SPAN><SPAN lang=EN-US>: </SPAN></P>
<P class=a8><SPAN lang=EN-US>{print} </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">这个程序执行时会把数据文件的内容</SPAN><SPAN 
lang=EN-US> print </SPAN><SPAN style="FONT-FAMILY: 宋体">到屏幕上</SPAN><SPAN 
lang=EN-US>( </SPAN><SPAN style="FONT-FAMILY: 宋体">与</SPAN><SPAN 
lang=EN-US>cat</SPAN><SPAN style="FONT-FAMILY: 宋体">功用类似</SPAN><SPAN lang=EN-US> 
). </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>print </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之后未接任何参数时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示</SPAN><SPAN lang=EN-US> "print $0". </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">若欲执行该</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">来印出文件</SPAN><SPAN lang=EN-US> today_rpt1 
</SPAN><SPAN style="FONT-FAMILY: 宋体">及</SPAN><SPAN lang=EN-US> today_rpt2 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的内容时</SPAN><SPAN lang=EN-US>, </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">必须于</SPAN><SPAN lang=EN-US> 
UNIX </SPAN><SPAN style="FONT-FAMILY: 宋体">的命令行上执行下列命令</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">方式一</SPAN><SPAN lang=EN-US> awk 
-f mydump.awk today_rpt1 today_rpt2 </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">方式二</SPAN><SPAN lang=EN-US> awk 
'{print}' today_rpt1 today_rpt2</SPAN><SPAN 
style="FONT-FAMILY: 宋体">第二种方式系将</SPAN><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序直接写在</SPAN><SPAN lang=EN-US> Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的命令行上</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这种方式仅适合较短的</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">方式三</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">建立如下之</SPAN><SPAN lang=EN-US> shell script, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并取名为</SPAN><SPAN lang=EN-US> mydisplay, </SPAN></P>
<P class=a8><SPAN lang=EN-US>#!/bin/sh </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">注意以下的</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> ' </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之间须有空白隔开</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>{print} </SPAN></P>
<P class=a8><SPAN lang=EN-US>' $* </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">注意以上的</SPAN><SPAN lang=EN-US> ' </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> $* </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之间须有空白隔开</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> 
mydisplay </SPAN><SPAN style="FONT-FAMILY: 宋体">之前</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">须先将它改成可执行的文件</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">此步骤往后不再赘述</SPAN><SPAN 
lang=EN-US>). </SPAN><SPAN style="FONT-FAMILY: 宋体">请执行如下命令</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=a8><SPAN lang=EN-US>$ chmod +x mydisplay </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">往后使用者就可直接把</SPAN><SPAN 
lang=EN-US> mydisplay </SPAN><SPAN style="FONT-FAMILY: 宋体">当成指令</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">来</SPAN><SPAN 
lang=EN-US>display</SPAN><SPAN style="FONT-FAMILY: 宋体">任何文件</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ ./mydisplay today_rpt1 today_rpt2 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说</SPAN> <SPAN style="FONT-FAMILY: 宋体">明</SPAN><SPAN 
lang=EN-US> : ]</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">在</SPAN><SPAN 
lang=EN-US>script</SPAN><SPAN style="FONT-FAMILY: 宋体">文件</SPAN><SPAN lang=EN-US> 
mydisplay </SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>"awk"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">与第一个</SPAN><SPAN lang=EN-US> '&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之间须有空格</SPAN><SPAN lang=EN-US>(Shell</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中并无</SPAN><SPAN lang=EN-US>" awk' "</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>). </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">第一个</SPAN><SPAN lang=EN-US> ' 
</SPAN><SPAN style="FONT-FAMILY: 宋体">用以通知</SPAN><SPAN lang=EN-US> Shell 
</SPAN><SPAN style="FONT-FAMILY: 宋体">其后为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">第二个</SPAN><SPAN lang=EN-US> ' 
</SPAN><SPAN style="FONT-FAMILY: 宋体">则表示</SPAN><SPAN lang=EN-US> awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">程序结束</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">故</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序中一律以</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">括住字符串或字符</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">而不使用</SPAN><SPAN lang=EN-US> ' 
, </SPAN><SPAN style="FONT-FAMILY: 宋体">以免</SPAN><SPAN 
lang=EN-US>Shell</SPAN><SPAN style="FONT-FAMILY: 宋体">混淆</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$* </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> shell script</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中的用法</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">它可用来代表命令行上</SPAN><SPAN lang=EN-US> 
"mydisplay</SPAN><SPAN style="FONT-FAMILY: 宋体">之后的所有参数</SPAN><SPAN lang=EN-US>". 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如执行</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ mydisplay today_rpt1 today_rpt2 </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">事实上</SPAN><SPAN lang=EN-US> 
Shell </SPAN><SPAN style="FONT-FAMILY: 宋体">已先把该指令转换成</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ print} </SPAN></P>
<P class=a8><SPAN lang=EN-US>' today_rpt1 today_rpt2 </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本例中</SPAN><SPAN lang=EN-US>, $* 
</SPAN><SPAN style="FONT-FAMILY: 宋体">用以代表</SPAN><SPAN lang=EN-US> "today_rpt1 
today_rpt2". </SPAN><SPAN style="FONT-FAMILY: 宋体">在</SPAN><SPAN 
lang=EN-US>Shell</SPAN><SPAN style="FONT-FAMILY: 宋体">的语法中</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">可用</SPAN><SPAN lang=EN-US> $1 
</SPAN><SPAN style="FONT-FAMILY: 宋体">代表第一个参数</SPAN><SPAN lang=EN-US>, $2 
</SPAN><SPAN style="FONT-FAMILY: 宋体">代表第二个参数</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">当不确定命令行上的参数个数时</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">可使用</SPAN><SPAN lang=EN-US> $* </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表之</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令行上可同时指定多个数据文件</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US>awk -f 
dump.awk today_rpt1 today_rpt2hf </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为例</SPAN><SPAN lang=EN-US>,awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">会先处理</SPAN><SPAN lang=EN-US>today_rpt1, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">再处理</SPAN><SPAN lang=EN-US> today_rpt2. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">此时若文件无法打开</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将造成错误</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
</SPAN><SPAN style="FONT-FAMILY: 宋体">不存在文件</SPAN><SPAN 
lang=EN-US>"file_no_exist", </SPAN><SPAN style="FONT-FAMILY: 宋体">则执行</SPAN><SPAN 
lang=EN-US> : </SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk -f dump.awk file_no_exit </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">将产生运行时错误</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">无法打开文件</SPAN><SPAN 
lang=EN-US>). </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">但某些</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US> 
"</SPAN><SPAN style="FONT-FAMILY: 宋体">仅</SPAN><SPAN lang=EN-US>" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">包含以</SPAN><SPAN lang=EN-US> BEGIN </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>Pattern</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的指令</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行这种</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序时</SPAN><SPAN lang=EN-US>, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不须开启任何数据文件</SPAN><SPAN lang=EN-US>.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">此时命令行上若指定一个不存在的数据文件</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不会产生</SPAN><SPAN lang=EN-US> "</SPAN><SPAN 
style="FONT-FAMILY: 宋体">无法打开文件</SPAN><SPAN lang=EN-US>"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的错误</SPAN><SPAN lang=EN-US>.(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">事实上</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">并未打开该文件</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如执行</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk 'BEGIN {print "Hello,World!!"} ' 
file_no_exist </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">该程序中仅包含以</SPAN><SPAN 
lang=EN-US> BEGIN </SPAN><SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> 
Pattern </SPAN><SPAN style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US> Pattern 
{actions}, awk </SPAN><SPAN style="FONT-FAMILY: 宋体">执行时并不会开启任何数据文件</SPAN><SPAN 
lang=EN-US>; </SPAN><SPAN style="FONT-FAMILY: 宋体">所以不会因不存在文件</SPAN><SPAN 
lang=EN-US>file_no_exit</SPAN><SPAN style="FONT-FAMILY: 宋体">而产生</SPAN><SPAN 
lang=EN-US> " </SPAN><SPAN style="FONT-FAMILY: 宋体">无法打开文件</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">的错误</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">会将</SPAN><SPAN lang=EN-US> Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令行上</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> -f </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序文件名</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之后的所有字符串</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">视为将输入</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">进行处理的数据文件文件名</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">若执行</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">的命令行上</SPAN><SPAN lang=EN-US> 
"</SPAN><SPAN style="FONT-FAMILY: 宋体">未指定任何数据文件文件名</SPAN><SPAN lang=EN-US>", 
</SPAN><SPAN style="FONT-FAMILY: 宋体">则将</SPAN><SPAN lang=EN-US>stdin</SPAN><SPAN 
style="FONT-FAMILY: 宋体">视为输入之数据来源</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">直到输入</SPAN><SPAN lang=EN-US>end of file( Ctrl-D 
)</SPAN><SPAN style="FONT-FAMILY: 宋体">为止</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">读者可以用下列程序自行测试</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">执行如下命令</SPAN><SPAN lang=EN-US> 
: </SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk -f mydump.awk&nbsp; #(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">未接任何数据文件文件名</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ ./mydisplay&nbsp; #(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">未接任何数据文件文件名</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">将会发现</SPAN><SPAN lang=EN-US>: 
</SPAN><SPAN style="FONT-FAMILY: 宋体">此后键入的任何数据将逐行复印一份于屏幕上</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">这情况不是机器当机</SPAN><SPAN 
lang=EN-US> ! </SPAN><SPAN style="FONT-FAMILY: 宋体">是因为</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序正处于执行中</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">它正按程序指示</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">将读取数据并重新</SPAN><SPAN 
lang=EN-US>dump</SPAN><SPAN style="FONT-FAMILY: 宋体">一次</SPAN><SPAN lang=EN-US>; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">只因执行时未指定数据文件文件名</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">故</SPAN><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">便以</SPAN><SPAN lang=EN-US>stdin(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">键盘上的输入</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为数据来源</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">读者可利用这个特点</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">设计可与</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">即时聊天的程序</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">改变</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">切割字段的方式</SPAN><SPAN lang=EN-US> &amp; 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">自定义函数</SPAN><SPAN lang=EN-US> 
</SPAN></H2>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">不仅能自动分割字段</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">也允许使用者改变其字段切割方式以适应各种格式之需要</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">使用者也可自定义函数</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">若有需要可将该函数单独写成一个文件</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">以供其它</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序调用</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> : ] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">承接</SPAN><SPAN lang=EN-US> 6.2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的例子</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若八点为上班时间</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">请加注</SPAN><SPAN lang=EN-US> "*"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">于迟到记录之前</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并计算平均上班时间</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">分</SPAN> <SPAN style="FONT-FAMILY: 宋体">析</SPAN><SPAN 
lang=EN-US>: ]</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">因八点整到达者</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">不为迟到</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">故仅以到达的小时数做判断是不够的</SPAN><SPAN lang=EN-US>; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">仍应参考到达时的分钟数</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US> "</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将到达时间转换成以分钟为单位</SPAN><SPAN lang=EN-US>", </SPAN><SPAN 
style="FONT-FAMILY: 宋体">不仅易于判断是否迟到</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">同时也易于计算到达平均时间</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">到达时间</SPAN><SPAN 
lang=EN-US>($2)</SPAN><SPAN style="FONT-FAMILY: 宋体">的格式为</SPAN><SPAN lang=EN-US> 
dd:dd </SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> d:dd; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">数字当中含有一个</SPAN><SPAN lang=EN-US> 
":".</SPAN><SPAN style="FONT-FAMILY: 宋体">但文本数字交杂的数据</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">无法直接做数学运算</SPAN><SPAN 
lang=EN-US>. (</SPAN><SPAN style="FONT-FAMILY: 宋体">注</SPAN><SPAN lang=EN-US>: 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">中字符串</SPAN><SPAN 
lang=EN-US>"26"</SPAN><SPAN style="FONT-FAMILY: 宋体">与数字</SPAN><SPAN 
lang=EN-US>26, </SPAN><SPAN style="FONT-FAMILY: 宋体">并无差异</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">可直接做字符串或数学运算</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">这是</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">重要特色之一</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">但</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">对文本数字交杂的字符串无法正确进行数学运算</SPAN><SPAN lang=EN-US>). 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">解决之方法</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[</SPAN><SPAN 
style="FONT-FAMILY: 宋体">方法一</SPAN><SPAN lang=EN-US>]</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">对到达时间</SPAN><SPAN 
lang=EN-US>($2) d:dd </SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN 
lang=EN-US> dd:dd </SPAN><SPAN style="FONT-FAMILY: 宋体">进行字符串运算</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">分别取出到达的小时数及分钟数</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">首先判断到达小时数为一位或两位字符</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">再调用函数分别截取分钟数及小时数</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">此解法需使用下列</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">字符串函数</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>length( </SPAN><SPAN 
style="FONT-FAMILY: 宋体">字符串</SPAN><SPAN lang=EN-US> ) : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">返回该字符串的长度</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>substr( </SPAN><SPAN 
style="FONT-FAMILY: 宋体">字符串</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">起始位置</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">长度</SPAN><SPAN lang=EN-US>) :</SPAN><SPAN 
style="FONT-FAMILY: 宋体">返回从起始位置起</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指定长度之子字符串</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若未指定长度</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则返回从起始位置到字符串末尾的子字符串</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">所以</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">小时数</SPAN><SPAN lang=EN-US> = 
substr( $2, 1, length($2) - 3 ) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">分钟数</SPAN><SPAN lang=EN-US> = 
substr( $2, length($2) - 2 ) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[</SPAN><SPAN 
style="FONT-FAMILY: 宋体">方法二</SPAN><SPAN lang=EN-US>] </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">改变输入列字段的切割方式</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">使</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">切割字段后分别将小时数及分钟数隔开于二个不同的字段</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">字段分隔字符</SPAN><SPAN lang=EN-US> 
FS (field seperator) </SPAN><SPAN style="FONT-FAMILY: 宋体">是</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">的内建变量</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">其默认值是空白及</SPAN><SPAN 
lang=EN-US>tab. awk</SPAN><SPAN style="FONT-FAMILY: 宋体">每次切割字段时都会先参考</SPAN><SPAN 
lang=EN-US>FS </SPAN><SPAN style="FONT-FAMILY: 宋体">的内容</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">若把</SPAN><SPAN lang=EN-US>":"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">也当成分隔字符</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">便能自动把小时数及分钟数分隔成不同的字段</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">故令</SPAN><SPAN lang=EN-US>FS = 
"[ \t:]+" (</SPAN><SPAN style="FONT-FAMILY: 宋体">注</SPAN><SPAN lang=EN-US>: [ 
\t:]+ </SPAN><SPAN style="FONT-FAMILY: 宋体">为一</SPAN><SPAN lang=EN-US>Regular 
Expression ) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>Regular Expression </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中使用中括号</SPAN><SPAN lang=EN-US> [ ... ] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示一个字符集合</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以表示任意一个位于两中括号间的字符</SPAN><SPAN lang=EN-US>.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">故可用</SPAN><SPAN lang=EN-US>"[ \t:]"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示</SPAN> <SPAN style="FONT-FAMILY: 宋体">一个</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">空白</SPAN><SPAN lang=EN-US> , tab </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> ":" </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>Regular Expression</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中使用</SPAN><SPAN lang=EN-US> "+" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">形容其前方的字符可出现一次</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">或一次以上</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">故</SPAN><SPAN lang=EN-US> "[ 
\t:]+" </SPAN><SPAN style="FONT-FAMILY: 宋体">表示由一个或多个</SPAN><SPAN lang=EN-US> 
"</SPAN><SPAN style="FONT-FAMILY: 宋体">空白</SPAN><SPAN lang=EN-US>, tab 
</SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> : " </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所组成的字符串</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">设定</SPAN><SPAN lang=EN-US> FS 
="[ \t:]+" </SPAN><SPAN style="FONT-FAMILY: 宋体">后</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">数据行如</SPAN><SPAN lang=EN-US>: "1034 7:26" 
</SPAN><SPAN style="FONT-FAMILY: 宋体">将被分割成</SPAN><SPAN lang=EN-US>3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个字段</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">第一栏</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">第二栏</SPAN> <SPAN style="FONT-FAMILY: 宋体">第三栏</SPAN><SPAN 
lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$1 $2 $3 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>1034 7 26 </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">明显地</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序中使用方法二比方法一更简洁方便</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">本例子中采用方法二</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">也借此示范改变字段切割方式的用途</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">编写</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序</SPAN><SPAN lang=EN-US> 
reformat3, </SPAN><SPAN style="FONT-FAMILY: 宋体">如下</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>#!/bin/sh </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>FS= "[ \t:]+" #</SPAN><SPAN 
style="FONT-FAMILY: 宋体">改变字段切割的方式</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>"date" | getline # Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> "date". getline </SPAN><SPAN 
style="FONT-FAMILY: 宋体">取得结果以</SPAN><SPAN lang=EN-US>$0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">记录</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>print " Today is " ,$2, $3 &gt; "today_rpt3" 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>print "========================="&gt;"today_rpt3" 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>print " ID Number Arrival Time" &gt; "today_rpt3" 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>close( "today_rpt3" ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>#</SPAN><SPAN 
style="FONT-FAMILY: 宋体">已更改字段切割方式</SPAN><SPAN lang=EN-US>, $2</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表到达小时数</SPAN><SPAN lang=EN-US>, $3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表分钟数</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>arrival = HM_to_M($2, $3) </SPAN></P>
<P class=a8><SPAN lang=EN-US>printf(" %s %s:%s %s\n", $1, $2, $3, arrival &gt; 
480 ? "*": " " ) | "sort -k 1 &gt;&gt; today_rpt3" </SPAN></P>
<P class=a8><SPAN lang=EN-US>total += arrival </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>END { </SPAN></P>
<P class=a8><SPAN lang=EN-US>close("today_rpt3") </SPAN></P>
<P class=a8><SPAN lang=EN-US>close("sort -k 1 &gt;&gt; today_rpt3") </SPAN></P>
<P class=a8><SPAN lang=EN-US>printf(" Average arrival time : 
%d:%d\n",total/NR/60, (total/NR)%60 ) &gt;&gt; "today_rpt3" </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>function HM_to_M( hour, min ){ </SPAN></P>
<P class=a8><SPAN lang=EN-US>return hour*60 + min </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>' $* </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">并执行如下指令</SPAN><SPAN lang=EN-US> 
: </SPAN></P>
<P class=a8><SPAN lang=EN-US>$ ./reformat3 arr.dat</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行后</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">文件</SPAN><SPAN lang=EN-US> 
today_rpt3 </SPAN><SPAN style="FONT-FAMILY: 宋体">的内容如下</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;Today is&nbsp; 09<SPAN 
style="FONT-FAMILY: 宋体">月</SPAN> 21</SPAN><SPAN 
style="FONT-FAMILY: 宋体">日</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>========================= </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;ID Number Arrival Time </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1005 8:12 * </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1006 7:45&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1008 8:01 * </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1012 7:46&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1025 7:27&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1028 7:49&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1029 7:57&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1034 7:26&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1042 7:59&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1051 7:51&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1052 8:05 * </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1101 7:32&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;Average arrival time : 7:49 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说</SPAN> <SPAN style="FONT-FAMILY: 宋体">明</SPAN><SPAN 
lang=EN-US> : ]</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中亦允许使用者自定函数</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">函数定义方式请参考本程序</SPAN><SPAN lang=EN-US>, function 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的保留字</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>HM_to_M( ) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这函数负责将所传入之小时及分钟数转换成以分钟为单位</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">使用者自定函数时</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">还有许多细节须留心</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US>data scope,.. ( 
</SPAN><SPAN style="FONT-FAMILY: 宋体">请参考</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">第十节</SPAN><SPAN lang=EN-US> Recursive Program) 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中亦提供与</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中相同的</SPAN><SPAN lang=EN-US> Conditional Operator. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">上式</SPAN><SPAN 
lang=EN-US>printf()</SPAN><SPAN style="FONT-FAMILY: 宋体">中使用</SPAN><SPAN 
lang=EN-US>arrival &gt;480 ? "*" : " " </SPAN><SPAN 
style="FONT-FAMILY: 宋体">即为一例若</SPAN><SPAN lang=EN-US> arrival </SPAN><SPAN 
style="FONT-FAMILY: 宋体">大于</SPAN><SPAN lang=EN-US> 480 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US>return "*" , </SPAN><SPAN 
style="FONT-FAMILY: 宋体">否则</SPAN><SPAN lang=EN-US>return " ". </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>% </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的运算符</SPAN><SPAN lang=EN-US>(operator), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其作用与</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中之</SPAN><SPAN lang=EN-US> % </SPAN><SPAN 
style="FONT-FAMILY: 宋体">相同</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">取余数</SPAN><SPAN lang=EN-US>). </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>NR(Number of Record) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的内建变量</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行该程序后所读入的记录笔数</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中提供的</SPAN><SPAN lang=EN-US> close( )</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语法如下</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">有二种</SPAN><SPAN lang=EN-US>) : </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>close( filename ) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>close( </SPAN><SPAN 
style="FONT-FAMILY: 宋体">置于</SPAN><SPAN lang=EN-US>pipe</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之前的</SPAN><SPAN lang=EN-US>command ) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">为何本程序使用了两个</SPAN><SPAN 
lang=EN-US> close( ) </SPAN><SPAN style="FONT-FAMILY: 宋体">指令</SPAN><SPAN 
lang=EN-US> : </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> 
close( "sort -k 1 &gt;&gt; today_rpt3" ), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其意思为</SPAN><SPAN lang=EN-US> close </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中置于</SPAN><SPAN lang=EN-US> "sort -k 1 &gt;&gt; 
today_rpt3 " </SPAN><SPAN style="FONT-FAMILY: 宋体">之前的</SPAN><SPAN lang=EN-US> 
Pipe , </SPAN><SPAN style="FONT-FAMILY: 宋体">并立刻调用</SPAN><SPAN lang=EN-US> Shell 
</SPAN><SPAN style="FONT-FAMILY: 宋体">来执行</SPAN><SPAN lang=EN-US>"sort -k 1 
&gt;&gt; today_rpt3". (</SPAN><SPAN style="FONT-FAMILY: 宋体">若未执行这指令</SPAN><SPAN 
lang=EN-US>, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">必须于结束该程序时才会进行上述动作</SPAN><SPAN lang=EN-US>;</SPAN><SPAN 
style="FONT-FAMILY: 宋体">则这</SPAN><SPAN lang=EN-US>12</SPAN><SPAN 
style="FONT-FAMILY: 宋体">笔</SPAN><SPAN lang=EN-US>sort</SPAN><SPAN 
style="FONT-FAMILY: 宋体">后的数据将被</SPAN><SPAN lang=EN-US> append </SPAN><SPAN 
style="FONT-FAMILY: 宋体">到文件</SPAN><SPAN lang=EN-US> today_rpt3 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>"Average arrival time : ..." </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的后方</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">因为</SPAN><SPAN lang=EN-US> 
Shell </SPAN><SPAN style="FONT-FAMILY: 宋体">排序后的数据也要写到</SPAN><SPAN lang=EN-US> 
today_rpt3, </SPAN><SPAN style="FONT-FAMILY: 宋体">所以</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">必须先关闭使用中的</SPAN><SPAN 
lang=EN-US>today_rpt3 </SPAN><SPAN style="FONT-FAMILY: 宋体">以使</SPAN><SPAN 
lang=EN-US> Shell </SPAN><SPAN style="FONT-FAMILY: 宋体">正确将排序后的数据追加到</SPAN><SPAN 
lang=EN-US>today_rpt3</SPAN><SPAN style="FONT-FAMILY: 宋体">否则</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">个不同的</SPAN><SPAN lang=EN-US> 
process </SPAN><SPAN style="FONT-FAMILY: 宋体">同时打开一个文件进行输出将会产生不可预期的结果</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">读者应留心上述两点</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">才可正确控制数据输出到文件中的顺序</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> 
close("sort -k 1 &gt;&gt; today_rpt3")</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中字符串</SPAN><SPAN lang=EN-US> "sort +0n &gt;&gt; 
today_rpt3" </SPAN><SPAN style="FONT-FAMILY: 宋体">必须与</SPAN><SPAN lang=EN-US> 
pipe | </SPAN><SPAN style="FONT-FAMILY: 宋体">后方的</SPAN><SPAN lang=EN-US> Shell 
Command </SPAN><SPAN style="FONT-FAMILY: 宋体">名称一字不差</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">否则</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将视为二个不同的</SPAN><SPAN lang=EN-US> pipe. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">读者可于</SPAN><SPAN 
lang=EN-US>BEGIN{}</SPAN><SPAN style="FONT-FAMILY: 宋体">中先令变量</SPAN><SPAN 
lang=EN-US> Sys_call = "sort +0n &gt;&gt; today_rpt3", </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">程序中再一律以</SPAN><SPAN lang=EN-US> 
Sys_call </SPAN><SPAN style="FONT-FAMILY: 宋体">代替该字符串</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">使用</SPAN><SPAN lang=EN-US> getline </SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">来读取数据</SPAN> </H2>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">范</SPAN> <SPAN style="FONT-FAMILY: 宋体">例</SPAN><SPAN 
lang=EN-US> : ] </SPAN><SPAN style="FONT-FAMILY: 宋体">承上题</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">从文件中读取当月迟到次数</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">并根据当日出勤状况更新迟到累计数</SPAN><SPAN 
lang=EN-US>.(</SPAN><SPAN style="FONT-FAMILY: 宋体">按不同的月份累计于不同的文件</SPAN><SPAN 
lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">分</SPAN> <SPAN style="FONT-FAMILY: 宋体">析</SPAN><SPAN 
lang=EN-US> : ]</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">程序中自动抓取系统日期的月份名称</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">连接上</SPAN><SPAN 
lang=EN-US>"late.dat", </SPAN><SPAN 
style="FONT-FAMILY: 宋体">形成累计迟到次数的文件名称</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US> : 09</SPAN><SPAN 
style="FONT-FAMILY: 宋体">月</SPAN><SPAN lang=EN-US>late.dat,...), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并以变量</SPAN><SPAN lang=EN-US>late_file</SPAN><SPAN 
style="FONT-FAMILY: 宋体">记录该文件名</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">累计迟到次数的文件中的数据格式为</SPAN><SPAN 
lang=EN-US>: </SPAN><SPAN style="FONT-FAMILY: 宋体">员工代号</SPAN><SPAN 
lang=EN-US>(ID) </SPAN><SPAN style="FONT-FAMILY: 宋体">迟到次数</SPAN><SPAN 
lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">执行本程序前文件</SPAN><SPAN lang=EN-US> 
09</SPAN><SPAN style="FONT-FAMILY: 宋体">月</SPAN><SPAN lang=EN-US>late.dat 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的内容为</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=a8><SPAN lang=EN-US>1012 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1006 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1052 2 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1034 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1005 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1029 2 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1042 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1051 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1008 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1101 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1025 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1028 0 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">编写程序</SPAN><SPAN lang=EN-US> 
reformat4 </SPAN><SPAN style="FONT-FAMILY: 宋体">如下</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>#!/bin/sh </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>Sys_Sort = "sort -k 1 &gt;&gt; today_rpt4" 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>Result = "today_rpt4" </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">改变字段切割的方式</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>FS = "[ \t:]+" </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">令</SPAN><SPAN lang=EN-US> Shell</SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US>"date"; getline </SPAN><SPAN 
style="FONT-FAMILY: 宋体">读取结果</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">并以</SPAN><SPAN lang=EN-US>$0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">记录</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>"date" | getline </SPAN></P>
<P class=a8><SPAN lang=EN-US>print " Today is " , $2, $3 &gt;Result </SPAN></P>
<P class=a8><SPAN lang=EN-US>print "=========================" &gt; Result 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>print " ID Number Arrival Time" &gt; Result 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>close( Result ) </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">从文件按中读取迟到数据</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并用数组</SPAN><SPAN lang=EN-US>cnt[ ]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">记录</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">数组</SPAN><SPAN lang=EN-US>cnt[ ]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中以</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">员工代号为下标</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所对应的值为该员工之迟到次数</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>late_file = $2"late.dat" </SPAN></P>
<P class=a8><SPAN lang=EN-US>while( getline &lt; late_file &gt;0 ) cnt[$1] = $2 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>close( late_file ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">已更改字段切割方式</SPAN><SPAN lang=EN-US>, $2</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表小时数</SPAN><SPAN lang=EN-US>,$3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表分钟数</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>arrival = HM_to_M($2, $3) </SPAN></P>
<P class=a8><SPAN lang=EN-US>if( arrival &gt; 480 ){ </SPAN></P>
<P class=a8><SPAN lang=EN-US>mark = "*" # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若当天迟到</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">应再增加其迟到次数</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">且令</SPAN><SPAN lang=EN-US>mark </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>"*". </SPAN></P>
<P class=a8><SPAN lang=EN-US>cnt[$1]++ } </SPAN></P>
<P class=a8><SPAN lang=EN-US>else mark = " " </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US># message </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以显示该员工的迟到累计数</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若未曾迟到</SPAN><SPAN lang=EN-US>message</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为空字符串</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>message = cnt[$1] ? cnt[$1] " times" : "" 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>printf("%s %2d:%2d %5s %s\n", $1, $2, $3, mark, 
message ) | Sys_Sort </SPAN></P>
<P class=a8><SPAN lang=EN-US>total += arrival </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>END { </SPAN></P>
<P class=a8><SPAN lang=EN-US>close( Result ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>close( Sys_Sort ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>printf(" Average arrival time : %d:%d\n", 
total/NR/60, (total/NR)%60 ) &gt;&gt; Result </SPAN></P>
<P class=a8><SPAN lang=EN-US>#</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将数组</SPAN><SPAN lang=EN-US>cnt[ ]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中新的迟到数据写回文件中</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>for( any in cnt ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>print any, cnt[any] &gt; late_file </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>function HM_to_M( hour, min ){ </SPAN></P>
<P class=a8><SPAN lang=EN-US>return hour*60 + min </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>' $* </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行后</SPAN><SPAN lang=EN-US>, 
today_rpt4 </SPAN><SPAN style="FONT-FAMILY: 宋体">之内容如下</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;Today is&nbsp; 09<SPAN 
style="FONT-FAMILY: 宋体">月</SPAN> 21</SPAN><SPAN 
style="FONT-FAMILY: 宋体">日</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>========================= </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;ID Number Arrival Time </SPAN></P>
<P class=a8><SPAN lang=EN-US>1005&nbsp; 8:12 &nbsp;&nbsp;&nbsp;&nbsp;* 1 times 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>1006&nbsp; 7:45&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1 times </SPAN></P>
<P class=a8><SPAN lang=EN-US>1008&nbsp; 8: 1&nbsp;&nbsp;&nbsp;&nbsp; * 1 times 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>1012&nbsp; 7:46&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>1025&nbsp; 7:27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1 times </SPAN></P>
<P class=a8><SPAN lang=EN-US>1028&nbsp; 7:49&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>1029&nbsp; 7:57&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2 times </SPAN></P>
<P class=a8><SPAN lang=EN-US>1034&nbsp; 7:26&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>1042&nbsp; 7:59&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>1051&nbsp; 7:51&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>1052&nbsp; 8: 5&nbsp;&nbsp;&nbsp;&nbsp; * 3 times 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>1101&nbsp; 7:32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;Average arrival time : 7:49 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>09</SPAN><SPAN 
style="FONT-FAMILY: 宋体">月</SPAN><SPAN lang=EN-US>late.dat </SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件被修改为如下</SPAN><SPAN lang=EN-US>:</SPAN></P>
<P class=a8><SPAN lang=EN-US>1005 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1012 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1006 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1008 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1101 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1025 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1034 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1042 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1028 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1029 2 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1051 0 </SPAN></P>
<P class=a8><SPAN lang=EN-US>1052 3 </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">说</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">明</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>late_file </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是一变量</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以记录迟到次数的文件的文件名</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>late_file</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值由两部分构成</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">前半部是当月月份名称</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">由调用</SPAN><SPAN lang=EN-US>"date"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">取得</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">后半部固定为</SPAN><SPAN lang=EN-US>"late.dat" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US>: 09</SPAN><SPAN 
style="FONT-FAMILY: 宋体">月</SPAN><SPAN lang=EN-US>late.dat. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> 
getline &lt; late_file </SPAN><SPAN style="FONT-FAMILY: 宋体">表示从</SPAN><SPAN 
lang=EN-US>late_file</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所代表的文件中读取一笔记录</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并存放于</SPAN><SPAN lang=EN-US>$0. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">若使用者可自行把数据放入</SPAN><SPAN 
lang=EN-US>$0, awk</SPAN><SPAN style="FONT-FAMILY: 宋体">会自动对这新置入</SPAN><SPAN 
lang=EN-US> $0 </SPAN><SPAN style="FONT-FAMILY: 宋体">的数据进行字段分割</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">之后程序中可用</SPAN><SPAN 
lang=EN-US>$1, $2,..</SPAN><SPAN style="FONT-FAMILY: 宋体">来表示该笔资料的第一栏</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">第二栏</SPAN><SPAN lang=EN-US>,.., 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">注</SPAN><SPAN lang=EN-US>: </SPAN><SPAN 
style="FONT-FAMILY: 宋体">有少数</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">版本不容许使用者自行将数据置于</SPAN><SPAN lang=EN-US> $0, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">遇此情况可改用</SPAN><SPAN lang=EN-US>gawk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US>nawk) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN 
lang=EN-US>getline</SPAN><SPAN style="FONT-FAMILY: 宋体">指令时</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">若成功读取记录</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">它会返回</SPAN><SPAN lang=EN-US>1. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">若遇到文件结束</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">它返回</SPAN><SPAN lang=EN-US>0; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">无法打开文件则返回</SPAN><SPAN lang=EN-US>-1. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">利用</SPAN><SPAN lang=EN-US> 
while( getline &lt; filename &gt;0 ) {....}</SPAN><SPAN 
style="FONT-FAMILY: 宋体">可读入文件中的每一笔数据并予处理</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这是</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中用户自行读取数据文件的一个重要模式</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">数组</SPAN><SPAN lang=EN-US> cnt[ 
] </SPAN><SPAN style="FONT-FAMILY: 宋体">以员工</SPAN><SPAN lang=EN-US>ID. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">当下标</SPAN><SPAN lang=EN-US>(index), 
</SPAN><SPAN style="FONT-FAMILY: 宋体">其对应值表示其迟到的次数</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行结束后</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">利用</SPAN><SPAN lang=EN-US> for(Variable in 
array ){...}</SPAN><SPAN style="FONT-FAMILY: 宋体">的语法</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>for( any in cnt ) print any, cnt[any] &gt; 
late_file </SPAN></P>
<P class=MsoNormal><SPAN 
style="FONT-FAMILY: 宋体">将更新过的迟到数据重新写回记录迟到次数的文件</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">该语法在前面曾有说明</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<H1><SPAN lang=EN-US>8.<SPAN style="FONT: 7pt 'Times New Roman'"> 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">处理多行的数据</SPAN><SPAN 
lang=EN-US> </SPAN></H1>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">每次从数据文件中只读取一数据进行处理</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">是依照其内建变量</SPAN><SPAN lang=EN-US> RS(Record Separator) 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的定义将文件中的数据分隔成一行一行的</SPAN><SPAN 
lang=EN-US>Record. RS </SPAN><SPAN style="FONT-FAMILY: 宋体">的默认值是</SPAN><SPAN 
lang=EN-US> "\n"(</SPAN><SPAN style="FONT-FAMILY: 宋体">跳行符号</SPAN><SPAN 
lang=EN-US>), </SPAN><SPAN style="FONT-FAMILY: 宋体">故平常</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">中一行数据就是一笔</SPAN><SPAN 
lang=EN-US> Record. </SPAN><SPAN style="FONT-FAMILY: 宋体">但有些文件中一笔</SPAN><SPAN 
lang=EN-US>Record</SPAN><SPAN style="FONT-FAMILY: 宋体">涵盖了多行数据</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">这种情况下不能再以</SPAN><SPAN 
lang=EN-US> "\n" </SPAN><SPAN style="FONT-FAMILY: 宋体">来分隔</SPAN><SPAN 
lang=EN-US>Records. </SPAN><SPAN style="FONT-FAMILY: 宋体">最常使用的方法是相邻的</SPAN><SPAN 
lang=EN-US>Records</SPAN><SPAN style="FONT-FAMILY: 宋体">之间改以</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">一个空白行</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">来隔开</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">在</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">令</SPAN><SPAN lang=EN-US> RS = ""(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">空字符串</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">后</SPAN><SPAN lang=EN-US>, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">把会空白行当成来文件中</SPAN><SPAN lang=EN-US>Record</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的分隔符</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">显然</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">对</SPAN><SPAN lang=EN-US> RS = "" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">另有解释方式</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">简略描述如下</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> RS = "" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>:</SPAN><SPAN 
style="FONT-FAMILY: 宋体">数个并邻的空白行</SPAN><SPAN lang=EN-US>, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">仅视成一个单一的</SPAN><SPAN lang=EN-US>Record Saparator. 
(awk</SPAN><SPAN style="FONT-FAMILY: 宋体">不会于两个紧并的空白行之间读取一笔空的</SPAN><SPAN 
lang=EN-US>Record) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">会略过</SPAN><SPAN lang=EN-US>(skip)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件头或文件尾的空白行</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故不会因为这样的空白行</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">造成</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">多读入了二笔空的数据</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">请观察下例</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">首先建立一个数据文件</SPAN><SPAN 
lang=EN-US> week.rpt</SPAN><SPAN style="FONT-FAMILY: 宋体">如下</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN style="FONT-FAMILY: 宋体">张长弓</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>GNUPLOT </SPAN><SPAN 
style="FONT-FAMILY: 宋体">入门</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN style="FONT-FAMILY: 宋体">吴国强</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>Latex </SPAN><SPAN 
style="FONT-FAMILY: 宋体">简介</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>VAST-2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用手册</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>mathematic </SPAN><SPAN 
style="FONT-FAMILY: 宋体">入门</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN style="FONT-FAMILY: 宋体">李小华</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk Tutorial Guide</SPAN></P>
<P class=a8><SPAN lang=EN-US>Regular Expression </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">该文件的开头有数行空白行</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">各笔</SPAN><SPAN 
lang=EN-US>Record</SPAN><SPAN style="FONT-FAMILY: 宋体">之间使用一个或数个空白行隔开</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">读者请细心观察</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> RS = 
"" </SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">读取该数据文件之方式</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">编辑一个</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序文件</SPAN><SPAN lang=EN-US> 
make_report</SPAN><SPAN style="FONT-FAMILY: 宋体">如下</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>#!/bin/sh </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>FS = "\n" </SPAN></P>
<P class=a8><SPAN lang=EN-US>RS = "" </SPAN></P>
<P class=a8><SPAN lang=EN-US>split( "</SPAN><SPAN 
style="FONT-FAMILY: 宋体">一</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">二</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">三</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">四</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">五</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">六</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">七</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">八</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">九</SPAN><SPAN lang=EN-US>.", C_Number, " " ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>printf("\n%s </SPAN><SPAN 
style="FONT-FAMILY: 宋体">报告人</SPAN><SPAN lang=EN-US> : %s \n",C_Number[NR],$1) 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>for( i=2; i &lt;= NF; i++) printf(" %d. %s\n", i-1, 
$i) </SPAN></P>
<P class=a8><SPAN lang=EN-US>} ' $* </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ make_report week.rpt </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">屏幕产生结果如下</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN style="FONT-FAMILY: 宋体">一</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">报告人</SPAN><SPAN lang=EN-US> : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">张长弓</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1. GNUPLOT </SPAN><SPAN 
style="FONT-FAMILY: 宋体">入门</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN style="FONT-FAMILY: 宋体">二</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">报告人</SPAN><SPAN lang=EN-US> : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">吴国强</SPAN><SPAN lang=EN-US>&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1. Latex </SPAN><SPAN 
style="FONT-FAMILY: 宋体">简介</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;2. VAST-2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用手册</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;3. mathematic </SPAN><SPAN 
style="FONT-FAMILY: 宋体">入门</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN style="FONT-FAMILY: 宋体">三</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">报告人</SPAN><SPAN lang=EN-US> : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">李小华</SPAN><SPAN lang=EN-US>&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1. awk Tutorial Guide </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;2. Regular Expression </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说</SPAN> <SPAN style="FONT-FAMILY: 宋体">明</SPAN><SPAN 
lang=EN-US>: ]</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本程序同时也改变字段分隔字符</SPAN><SPAN 
lang=EN-US>( FS= "\n" ), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如此一笔数据中的每一行都是一个</SPAN><SPAN lang=EN-US>field. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">读入的第一笔</SPAN><SPAN lang=EN-US> Record </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN style="FONT-FAMILY: 宋体">张长弓</SPAN></P>
<P class=a8><SPAN lang=EN-US>GNUPLOT </SPAN><SPAN 
style="FONT-FAMILY: 宋体">入门</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">其中</SPAN><SPAN lang=EN-US> $1 
</SPAN><SPAN style="FONT-FAMILY: 宋体">指的是</SPAN><SPAN lang=EN-US>"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">张长弓</SPAN><SPAN lang=EN-US>", $2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指的是</SPAN><SPAN lang=EN-US>"GNUPLOT </SPAN><SPAN 
style="FONT-FAMILY: 宋体">入门</SPAN><SPAN lang=EN-US>" </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">上式中的</SPAN><SPAN 
lang=EN-US>C_Number[ ]</SPAN><SPAN style="FONT-FAMILY: 宋体">是一个数组</SPAN><SPAN 
lang=EN-US>(array), </SPAN><SPAN style="FONT-FAMILY: 宋体">用以记录中文数字</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
C_Number[1] = "</SPAN><SPAN style="FONT-FAMILY: 宋体">一</SPAN><SPAN lang=EN-US>.", 
C_Number[2] = "</SPAN><SPAN style="FONT-FAMILY: 宋体">二</SPAN><SPAN lang=EN-US>." 
</SPAN><SPAN style="FONT-FAMILY: 宋体">这过程使用</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">字符串函数</SPAN><SPAN lang=EN-US> 
split( ) </SPAN><SPAN style="FONT-FAMILY: 宋体">来把中文数字放进数组</SPAN><SPAN lang=EN-US> 
C_Number[ ]</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">函数</SPAN><SPAN lang=EN-US> 
split( )</SPAN><SPAN style="FONT-FAMILY: 宋体">用法如下</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>split( </SPAN><SPAN 
style="FONT-FAMILY: 宋体">原字符串</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">数组名</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">分隔字符</SPAN><SPAN lang=EN-US>(field separator) ) : 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">将依所指定的分隔字符</SPAN><SPAN lang=EN-US>(field 
separator)</SPAN><SPAN style="FONT-FAMILY: 宋体">分隔原字符串成一个个的字段</SPAN><SPAN 
lang=EN-US>(field), </SPAN><SPAN style="FONT-FAMILY: 宋体">并以指定的</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">数组</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">记录各个被分隔的字段</SPAN></P>
<H1><SPAN lang=EN-US>9.<SPAN style="FONT: 7pt 'Times New Roman'"> 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">如何读取命令行上的参数</SPAN><SPAN 
lang=EN-US> </SPAN></H1>
<P class=MsoNormal><SPAN 
style="FONT-FAMILY: 宋体">大部分的应用程序都允许使用者在命令之后增加一些选择性的参数</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时这些参数大部分用于指定数据文件文件名</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">有时希望在程序中能从命令行上得到一些其它用途的数据</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">本小节中将叙述如何在</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序中取用这些参数</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">建立文件如下</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">命名为</SPAN><SPAN lang=EN-US> see_arg : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>#!/bin/sh </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>for( i=0; i&lt;ARGC ; i++) </SPAN></P>
<P class=a8><SPAN lang=EN-US>print ARGV[i] # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">依次印出</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所记录的参数</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>' $* </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行如下命令</SPAN><SPAN lang=EN-US> 
: </SPAN></P>
<P class=a8><SPAN lang=EN-US>$ ./see_arg first-arg second-arg </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">结果屏幕出现</SPAN><SPAN lang=EN-US> 
: </SPAN></P>
<P class=a8><SPAN lang=EN-US>awk </SPAN></P>
<P class=a8><SPAN lang=EN-US>first-arg </SPAN></P>
<P class=a8><SPAN lang=EN-US>second-arg </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说明</SPAN><SPAN lang=EN-US> : ]</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>ARGC, ARGV[ ] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所提供的内建变量</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>ARGC : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为一整数</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">代表命令行上</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">除了选项</SPAN><SPAN lang=EN-US>-v, -f </SPAN><SPAN 
style="FONT-FAMILY: 宋体">及其对应的参数之外所有参数的数目</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>ARGV[ ] : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为一字符串数组</SPAN><SPAN lang=EN-US>. 
ARGV[0],ARGV[1],...ARGV[ARGC-1]. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">分别代表命令行上相对应的参数</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">当命令行为</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk -vx=36 -f program1 data1 data2 </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk '{ print $1 ,$2 }' data1 data2 </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">其</SPAN><SPAN lang=EN-US> ARGC 
</SPAN><SPAN style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> 3 </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>ARGV[0] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> "awk" </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>ARGV[1] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> "data1" </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>ARGV[2] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> "data2" </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">命令行上的</SPAN><SPAN lang=EN-US> 
"-f program1", " -vx=36", </SPAN><SPAN style="FONT-FAMILY: 宋体">或程序部分</SPAN><SPAN 
lang=EN-US> '{ print $1, $2}' </SPAN><SPAN 
style="FONT-FAMILY: 宋体">都不会列入</SPAN><SPAN lang=EN-US> ARGC </SPAN><SPAN 
style="FONT-FAMILY: 宋体">及</SPAN><SPAN lang=EN-US> ARGV[ ] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">利用</SPAN><SPAN lang=EN-US> ARGC </SPAN><SPAN 
style="FONT-FAMILY: 宋体">来判断应开启的数据文件个数</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">但使用者可强行改变</SPAN><SPAN 
lang=EN-US> ARGC; </SPAN><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> 
ARGC </SPAN><SPAN style="FONT-FAMILY: 宋体">之值被使用者设为</SPAN><SPAN lang=EN-US> 1 
</SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>; </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将被蒙骗</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">误以为命令行上并无数据文件文件名</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故不会以</SPAN><SPAN lang=EN-US> ARGV[1], 
ARGV[2],..</SPAN><SPAN style="FONT-FAMILY: 宋体">为文件名来打开文件读取数据</SPAN><SPAN 
lang=EN-US>; </SPAN><SPAN style="FONT-FAMILY: 宋体">但在程序中仍可通过</SPAN><SPAN 
lang=EN-US> ARGV[1], ARGV[2],..</SPAN><SPAN 
style="FONT-FAMILY: 宋体">来取得命令行上的数据</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">某一程序</SPAN><SPAN lang=EN-US> 
test1.awk </SPAN><SPAN style="FONT-FAMILY: 宋体">如下</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>number = ARGC #</SPAN><SPAN 
style="FONT-FAMILY: 宋体">先用</SPAN><SPAN lang=EN-US>number </SPAN><SPAN 
style="FONT-FAMILY: 宋体">记住实际的参数个数</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>ARGC = 2 # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">自行更改</SPAN><SPAN lang=EN-US> ARGC=2, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将以为只有一个资料文件</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">仍可藉由</SPAN><SPAN lang=EN-US>ARGV[ ]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">取得命令行上的资料</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>for( i=2; i&lt;number; i++) data[i] = ARGV[i] 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>........ </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">于命令行上键入</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk -f test1.awk data_file apple orange 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行时</SPAN><SPAN lang=EN-US> awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">会打开数据文件</SPAN><SPAN lang=EN-US> data_file 
</SPAN><SPAN style="FONT-FAMILY: 宋体">以进行处理</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">但不会打开以</SPAN><SPAN lang=EN-US>apple,orange </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为档名的文件</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">因为</SPAN><SPAN lang=EN-US> ARGC </SPAN><SPAN 
style="FONT-FAMILY: 宋体">被改成</SPAN><SPAN lang=EN-US>2). </SPAN><SPAN 
style="FONT-FAMILY: 宋体">但仍可通过</SPAN><SPAN lang=EN-US>ARGV[2], 
ARGV[3]</SPAN><SPAN style="FONT-FAMILY: 宋体">取得命令行上的参数</SPAN><SPAN lang=EN-US> 
apple, orange </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">也可以用下列命令来达成上例的效果</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>$awk -f test2.awk -v data[2]="apple" -v 
data[3]="orange" data_file </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>10.<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">编写可与用户交互的</SPAN><SPAN 
lang=EN-US> awk </SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">程序</SPAN><SPAN 
lang=EN-US> </SPAN></H1>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序时</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">会自动从文件中读取数据来进行处理</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">直到文件结束</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">只要将</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">读取数据的来源改成键盘输入</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">便可设计与</SPAN><SPAN 
lang=EN-US>awk </SPAN><SPAN style="FONT-FAMILY: 宋体">交互的程序了</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">本节将提供一个该类程序的范例</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> :] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">本节将编写一个英语生字测验的程序</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">它将印出中文字意</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">再由使用者回答其英语生字</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">首先编辑一个数据挡</SPAN><SPAN 
lang=EN-US> test.dat (</SPAN><SPAN style="FONT-FAMILY: 宋体">内容不限</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">格式如下</SPAN><SPAN lang=EN-US>) 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>apple </SPAN><SPAN 
style="FONT-FAMILY: 宋体">苹果</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>orange </SPAN><SPAN 
style="FONT-FAMILY: 宋体">柳橙</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>banana </SPAN><SPAN 
style="FONT-FAMILY: 宋体">香蕉</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>pear </SPAN><SPAN 
style="FONT-FAMILY: 宋体">梨子</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>starfruit </SPAN><SPAN 
style="FONT-FAMILY: 宋体">杨桃</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>bellfruit </SPAN><SPAN 
style="FONT-FAMILY: 宋体">莲雾</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>kiwi </SPAN><SPAN 
style="FONT-FAMILY: 宋体">奇异果</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>pineapple </SPAN><SPAN 
style="FONT-FAMILY: 宋体">菠萝</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>watermelon </SPAN><SPAN 
style="FONT-FAMILY: 宋体">西瓜</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">编辑</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序</SPAN><SPAN 
lang=EN-US>"c2e"</SPAN><SPAN style="FONT-FAMILY: 宋体">如下</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>#!/bin/sh </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>while( getline &lt; ARGV[1] ){ #</SPAN><SPAN 
style="FONT-FAMILY: 宋体">由指定的文件中读取测验数据</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>English[++n] = $1 # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">最后</SPAN><SPAN lang=EN-US>, n </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将表示题目之题数</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>Chinese[n] = $2 </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>ARGV[1] = "-" # "-"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示由</SPAN><SPAN lang=EN-US>stdin(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">键盘输入</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=a8><SPAN lang=EN-US>srand() # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以系统时间为随机数启始的种子</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>question() #</SPAN><SPAN 
style="FONT-FAMILY: 宋体">产生考题</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US>{# awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">自动读入由键盘上输入的数据</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用者回答的答案</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=a8><SPAN lang=EN-US>if($1 != English[ind] ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>print "Try again!" </SPAN></P>
<P class=a8><SPAN lang=EN-US>else{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print 
"\nYou are right !! Press Enter to Continue --- " </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; getline 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
question()#</SPAN><SPAN style="FONT-FAMILY: 宋体">产生考题</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>function question(){ </SPAN></P>
<P class=a8><SPAN lang=EN-US>ind = int(rand()* n) + 1 #</SPAN><SPAN 
style="FONT-FAMILY: 宋体">以随机数选取考题</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>system("clear") </SPAN></P>
<P class=a8><SPAN lang=EN-US>print " Press \"ctrl-d\" to exit" </SPAN></P>
<P class=a8><SPAN lang=EN-US>printf("\n%s ", Chinese[ind] " </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的英文生字是</SPAN><SPAN lang=EN-US>: ") </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>' $* </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行时键入如下指令</SPAN><SPAN 
lang=EN-US> : </SPAN></P>
<P class=a8><SPAN lang=EN-US>$./c2e test.dat </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">屏幕将产生如下的画面</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;Press "ctrl-d " to exit </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN style="FONT-FAMILY: 宋体">莲雾</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">的英文生字是</SPAN><SPAN lang=EN-US>: </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">若输入</SPAN><SPAN lang=EN-US> 
bellfruit </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">程序将产生</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>You are right !! Press Enter to Continue --- 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说</SPAN> <SPAN style="FONT-FAMILY: 宋体">明</SPAN><SPAN 
lang=EN-US> : ]</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">参数</SPAN><SPAN lang=EN-US> 
test.dat (ARGV[1]) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示储存考题的数据文件文件名</SPAN><SPAN lang=EN-US>. awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">由该文件上取得考题资料后</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将</SPAN><SPAN lang=EN-US> ARGV[1] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">改成</SPAN><SPAN lang=EN-US> "-". </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>"-" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示由</SPAN><SPAN lang=EN-US> stdin(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">键盘输入</SPAN><SPAN lang=EN-US>) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">数据</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">键盘输入数据的结束符号</SPAN><SPAN lang=EN-US> (End of 
file)</SPAN><SPAN style="FONT-FAMILY: 宋体">是</SPAN><SPAN lang=EN-US> ctrl-d. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">读到</SPAN><SPAN lang=EN-US> ctrl-d </SPAN><SPAN 
style="FONT-FAMILY: 宋体">时就停止由</SPAN><SPAN lang=EN-US> stdin </SPAN><SPAN 
style="FONT-FAMILY: 宋体">读取数据</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的数学函数中提供两个与随机数有关的函数</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>srand( ) :&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以当前的系统时间作为随机数的种子</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>rand( ) : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">返回介于</SPAN><SPAN lang=EN-US> 0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US>1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之间的</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">近似</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">随机数值</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>11.<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">使用</SPAN><SPAN lang=EN-US> 
awk </SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">编写递归程序</SPAN><SPAN lang=EN-US> 
</SPAN></H1>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中除了函数的参数列</SPAN><SPAN lang=EN-US>(Argument 
List)</SPAN><SPAN style="FONT-FAMILY: 宋体">上的参数</SPAN><SPAN 
lang=EN-US>(Arguments)</SPAN><SPAN style="FONT-FAMILY: 宋体">外</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">所有变量不管于何处出现</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">全被视为全局变量</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">其生命持续至程序结束</SPAN><SPAN 
lang=EN-US> --- </SPAN><SPAN style="FONT-FAMILY: 宋体">该变量不论在</SPAN><SPAN 
lang=EN-US>function</SPAN><SPAN style="FONT-FAMILY: 宋体">外或</SPAN><SPAN 
lang=EN-US> function</SPAN><SPAN style="FONT-FAMILY: 宋体">内皆可使用</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">只要变量名称相同所使用的就是同一个变量</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">直到程序结束</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">因递归函数内部的变量</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">会因它调用子函数</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">本身</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">而重复使用</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">故编写该类函数时</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">应特别留心</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : ]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>x = 35 </SPAN></P>
<P class=a8><SPAN lang=EN-US>y = 45 </SPAN></P>
<P class=a8><SPAN lang=EN-US>test_variable( x ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>printf("Return to main : arg1= %d, x= %d, y= %d, z= 
%d\n", arg1, x, y, z) </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>function test_variable( arg1 ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>arg1++ # arg1 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为参数列上的参数</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是</SPAN><SPAN lang=EN-US>local variable. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">离开此函数后将消失</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>y ++ # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">会改变主式中的变量</SPAN><SPAN lang=EN-US> y </SPAN></P>
<P class=a8><SPAN lang=EN-US>z = 55 # z </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为该函数中新使用的变量</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">主程序中变量</SPAN><SPAN lang=EN-US> z </SPAN><SPAN 
style="FONT-FAMILY: 宋体">仍可被使用</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>printf("Inside the function: arg1=%d,x=%d, y=%d, 
z=%d\n", arg1, x, y, z) </SPAN></P>
<P class=a8><SPAN lang=EN-US>} ' </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">结果屏幕印出</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>Inside the function: arg1=36,x=35, y=46, z=55 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>Return to main : arg1= 0, x= 35, y= 46, z= 55 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">由上可知</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">函数内可任意使用主程序中的任何变量</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">函数内所启用的任何变量</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">除参数外</SPAN><SPAN lang=EN-US>), 
</SPAN><SPAN style="FONT-FAMILY: 宋体">于该函数之外依然可以使用</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">此特性优劣参半</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">最大的坏处是式中的变量不易被保护</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">特别是递归调用本身</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">执行子函数时会破坏父函数内的变量</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">一个变通的方法是</SPAN><SPAN 
lang=EN-US>: </SPAN><SPAN style="FONT-FAMILY: 宋体">在函数的参数列中虚列一些参数</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">函数执行中使用这些虚列的参数来记录不想被破坏的数据</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">如此执行子函数时就不会破坏到这些数据</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">此外</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">并不会检查调用函数时所传递的参数个数是否一致</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">定义递归函数如下</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>function demo( arg1 ) { # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">最常见的错误例子</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>........ </SPAN></P>
<P class=a8><SPAN lang=EN-US>for(i=1; i&lt; 20 ; i++){ </SPAN></P>
<P class=a8><SPAN lang=EN-US>demo(x) </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">又呼叫本身</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">因为</SPAN><SPAN lang=EN-US> i </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是</SPAN><SPAN lang=EN-US> global variable, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故执行完该子函数后</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US># </SPAN><SPAN 
style="FONT-FAMILY: 宋体">原函数中的</SPAN><SPAN lang=EN-US> i </SPAN><SPAN 
style="FONT-FAMILY: 宋体">已经被坏</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故本函数无法正确执行</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>....... </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>.......... </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">可将上列函数中的</SPAN><SPAN 
lang=EN-US> i </SPAN><SPAN style="FONT-FAMILY: 宋体">虚列在该函数的参数列上</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">如此</SPAN><SPAN lang=EN-US> i 
</SPAN><SPAN style="FONT-FAMILY: 宋体">便是一个局部变量</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">不会因执行子函数而被破坏</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">将上列函数修改如下</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=a8><SPAN lang=EN-US>function demo( arg1, i ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>...... </SPAN></P>
<P class=a8><SPAN lang=EN-US>for(i=1; i&lt; 20; i++) </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>demo(x)#awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">不会检查呼叫函数时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所传递的参数个数是否一致</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>..... </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$0, $1,.., NF, NR,..</SPAN><SPAN 
style="FONT-FAMILY: 宋体">也都是</SPAN><SPAN lang=EN-US> global variable, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">读者于递归函数中若有使用这些内建变量</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">也应另外设立一些局部变量来保存</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">以免被破坏</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> :]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">以下是一个常见的递归调用范例</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">它要求使用者输入一串元素</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">各元素间用空白隔开</SPAN><SPAN lang=EN-US>) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">然后印出这些元素所有可能的排列</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">编辑如下的</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">式</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">取名为</SPAN><SPAN lang=EN-US> permu 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>#!/bin/sh </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>print "</SPAN><SPAN 
style="FONT-FAMILY: 宋体">请输入排列的元素</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">各元素间请用空白隔开</SPAN><SPAN lang=EN-US>" </SPAN></P>
<P class=a8><SPAN lang=EN-US>getline </SPAN></P>
<P class=a8><SPAN lang=EN-US>permutation($0, "") </SPAN></P>
<P class=a8><SPAN lang=EN-US>printf("\n</SPAN><SPAN 
style="FONT-FAMILY: 宋体">共</SPAN><SPAN lang=EN-US> %d </SPAN><SPAN 
style="FONT-FAMILY: 宋体">种排列方式</SPAN><SPAN lang=EN-US>\n", counter) </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>function permutation( main_lst, 
buffer,&nbsp;&nbsp;&nbsp;&nbsp; new_main_lst, nf, i, j ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $0 = 
main_lst # </SPAN><SPAN style="FONT-FAMILY: 宋体">把</SPAN><SPAN 
lang=EN-US>main_lst</SPAN><SPAN style="FONT-FAMILY: 宋体">指定给</SPAN><SPAN 
lang=EN-US>$0</SPAN><SPAN style="FONT-FAMILY: 宋体">之后</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">将自动进行字段分割</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nf = NF 
# </SPAN><SPAN style="FONT-FAMILY: 宋体">故可用</SPAN><SPAN lang=EN-US> NF 
</SPAN><SPAN style="FONT-FAMILY: 宋体">表示</SPAN><SPAN lang=EN-US> main_lst 
</SPAN><SPAN style="FONT-FAMILY: 宋体">上存在的元素个数</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # BASE 
CASE : </SPAN><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN 
lang=EN-US>main_lst</SPAN><SPAN style="FONT-FAMILY: 宋体">只有一个元素时</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if( nf 
== 1){ </SPAN></P>
<P class=a8><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
print buffer main_lst #buffer</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的内容再加上</SPAN><SPAN lang=EN-US>main_lst</SPAN><SPAN 
style="FONT-FAMILY: 宋体">就是完成一次排列的结果</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
counter++ </SPAN></P>
<P class=a8><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
return </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # 
General Case : </SPAN><SPAN style="FONT-FAMILY: 宋体">每次从</SPAN><SPAN lang=EN-US> 
main_lst </SPAN><SPAN style="FONT-FAMILY: 宋体">中取出一个元素放到</SPAN><SPAN 
lang=EN-US>buffer</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # 
</SPAN><SPAN style="FONT-FAMILY: 宋体">再用</SPAN><SPAN lang=EN-US> main_lst 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中剩下的元素</SPAN><SPAN lang=EN-US> 
(new_main_lst) </SPAN><SPAN style="FONT-FAMILY: 宋体">往下进行排列</SPAN><SPAN 
lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else 
for( i=1; i&lt;=nf ;i++) </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { 
</SPAN></P>
<P class=a8><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
$0 = main_lst # $0</SPAN><SPAN style="FONT-FAMILY: 宋体">为全局变量已被破坏</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">故重新把</SPAN><SPAN 
lang=EN-US>main_lst</SPAN><SPAN style="FONT-FAMILY: 宋体">赋给</SPAN><SPAN 
lang=EN-US>$0,</SPAN><SPAN style="FONT-FAMILY: 宋体">令</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">再做一次字段分割</SPAN><SPAN 
lang=EN-US> </SPAN></P>
<P class=a8><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
new_main_lst = "" </SPAN></P>
<P class=a8><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
for(j=1; j&lt;=nf; j++) # </SPAN><SPAN style="FONT-FAMILY: 宋体">连接</SPAN><SPAN 
lang=EN-US> new_main_lst </SPAN></P>
<P class=a8><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if( j != i ) new_main_lst = new_main_lst " " $j </SPAN></P>
<P class=a8><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
permutation( new_main_lst, buffer " " $i ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>' $* </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ ./permu </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">屏幕上出现</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN style="FONT-FAMILY: 宋体">请输入排列的元素</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">各元素间请用空白隔开</SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">若输入</SPAN><SPAN lang=EN-US> 1 2 
3 </SPAN><SPAN style="FONT-FAMILY: 宋体">回车</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">结果印出</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1 2 3 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;1 3 2 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;2 1 3 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;2 3 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;3 1 2 </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;3 2 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=a8><SPAN style="FONT-FAMILY: 宋体">共</SPAN><SPAN lang=EN-US> 6 
</SPAN><SPAN style="FONT-FAMILY: 宋体">种排列方式</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">说</SPAN> <SPAN style="FONT-FAMILY: 宋体">明</SPAN><SPAN 
lang=EN-US> : ]</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">有些较旧版的</SPAN><SPAN 
lang=EN-US>awk,</SPAN><SPAN style="FONT-FAMILY: 宋体">并不容许使用者指定</SPAN><SPAN 
lang=EN-US>$0</SPAN><SPAN style="FONT-FAMILY: 宋体">之值</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">此时可改用</SPAN><SPAN lang=EN-US>gawk, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> nawk.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">否则也可自行使用</SPAN><SPAN lang=EN-US> split() </SPAN><SPAN 
style="FONT-FAMILY: 宋体">函数来分割</SPAN><SPAN lang=EN-US> main_lst. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">为避免执行子函数时破坏</SPAN><SPAN 
lang=EN-US> new_main_lst, nf, i, j </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故把这些变量也列于参数列上</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如此</SPAN><SPAN lang=EN-US>,new_main_lst, nf, i, j 
</SPAN><SPAN style="FONT-FAMILY: 宋体">将被当成局部变量</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">而不会受到子函数中同名的变量影响</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">读者声明函数时</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">参数列上不妨将这些</SPAN><SPAN 
lang=EN-US> "</SPAN><SPAN style="FONT-FAMILY: 宋体">虚列的参数</SPAN><SPAN lang=EN-US>" 
</SPAN><SPAN style="FONT-FAMILY: 宋体">与真正用于传递信息的参数间以较长的空白隔开</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">以便于区别</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中欲将字符串</SPAN><SPAN lang=EN-US>concatenation(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">连接</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">直接将两字符串并置即可</SPAN><SPAN lang=EN-US>(Implicit Operator). 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>A = "This " </SPAN></P>
<P class=a8><SPAN lang=EN-US>B = "is a " </SPAN></P>
<P class=a8><SPAN lang=EN-US>C = A B "key." # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">变量</SPAN><SPAN lang=EN-US>A</SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US>B</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之间应留空白</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">否则</SPAN><SPAN lang=EN-US>"AB"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将代表另一新变量</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>print C </SPAN></P>
<P class=a8><SPAN lang=EN-US>} '</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">结果将印出</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>This is a key. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用者所编写的函数可再重用</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不需要每个</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">式中都重新编写</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">将函数部分单独编写于一文件中</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">当需要用到该函数时再以下列方式</SPAN><SPAN 
lang=EN-US>include</SPAN><SPAN style="FONT-FAMILY: 宋体">进来</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk -f </SPAN><SPAN 
style="FONT-FAMILY: 宋体">函数文件名</SPAN><SPAN lang=EN-US> -f awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">主程序文件名</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">数据文件文件名</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>12.<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">附录</SPAN><SPAN lang=EN-US> 
A ──&nbsp; Pattern</SPAN></H1>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">通过判断</SPAN><SPAN lang=EN-US> Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值来决定是否执行其后所对应的</SPAN><SPAN 
lang=EN-US>Actions.</SPAN><SPAN style="FONT-FAMILY: 宋体">这里列出几种常见的</SPAN><SPAN 
lang=EN-US>Pattern : </SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
lang=EN-US>BEGIN </SPAN></H2>
<P class=MsoNormal><SPAN lang=EN-US>BEGIN </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的保留字</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是一种特殊的</SPAN><SPAN lang=EN-US> Pattern. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>BEGIN </SPAN><SPAN 
style="FONT-FAMILY: 宋体">成立</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">其值为</SPAN><SPAN lang=EN-US>true)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的时机是</SPAN><SPAN lang=EN-US>: "awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序一开始执行</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">尚未读取任何数据之前</SPAN><SPAN lang=EN-US>." </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所以在</SPAN><SPAN lang=EN-US> BEGIN { Actions } 
</SPAN><SPAN style="FONT-FAMILY: 宋体">语法中</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其</SPAN><SPAN lang=EN-US> Actions </SPAN><SPAN 
style="FONT-FAMILY: 宋体">部份仅于程序一开始执行时被执行一次</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">从数据文件读入数据行后</SPAN><SPAN lang=EN-US>, BEGIN </SPAN><SPAN 
style="FONT-FAMILY: 宋体">便不再成立</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故不论有多少数据行</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">该</SPAN><SPAN lang=EN-US> Actions </SPAN><SPAN 
style="FONT-FAMILY: 宋体">部份仅被执行</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">一次</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">一般常把</SPAN><SPAN lang=EN-US> 
"</SPAN><SPAN style="FONT-FAMILY: 宋体">与数据文件内容无关</SPAN><SPAN lang=EN-US>" 
</SPAN><SPAN style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> "</SPAN><SPAN 
style="FONT-FAMILY: 宋体">只需执行ㄧ次</SPAN><SPAN lang=EN-US>" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的部分置于该</SPAN><SPAN lang=EN-US>Actions(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US> BEGIN </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> Pattern)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>FS = "[ \t:]" # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">于程序一开始时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">改变</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">切割字段的方式</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>RS = "" # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">于程序一开始时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">改变</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">分隔数据行的方式</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>count = 100 # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">设定变量</SPAN><SPAN lang=EN-US> count </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的起始值</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=a8><SPAN lang=EN-US>print " This is a title line " # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">印出一行</SPAN><SPAN lang=EN-US> title </SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>....... # </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其它</SPAN><SPAN lang=EN-US> Pattern { Actions } ..... 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">有些</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序甚至</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">不需要读入任何数据行</SPAN><SPAN 
lang=EN-US>". </SPAN><SPAN style="FONT-FAMILY: 宋体">遇到这情况可把整个程序置于以</SPAN><SPAN 
lang=EN-US> BEGIN </SPAN><SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> 
Pattern</SPAN><SPAN style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US> Actions 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN { print " Hello ! the Word ! " } </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">注意</SPAN><SPAN lang=EN-US> 
:</SPAN><SPAN style="FONT-FAMILY: 宋体">执行该类仅含</SPAN><SPAN lang=EN-US> BEGIN { 
Actions } </SPAN><SPAN style="FONT-FAMILY: 宋体">的程序时</SPAN><SPAN lang=EN-US>, awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">并不会开启任何数据文件进行处理</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>END 
</SPAN></H2>
<P class=MsoNormal><SPAN lang=EN-US>END </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的保留字</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是另一种特殊的</SPAN><SPAN lang=EN-US> Pattern. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>END </SPAN><SPAN 
style="FONT-FAMILY: 宋体">成立</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">其值为</SPAN><SPAN lang=EN-US>true)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的时机与</SPAN><SPAN lang=EN-US> BEGIN </SPAN><SPAN 
style="FONT-FAMILY: 宋体">恰好相反</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>:"awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">处理完所有数据</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">即将离开程序时</SPAN><SPAN lang=EN-US>"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">平常读入数据行时</SPAN><SPAN lang=EN-US>, END</SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不成立</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故其对应的</SPAN><SPAN lang=EN-US> Actions </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不被执行</SPAN><SPAN lang=EN-US>; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">唯有当</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">读完所有数据时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">该</SPAN><SPAN lang=EN-US> Actions </SPAN><SPAN 
style="FONT-FAMILY: 宋体">才会被执行</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">注意</SPAN><SPAN lang=EN-US> : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">不管数据行有多少笔</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">该</SPAN><SPAN lang=EN-US> Actions 
</SPAN><SPAN style="FONT-FAMILY: 宋体">仅被执行一次</SPAN><SPAN lang=EN-US>. </SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">关系表达式</SPAN><SPAN lang=EN-US> </SPAN></H2>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">使用像</SPAN><SPAN lang=EN-US> " A 
</SPAN><SPAN style="FONT-FAMILY: 宋体">关系运算符</SPAN><SPAN lang=EN-US> B" 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的表达式当成</SPAN><SPAN lang=EN-US> Pattern. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> A 
</SPAN><SPAN style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> B </SPAN><SPAN 
style="FONT-FAMILY: 宋体">存在所指定的关系</SPAN><SPAN lang=EN-US>(Relation)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">该</SPAN><SPAN lang=EN-US> Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">就算成立</SPAN><SPAN lang=EN-US>(true). </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>length($0) &lt;= 80 { print $0 } </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">上式中</SPAN><SPAN lang=EN-US> 
length($0)&lt;= 80 </SPAN><SPAN style="FONT-FAMILY: 宋体">是一个</SPAN><SPAN 
lang=EN-US> Pattern, </SPAN><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN 
lang=EN-US> $0(</SPAN><SPAN style="FONT-FAMILY: 宋体">数据行</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">之长度小于等于</SPAN><SPAN 
lang=EN-US>80</SPAN><SPAN style="FONT-FAMILY: 宋体">时该</SPAN><SPAN lang=EN-US> 
Pattern </SPAN><SPAN style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US>true, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">将执行其后的</SPAN><SPAN lang=EN-US> Action 
(</SPAN><SPAN style="FONT-FAMILY: 宋体">打印该数据行</SPAN><SPAN lang=EN-US>). 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中提供下列</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">关系运算符</SPAN><SPAN lang=EN-US>(Relation Operator) 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">运算符</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">含意</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>&gt; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">大于</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>&lt; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">小于</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>&gt;= </SPAN><SPAN 
style="FONT-FAMILY: 宋体">大于或等于</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>&lt;= </SPAN><SPAN 
style="FONT-FAMILY: 宋体">小于或等于</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>== </SPAN><SPAN 
style="FONT-FAMILY: 宋体">等于</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>!= </SPAN><SPAN 
style="FONT-FAMILY: 宋体">不等于</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>~ match </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>!~ not match </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">上列关系运算符除</SPAN><SPAN 
lang=EN-US>~(match)</SPAN><SPAN style="FONT-FAMILY: 宋体">与</SPAN><SPAN 
lang=EN-US>!~(not match)</SPAN><SPAN style="FONT-FAMILY: 宋体">外与</SPAN><SPAN 
lang=EN-US> C </SPAN><SPAN style="FONT-FAMILY: 宋体">语言中之含意一致</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>~(match) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US>!~(match) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">在</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之含意简述如下</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US> A 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为一字符串</SPAN><SPAN lang=EN-US>, B 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为一正则表达式</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>A ~B </SPAN><SPAN 
style="FONT-FAMILY: 宋体">判断</SPAN> <SPAN style="FONT-FAMILY: 宋体">字符串</SPAN><SPAN 
lang=EN-US>A </SPAN><SPAN style="FONT-FAMILY: 宋体">中是否</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">包含</SPAN> <SPAN style="FONT-FAMILY: 宋体">能匹配</SPAN><SPAN 
lang=EN-US>(match)B</SPAN><SPAN style="FONT-FAMILY: 宋体">式样的子字符串</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>A !~B </SPAN><SPAN 
style="FONT-FAMILY: 宋体">判断</SPAN> <SPAN style="FONT-FAMILY: 宋体">字符串</SPAN><SPAN 
lang=EN-US>A </SPAN><SPAN style="FONT-FAMILY: 宋体">中是否</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">未包含</SPAN> <SPAN style="FONT-FAMILY: 宋体">能匹配</SPAN><SPAN 
lang=EN-US>(match)B</SPAN><SPAN style="FONT-FAMILY: 宋体">式样的子字符串</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$0 ~ /program[0-9]+\.c/ { print $0 } </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>$0 ~ /program[0-9]+\.c/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">整个是一个</SPAN><SPAN lang=EN-US> Pattern, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用来判断</SPAN><SPAN lang=EN-US>$0(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">数据行</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中是否含有可</SPAN><SPAN lang=EN-US> match /program[0-9]+\.c/ 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的子字符串</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US>$0 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中含有该类字符串</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则执行</SPAN><SPAN lang=EN-US> print (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">打印该行数据</SPAN><SPAN lang=EN-US>). </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中被用来比对的字符串为</SPAN><SPAN lang=EN-US>$0 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">如本例</SPAN><SPAN lang=EN-US>), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可仅以正则表达式部分表示整个</SPAN><SPAN lang=EN-US>Pattern. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">故本例的</SPAN><SPAN lang=EN-US> 
Pattern </SPAN><SPAN style="FONT-FAMILY: 宋体">部分</SPAN><SPAN lang=EN-US>$0 
~/program[0-9]+\.c/ </SPAN><SPAN style="FONT-FAMILY: 宋体">可仅用</SPAN><SPAN 
lang=EN-US>/program[0-9]+\.c/</SPAN><SPAN style="FONT-FAMILY: 宋体">表之</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">有关匹配及正则表达式请参考</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">附录</SPAN><SPAN lang=EN-US> E ) </SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">正则表达式</SPAN></H2>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">直接使用正则表达式当成</SPAN><SPAN 
lang=EN-US> Pattern; </SPAN><SPAN style="FONT-FAMILY: 宋体">此为</SPAN><SPAN 
lang=EN-US> $0 ~ </SPAN><SPAN style="FONT-FAMILY: 宋体">正则表达式</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">的简写</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">该</SPAN><SPAN lang=EN-US> 
Pattern </SPAN><SPAN style="FONT-FAMILY: 宋体">用以判断</SPAN><SPAN lang=EN-US> 
$0(</SPAN><SPAN style="FONT-FAMILY: 宋体">数据行</SPAN><SPAN lang=EN-US>) 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中是否含有匹配该正则表达式的子字符串</SPAN><SPAN lang=EN-US>; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">若含有该成立</SPAN><SPAN lang=EN-US>(true) 
</SPAN><SPAN style="FONT-FAMILY: 宋体">则执行其对应的</SPAN><SPAN lang=EN-US> Actions. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>/^[0-9]*$/ { print "This line is a integer !" 
}</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> $0 
~/^[0-9]*$/ { print "This line is a integer !" } </SPAN><SPAN 
style="FONT-FAMILY: 宋体">相同</SPAN><SPAN lang=EN-US> </SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">混合</SPAN><SPAN lang=EN-US> Pattern </SPAN></H2>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">之前所介绍的各种</SPAN><SPAN 
lang=EN-US> Patterns, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其计算后结果为一逻辑值</SPAN><SPAN lang=EN-US>(True or False).awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中逻辑值彼此间可通过</SPAN><SPAN 
lang=EN-US>&amp;&amp;(and), ||(or),&nbsp; !(not) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">结合成一个新的逻辑值</SPAN><SPAN lang=EN-US>.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">故不同</SPAN><SPAN lang=EN-US> Patterns </SPAN><SPAN 
style="FONT-FAMILY: 宋体">彼此可通过上述结合符号来结合成一个新的</SPAN><SPAN lang=EN-US> Pattern. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">如此可进行复杂的条件判断</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=a8><SPAN lang=EN-US>FNR &gt;= 23 &amp;&amp; FNR &lt;= 28 { print 
"&nbsp;&nbsp;&nbsp;&nbsp; " $0 } </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">上式利用</SPAN><SPAN 
lang=EN-US>&amp;&amp; (and) </SPAN><SPAN style="FONT-FAMILY: 宋体">将两个</SPAN><SPAN 
lang=EN-US> Pattern </SPAN><SPAN 
style="FONT-FAMILY: 宋体">求值的结果合并成一个逻辑值</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">该式将数据文件中</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">第</SPAN><SPAN lang=EN-US>23</SPAN><SPAN 
style="FONT-FAMILY: 宋体">行</SPAN> <SPAN style="FONT-FAMILY: 宋体">到</SPAN><SPAN 
lang=EN-US> 28</SPAN><SPAN style="FONT-FAMILY: 宋体">行</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">向右移</SPAN><SPAN lang=EN-US>5</SPAN><SPAN 
style="FONT-FAMILY: 宋体">格</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">先输出</SPAN><SPAN lang=EN-US>5</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个空白字符</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">后输出</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>( FNR </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的内建变量</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">请参考</SPAN> <SPAN style="FONT-FAMILY: 宋体">附录</SPAN><SPAN 
lang=EN-US> D ) </SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
lang=EN-US>Pattern1 , Pattern2 </SPAN></H2>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">遇到这种</SPAN><SPAN lang=EN-US> 
Pattern, awk </SPAN><SPAN style="FONT-FAMILY: 宋体">会帮您设立一个</SPAN><SPAN 
lang=EN-US> switch(</SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN 
lang=EN-US>flag). </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">读入的数据行使得</SPAN><SPAN 
lang=EN-US> Pattern1 </SPAN><SPAN style="FONT-FAMILY: 宋体">成立时</SPAN><SPAN 
lang=EN-US>, awk </SPAN><SPAN style="FONT-FAMILY: 宋体">会打开</SPAN><SPAN 
lang=EN-US>(turn on)</SPAN><SPAN style="FONT-FAMILY: 宋体">这</SPAN><SPAN 
lang=EN-US> switch. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">读入的数据行使得</SPAN><SPAN 
lang=EN-US> Pattern2 </SPAN><SPAN style="FONT-FAMILY: 宋体">成立时</SPAN><SPAN 
lang=EN-US>, awk </SPAN><SPAN style="FONT-FAMILY: 宋体">会关上</SPAN><SPAN 
lang=EN-US>(turn off)</SPAN><SPAN style="FONT-FAMILY: 宋体">这个</SPAN><SPAN 
lang=EN-US> switch. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">该</SPAN><SPAN lang=EN-US> 
Pattern </SPAN><SPAN style="FONT-FAMILY: 宋体">成立的条件是</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">当这个</SPAN><SPAN lang=EN-US> 
switch </SPAN><SPAN style="FONT-FAMILY: 宋体">被打开</SPAN><SPAN lang=EN-US>(turn 
on)</SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US> (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">包括</SPAN><SPAN lang=EN-US> Pattern1, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> Pattern2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">成立的情况</SPAN><SPAN lang=EN-US>)</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">例</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=a8><SPAN lang=EN-US>FNR &gt;= 23 &amp;&amp; FNR &lt;= 28 { print 
"&nbsp;&nbsp;&nbsp;&nbsp; " $0 }</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">可改写为</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>FNR == 23 , FNR == 28 { print 
"&nbsp;&nbsp;&nbsp;&nbsp; " $0 } </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">说</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">明</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> FNR 
&gt;= 23 </SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">就</SPAN><SPAN lang=EN-US> turn on 
</SPAN><SPAN style="FONT-FAMILY: 宋体">这个</SPAN><SPAN lang=EN-US> switch; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">因为随着数据行的读入</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">不停的累加</SPAN><SPAN lang=EN-US> FNR. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> FNR = 28 
</SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, Pattern2 (FNR == 
28) </SPAN><SPAN style="FONT-FAMILY: 宋体">便成立</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">这时</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">会关上这个</SPAN><SPAN lang=EN-US> switch. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> 
switch </SPAN><SPAN style="FONT-FAMILY: 宋体">打开的期间</SPAN><SPAN lang=EN-US>, awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">会执行</SPAN><SPAN lang=EN-US>&nbsp; print 
"&nbsp;&nbsp;&nbsp;&nbsp; " $0</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>( FNR </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的内建变量</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">请参考</SPAN> <SPAN style="FONT-FAMILY: 宋体">附录</SPAN><SPAN 
lang=EN-US> D ) </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>13.<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">附录</SPAN><SPAN lang=EN-US> 
B ── Actions </SPAN></H1>
<P class=MsoNormal><SPAN lang=EN-US>Actions </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是由下列指令</SPAN><SPAN lang=EN-US>(statement)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所组成</SPAN><SPAN lang=EN-US> : </SPAN></P>
<UL style="MARGIN-TOP: 0cm" type=disc>
  <LI class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US> 
  ( function calls, assignments..) </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>print </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">表达式列表</SPAN><SPAN lang=EN-US> </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>printf( </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">格式化字符串</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">表达式列表</SPAN><SPAN lang=EN-US>) </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>if( </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US> ) </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US> [else </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US>] </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>while( </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US> ) </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US> </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>do </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US> while( </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US>) </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>for( </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US>; </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US>; </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US>) </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US> </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>for( variable in array) </SPAN><SPAN 
  style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US> </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>delete </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>break </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>continue </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>next </SPAN>
  <LI class=MsoNormal><SPAN lang=EN-US>exit [</SPAN><SPAN 
  style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US>] </SPAN>
  <LI class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US> 
  </SPAN></LI></UL>
<P class=MsoNormal><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中大部分指令与</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中的用法一致</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">此处仅介绍较为常用或容易混淆的指令的用法</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">流程控制指令</SPAN><SPAN lang=EN-US> </SPAN></H2>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>if </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> </SPAN></B></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">语法</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>if (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US>) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US>1 [else </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US>2 ] </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>if( $1 &gt; 25 ) </SPAN></P>
<P class=a8><SPAN lang=EN-US>print "The 1st field is larger than 25" </SPAN></P>
<P class=a8><SPAN lang=EN-US>else print "The 1st field is not larger than 25" 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(a)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中相同</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若</SPAN> <SPAN style="FONT-FAMILY: 宋体">表达式</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">计算</SPAN><SPAN lang=EN-US>(evaluate)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">后之值不为</SPAN><SPAN lang=EN-US> 0 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或空字符串</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则执行</SPAN> <SPAN style="FONT-FAMILY: 宋体">语句</SPAN><SPAN 
lang=EN-US>1; </SPAN><SPAN style="FONT-FAMILY: 宋体">否则执行</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US>2. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(b)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">进行逻辑判断的表达式所返回的值有两种</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若最后的逻辑值为</SPAN><SPAN lang=EN-US>true, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则返回</SPAN><SPAN lang=EN-US>1, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">否则返回</SPAN><SPAN lang=EN-US>0. </SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>(c)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">语法中</SPAN><SPAN lang=EN-US>else </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US>2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US>[ ] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">前后括住表示该部分可视需要而予加入或省略</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>while </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">语法</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>while( </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US> ) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US> </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>while( match(buffer,/[0-9]+\.c/ ) ){ </SPAN></P>
<P class=a8><SPAN lang=EN-US>print "Find :" substr( buffer,RSTART, RLENGTH) 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>buff = substr( buffer, RSTART + RLENGTH) 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">上列范例找出</SPAN><SPAN lang=EN-US> 
buffer </SPAN><SPAN style="FONT-FAMILY: 宋体">中所有能匹配</SPAN><SPAN lang=EN-US> 
/[0-9]+.c/(</SPAN><SPAN style="FONT-FAMILY: 宋体">数字之后接上</SPAN><SPAN lang=EN-US> 
".c"</SPAN><SPAN style="FONT-FAMILY: 宋体">的所有子字符串</SPAN><SPAN lang=EN-US>). 
</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">范例中</SPAN><SPAN lang=EN-US> 
while </SPAN><SPAN style="FONT-FAMILY: 宋体">以函数</SPAN><SPAN lang=EN-US> match( 
)</SPAN><SPAN style="FONT-FAMILY: 宋体">所返回的值做为判断条件</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US>buffer 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中还含有匹配指定条件的子字符串</SPAN><SPAN 
lang=EN-US>(match</SPAN><SPAN style="FONT-FAMILY: 宋体">成功</SPAN><SPAN 
lang=EN-US>), </SPAN><SPAN style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US> 
match()</SPAN><SPAN style="FONT-FAMILY: 宋体">函数返回</SPAN><SPAN lang=EN-US>1,while 
</SPAN><SPAN style="FONT-FAMILY: 宋体">将持续进行其后的语句</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>do-while </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> </SPAN></B></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">语法</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoNormal><SPAN lang=EN-US>do </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语句</SPAN><SPAN lang=EN-US> while(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表达式</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>do{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>print "Enter y or n ! " </SPAN></P>
<P class=a8><SPAN lang=EN-US>getline data</SPAN></P>
<P class=a8><SPAN lang=EN-US>} while( data !~ /^[YyNn]$/)</SPAN></P>
<P class=a8><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoBodyText><SPAN lang=EN-US>(a) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">上例要求用户从键盘上输入一个字符</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若该字符不是</SPAN><SPAN lang=EN-US>Y, y, N, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> n</SPAN><SPAN 
style="FONT-FAMILY: 宋体">则会不停执行该循环</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">直到读取正确字符为止</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(b)do-while </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令与</SPAN><SPAN lang=EN-US> while </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">最大的差异是</SPAN><SPAN lang=EN-US> : do-while </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令会先执行</SPAN><SPAN lang=EN-US>statement</SPAN><SPAN 
style="FONT-FAMILY: 宋体">而后再判断是否应继续执行</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所以</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">无论如何其</SPAN><SPAN lang=EN-US> statement </SPAN><SPAN 
style="FONT-FAMILY: 宋体">部分至少会执行一次</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>for Statement </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>(</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">一</SPAN><SPAN lang=EN-US>) </SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">语法</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>for(variable in&nbsp; array ) 
statement</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">执行下列命令</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk '</SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN{</SPAN></P>
<P class=a8><SPAN lang=EN-US>X[1]= 50; X[2]= 60; X["last"]= 70</SPAN></P>
<P class=a8><SPAN lang=EN-US>for( any in X )</SPAN></P>
<P class=a8><SPAN lang=EN-US>printf("X[%s] = %d\n", any, X[any] )</SPAN></P>
<P class=a8><SPAN lang=EN-US>}'</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">结果输出</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=a8><SPAN lang=EN-US>X[last] = 70 </SPAN></P>
<P class=a8><SPAN lang=EN-US>X[1] = 50 </SPAN></P>
<P class=a8><SPAN lang=EN-US>X[2] = 60 </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(a)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">这个</SPAN><SPAN lang=EN-US> for </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">专用以查找数组中所有的下标值</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并依次使用所指定的变量予以记录</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">以本例而言</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">变量</SPAN><SPAN lang=EN-US> any </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将逐次代表</SPAN><SPAN lang=EN-US> "last", 1 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">及</SPAN><SPAN lang=EN-US>2 .</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(b)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">以这个</SPAN><SPAN lang=EN-US> for </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所查找出的下标之值彼此间并无任何次续关系</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(c)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">第</SPAN><SPAN lang=EN-US>5</SPAN><SPAN 
style="FONT-FAMILY: 宋体">节中有该指令的使用范例</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">及解说</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>for Statement </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>(</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">二</SPAN><SPAN lang=EN-US>)</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">语法</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>for(expression1; expression2; expression3) 
statement&nbsp; </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=a8><SPAN lang=EN-US>for(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">ｉ</SPAN><SPAN lang=EN-US>=1; i&lt; =10; i++)&nbsp; sum = 
sum + i</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">说明</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(a)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">上列范例用以计算</SPAN><SPAN lang=EN-US> 1 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">加到</SPAN><SPAN lang=EN-US> 10 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的总和</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(b)expression1&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">常用于设定该</SPAN><SPAN lang=EN-US> for </SPAN><SPAN 
style="FONT-FAMILY: 宋体">循环的起始条件</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如上例中的</SPAN><SPAN lang=EN-US> i=1</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp; expression2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用于设定该循环的停止条件</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如上例中的</SPAN><SPAN lang=EN-US> i &lt;= 10</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp; expression3 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">常用于改变</SPAN><SPAN lang=EN-US> counter </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如上例中的</SPAN><SPAN lang=EN-US> i++</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>break </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>break </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令用以强迫中断</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">跳离</SPAN><SPAN lang=EN-US>) for, while, do-while 
</SPAN><SPAN style="FONT-FAMILY: 宋体">等循环</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=a8><SPAN lang=EN-US>while(&nbsp; getline &lt; "datafile" &gt; 0 
)</SPAN></P>
<P class=a8><SPAN lang=EN-US>{</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; if( $1 == 0 )</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
break</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; else</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print $2 
/ $1</SPAN></P>
<P class=a8><SPAN lang=EN-US>}</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">上例中</SPAN><SPAN lang=EN-US>, 
awk </SPAN><SPAN style="FONT-FAMILY: 宋体">不断地从文件</SPAN><SPAN lang=EN-US> datafile 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中读取资料</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US>$1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">等于</SPAN><SPAN lang=EN-US>0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">就停止该执行循环</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>continue </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">循环中的</SPAN><SPAN lang=EN-US> 
statement </SPAN><SPAN style="FONT-FAMILY: 宋体">进行到一半时</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> continue 
</SPAN><SPAN style="FONT-FAMILY: 宋体">指令来略过循环中尚未执行的</SPAN><SPAN 
lang=EN-US>statement.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=a8><SPAN lang=EN-US>for( index in X_array)</SPAN></P>
<P class=a8><SPAN lang=EN-US>{</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; if( index !~ /[0-9]+/ )&nbsp; 
continue</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; print "There is a digital 
index", index</SPAN></P>
<P class=a8><SPAN lang=EN-US>}</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">上例中若</SPAN><SPAN lang=EN-US> 
index </SPAN><SPAN style="FONT-FAMILY: 宋体">不为数字则执行</SPAN><SPAN lang=EN-US> 
continue, </SPAN><SPAN style="FONT-FAMILY: 宋体">故将略过</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">不执行</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">其后的指令</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">需留心</SPAN><SPAN lang=EN-US> 
continue </SPAN><SPAN style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> break 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的差异</SPAN><SPAN lang=EN-US> : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> continue </SPAN><SPAN 
style="FONT-FAMILY: 宋体">只是掠过其后未执行的</SPAN><SPAN lang=EN-US>statement, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">但并未跳离开该循环</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>next </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> 
next </SPAN><SPAN style="FONT-FAMILY: 宋体">指令时</SPAN><SPAN lang=EN-US>, awk 
</SPAN><SPAN style="FONT-FAMILY: 宋体">将掠过位于该指令</SPAN><SPAN 
lang=EN-US>(next)</SPAN><SPAN style="FONT-FAMILY: 宋体">之后的所有指令</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">包括其后的所有</SPAN><SPAN 
lang=EN-US>Pattern { Actions }), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">接著读取下一笔数据行</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">继续从第一个</SPAN><SPAN lang=EN-US> Pattern {Actions} 
</SPAN><SPAN style="FONT-FAMILY: 宋体">执行起</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范例</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=a8><SPAN lang=EN-US>/^[ \t]*$/&nbsp; {&nbsp; print "This is a blank 
line! Do nothing here !"</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; next</SPAN></P>
<P class=a8><SPAN lang=EN-US>}</SPAN></P>
<P class=a8><SPAN lang=EN-US>$2 != 0 { print $1, $1/$2 }</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">上例中</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">读入的数据行为空白行时</SPAN><SPAN lang=EN-US>( match /^[ \]*$/ 
),</SPAN><SPAN style="FONT-FAMILY: 宋体">除打印消息外只执行</SPAN><SPAN lang=EN-US> next, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">故</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将略过其后的指令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">继续读取下一笔资料</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">从头</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">第一个</SPAN><SPAN lang=EN-US> Pattern { Actions 
})</SPAN><SPAN style="FONT-FAMILY: 宋体">执行起</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>exit </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">执行</SPAN><SPAN lang=EN-US> 
exit </SPAN><SPAN style="FONT-FAMILY: 宋体">指令时</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">将立刻跳离</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">停止执行</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">该</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程序</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">中的</SPAN> <SPAN lang=EN-US>I/O 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">指令</SPAN><SPAN lang=EN-US> 
</SPAN></H2>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>printf </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">该指令与</SPAN><SPAN lang=EN-US> 
C </SPAN><SPAN style="FONT-FAMILY: 宋体">语言中的用法相同</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">可借由该指令控制资料输出时的格式</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">语法</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>printf("format", item1, item2,.. 
)</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">例</SPAN><SPAN lang=EN-US> :</SPAN></P>
<P class=a8><SPAN lang=EN-US>id = "BE-2647";&nbsp; ave = 89</SPAN></P>
<P class=a8><SPAN lang=EN-US>printf("ID# : %s&nbsp;&nbsp; Ave Score : %d\n", id, 
ave) </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(a)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">结果印出</SPAN><SPAN lang=EN-US> :</SPAN></P>
<P class=a8><SPAN lang=EN-US>ID# : BE-2647&nbsp;&nbsp; Ave Score : 89</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(b)format </SPAN><SPAN 
style="FONT-FAMILY: 宋体">部分是由</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">一般的字串</SPAN><SPAN lang=EN-US>(String Constant) 
</SPAN><SPAN style="FONT-FAMILY: 宋体">及</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">格式控制字符</SPAN><SPAN lang=EN-US>(Formatcontrol letter, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">其前会加上一个</SPAN><SPAN 
lang=EN-US>%</SPAN><SPAN style="FONT-FAMILY: 宋体">字符</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">所构成</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">以上式为例</SPAN><SPAN lang=EN-US>"ID# : " 
</SPAN><SPAN style="FONT-FAMILY: 宋体">及</SPAN><SPAN lang=EN-US> "&nbsp; Ave Score 
: " </SPAN><SPAN style="FONT-FAMILY: 宋体">为一般字串</SPAN><SPAN lang=EN-US>. %s 
</SPAN><SPAN style="FONT-FAMILY: 宋体">及</SPAN><SPAN lang=EN-US> %d </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为格式控制字符</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(c)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">打印时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">一般字串将被原封不动地打印出来</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">遇到格式控制字符时</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">则依序把</SPAN><SPAN lang=EN-US> format</SPAN><SPAN 
style="FONT-FAMILY: 宋体">后方之</SPAN><SPAN lang=EN-US> item </SPAN><SPAN 
style="FONT-FAMILY: 宋体">转换成所指定的格式后进行打印</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(d)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">有关的细节</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">读者可从介绍</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言的书籍上得到较完整的介绍</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(e)print </SPAN><SPAN 
style="FONT-FAMILY: 宋体">及</SPAN><SPAN lang=EN-US> printf </SPAN><SPAN 
style="FONT-FAMILY: 宋体">两个指令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其后可使用</SPAN><SPAN lang=EN-US> &gt; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> &gt;&gt; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将输出到</SPAN><SPAN lang=EN-US>stdout </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的数据重定向到其它文件</SPAN><SPAN lang=EN-US>, 7.1 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">节中有完整的</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>print </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">例</SPAN><SPAN lang=EN-US> :</SPAN></P>
<P class=a8><SPAN lang=EN-US>id = "BE-267";&nbsp; ave = 89</SPAN></P>
<P class=a8><SPAN lang=EN-US>print "ID# :", id, "Ave Score :"ave</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(a)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">结果印出</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=a8><SPAN lang=EN-US>ID# : BE-267 Ave Score :89</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(b)print </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之后可接上字串常数</SPAN><SPAN lang=EN-US>(Constant 
String)</SPAN><SPAN style="FONT-FAMILY: 宋体">或变量</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">它们彼此间可用</SPAN><SPAN lang=EN-US>"," 
</SPAN><SPAN style="FONT-FAMILY: 宋体">隔开</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(c)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">上式中</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">字串</SPAN><SPAN lang=EN-US> "ID# :" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与变量</SPAN><SPAN lang=EN-US> id </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之间使用</SPAN><SPAN lang=EN-US>","</SPAN><SPAN 
style="FONT-FAMILY: 宋体">隔开</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">打印时两者之间会以自动</SPAN><SPAN lang=EN-US> OFS(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">请参考</SPAN> <SPAN style="FONT-FAMILY: 宋体">附录</SPAN><SPAN 
lang=EN-US>D </SPAN><SPAN style="FONT-FAMILY: 宋体">冉ū淞</SPAN><SPAN lang=EN-US> 
OFS) </SPAN><SPAN style="FONT-FAMILY: 宋体">隔开</SPAN><SPAN lang=EN-US>. OFS 
</SPAN><SPAN style="FONT-FAMILY: 宋体">之值一般榷ㄎ</SPAN><SPAN lang=EN-US> 
"</SPAN><SPAN style="FONT-FAMILY: 宋体">一个空格</SPAN><SPAN lang=EN-US>"</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(d)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">上式中</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">字串</SPAN><SPAN lang=EN-US> "Ave Score :" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与变量</SPAN><SPAN lang=EN-US>ave</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之间并未以</SPAN><SPAN lang=EN-US>","</SPAN><SPAN 
style="FONT-FAMILY: 宋体">隔开</SPAN><SPAN lang=EN-US>, awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">会将这两者先当成字串</SPAN><SPAN lang=EN-US>concate</SPAN><SPAN 
style="FONT-FAMILY: 宋体">在一起</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">变成</SPAN><SPAN lang=EN-US>"Ave Score :89")</SPAN><SPAN 
style="FONT-FAMILY: 宋体">后</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">再予打印</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>getline </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">语法</SPAN></P>
<TABLE class=MsoNormalTable style="MARGIN-LEFT: 6pt; BORDER-COLLAPSE: collapse" 
cellSpacing=0 cellPadding=0 border=0>
  <TBODY>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: black 1pt solid; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 113.35pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=151>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">语法</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: black 1pt solid; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 110pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=147>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">由何处读取数据</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: black 1pt solid; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 250pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=333>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">数据读入后置于</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 113.35pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=151>
      <P class=MsoNormal><SPAN lang=EN-US>getline var &lt; file</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 110pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=147>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">所指定的</SPAN><SPAN 
      lang=EN-US> file</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 250pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=333>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">变量</SPAN><SPAN 
      lang=EN-US> var(var</SPAN><SPAN style="FONT-FAMILY: 宋体">省略时</SPAN><SPAN 
      lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">表示置于</SPAN><SPAN 
      lang=EN-US>$0)</SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 113.35pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=151>
      <P class=MsoNormal><SPAN lang=EN-US>getline var</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 110pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=147>
      <P class=MsoNormal><SPAN lang=EN-US>pipe </SPAN><SPAN 
      style="FONT-FAMILY: 宋体">变量</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 250pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=333>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">变量</SPAN><SPAN 
      lang=EN-US> var(var</SPAN><SPAN style="FONT-FAMILY: 宋体">省略时</SPAN><SPAN 
      lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">表示置于</SPAN><SPAN 
      lang=EN-US>$0) </SPAN></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 113.35pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=151>
      <P class=MsoNormal><SPAN lang=EN-US>getline var</SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: medium none; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 110pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=147>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">见</SPAN> <SPAN 
      style="FONT-FAMILY: 宋体">注一</SPAN><SPAN lang=EN-US> </SPAN></P></TD>
    <TD 
    style="BORDER-RIGHT: black 1pt solid; PADDING-RIGHT: 2.75pt; BORDER-TOP: medium none; PADDING-LEFT: 2.75pt; PADDING-BOTTOM: 2.75pt; BORDER-LEFT: black 1pt solid; WIDTH: 250pt; PADDING-TOP: 2.75pt; BORDER-BOTTOM: black 1pt solid" 
    vAlign=top width=333>
      <P class=MsoNormal><SPAN style="FONT-FAMILY: 宋体">变量</SPAN><SPAN 
      lang=EN-US> var(var</SPAN><SPAN style="FONT-FAMILY: 宋体">省略时</SPAN><SPAN 
      lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">表示置于</SPAN><SPAN 
      lang=EN-US>$0) </SPAN></P></TD></TR></TBODY></TABLE>
<P class=MsoBodyText><SPAN lang=EN-US>getline </SPAN><SPAN 
style="FONT-FAMILY: 宋体">一次读取一行资料</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若读取成功则</SPAN><SPAN lang=EN-US>return 1,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">若读取失败则</SPAN><SPAN lang=EN-US>return -1, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若遇到文件结束</SPAN><SPAN lang=EN-US>(EOF), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US>return 0</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>close&nbsp; </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">该指令用以关闭一个打开的文件</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> pipe 
(</SPAN><SPAN style="FONT-FAMILY: 宋体">见下例</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">例</SPAN><SPAN lang=EN-US> :</SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN {&nbsp; print "ID #&nbsp;&nbsp; Salary" &gt; 
"data.rpt" }&nbsp;&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>{&nbsp; print $1 , $2 * $3&nbsp; | "sort -k 1 &gt; 
data.rpt" }&nbsp;&nbsp;&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>END{&nbsp; close( "data.rpt" )</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; close( "sort -k 1 &gt; data.rpt" 
)</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; print " There are", NR, "records 
processed."</SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">说</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">明</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(a)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">上例中</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">一开始执行</SPAN><SPAN lang=EN-US> print "ID #&nbsp;&nbsp; 
Salary" &gt; "data.rpt" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令来输出一行抬头</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">它使用</SPAN><SPAN lang=EN-US> I/O Redirection ( &gt; 
)</SPAN><SPAN style="FONT-FAMILY: 宋体">将数据转输出到</SPAN><SPAN 
lang=EN-US>data.rpt,</SPAN><SPAN style="FONT-FAMILY: 宋体">故此时文件</SPAN><SPAN 
lang=EN-US> data.rpt </SPAN><SPAN style="FONT-FAMILY: 宋体">是处於</SPAN><SPAN 
lang=EN-US> Open </SPAN><SPAN style="FONT-FAMILY: 宋体">状态</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(b)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US> print $1, $2 * $3 
</SPAN><SPAN style="FONT-FAMILY: 宋体">不停的将输出的资料送往</SPAN><SPAN lang=EN-US> 
pipe(|), awk</SPAN><SPAN style="FONT-FAMILY: 宋体">在程序将结束时才会呼叫</SPAN><SPAN 
lang=EN-US> shell </SPAN><SPAN style="FONT-FAMILY: 宋体">使用指令</SPAN><SPAN 
lang=EN-US> "sort -k 1 &gt; data.rpt" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">来处理</SPAN><SPAN lang=EN-US> pipe </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中的数据</SPAN><SPAN lang=EN-US>; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并未立即执行</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这点与</SPAN><SPAN lang=EN-US> Unix </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>pipe</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的用法不尽相同</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(c)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">最后希望於文件</SPAN><SPAN lang=EN-US> data.rpt </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的末尾处加上一行</SPAN><SPAN lang=EN-US> "There 
are.....".</SPAN><SPAN style="FONT-FAMILY: 宋体">但此时</SPAN><SPAN lang=EN-US>, 
Shell</SPAN><SPAN style="FONT-FAMILY: 宋体">尚未执行</SPAN><SPAN lang=EN-US> "sort -k 
1 &gt; data.rpt" </SPAN><SPAN style="FONT-FAMILY: 宋体">故各数据行排序后的</SPAN><SPAN 
lang=EN-US> ID </SPAN><SPAN style="FONT-FAMILY: 宋体">及</SPAN><SPAN lang=EN-US> 
Salary </SPAN><SPAN style="FONT-FAMILY: 宋体">等数据尚未写入</SPAN><SPAN 
lang=EN-US>data.rpt. </SPAN><SPAN style="FONT-FAMILY: 宋体">所以得命令</SPAN><SPAN 
lang=EN-US> awk </SPAN><SPAN style="FONT-FAMILY: 宋体">提前先通知</SPAN><SPAN 
lang=EN-US> Shell </SPAN><SPAN style="FONT-FAMILY: 宋体">执行命令</SPAN><SPAN 
lang=EN-US> "sort -k 1 &gt; data.rpt" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">来处理</SPAN><SPAN lang=EN-US> pipe </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中的资料</SPAN><SPAN lang=EN-US>. awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中这个动作称为</SPAN><SPAN lang=EN-US> close pipe. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是由执行</SPAN><SPAN lang=EN-US> close ( "shell command" 
)</SPAN><SPAN style="FONT-FAMILY: 宋体">来完成</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">需留心</SPAN><SPAN lang=EN-US> close( )</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令中的</SPAN><SPAN lang=EN-US> shell command </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">需与</SPAN><SPAN 
lang=EN-US>"|"</SPAN><SPAN style="FONT-FAMILY: 宋体">后方的</SPAN><SPAN lang=EN-US> 
shell command </SPAN><SPAN style="FONT-FAMILY: 宋体">完全相同</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">一字不差</SPAN><SPAN lang=EN-US>), 
</SPAN><SPAN style="FONT-FAMILY: 宋体">较佳的方法是先以该字串定义一个简短的变量</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">程序中再以此变量代替该</SPAN><SPAN 
lang=EN-US>shell command&nbsp;&nbsp; </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(d)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为什么执行</SPAN><SPAN lang=EN-US> close("data.rpt") ?&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">因为</SPAN><SPAN lang=EN-US> sort 
</SPAN><SPAN style="FONT-FAMILY: 宋体">完后的资料也将写到</SPAN><SPAN 
lang=EN-US>data.rpt,</SPAN><SPAN style="FONT-FAMILY: 宋体">而该文件正为</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">所打开使用</SPAN><SPAN 
lang=EN-US>(write)</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">故</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程式中应先关闭</SPAN><SPAN 
lang=EN-US>data.rpt. </SPAN><SPAN style="FONT-FAMILY: 宋体">以免造成因二个</SPAN><SPAN 
lang=EN-US> processes </SPAN><SPAN 
style="FONT-FAMILY: 宋体">同时打开一个文件进行输出</SPAN><SPAN lang=EN-US>(write)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所产生的错误</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>system </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">该指令用以执行</SPAN><SPAN 
lang=EN-US> Shell</SPAN><SPAN style="FONT-FAMILY: 宋体">上的</SPAN><SPAN lang=EN-US> 
command.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">例</SPAN><SPAN lang=EN-US> :</SPAN></P>
<P class=a8><SPAN lang=EN-US>DataFile = "invent.rpt"</SPAN></P>
<P class=a8><SPAN lang=EN-US>system( "rm " DataFile )&nbsp; </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">说明</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(a)system("</SPAN><SPAN 
style="FONT-FAMILY: 宋体">字符串</SPAN><SPAN lang=EN-US>")</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令接受一个字符串当成</SPAN><SPAN lang=EN-US>Shell</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的命令</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">上例中</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用一个字串常数</SPAN><SPAN lang=EN-US>"rm " </SPAN><SPAN 
style="FONT-FAMILY: 宋体">连接</SPAN><SPAN lang=EN-US>(concate)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">一个变量</SPAN><SPAN lang=EN-US> DataFile </SPAN><SPAN 
style="FONT-FAMILY: 宋体">形成要求</SPAN><SPAN lang=EN-US> Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行的命令</SPAN><SPAN lang=EN-US>.Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">实际执行的命令为</SPAN><SPAN lang=EN-US> "rm invent.rpt".&nbsp; 
</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>"|" pipe</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>"|" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">配合</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">输出指令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可把</SPAN><SPAN lang=EN-US> output </SPAN><SPAN 
style="FONT-FAMILY: 宋体">到</SPAN><SPAN lang=EN-US> stdout </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的资料继续转送给</SPAN><SPAN lang=EN-US>Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">上的某一命令当成</SPAN><SPAN lang=EN-US>input</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的资料</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>"|"&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">配合</SPAN><SPAN lang=EN-US> awk getline </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可呼叫</SPAN><SPAN lang=EN-US> Shell </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行某一命令</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">再以</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US> getline </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令将该命令的所产生的资料读进</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程序中</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">例</SPAN><SPAN lang=EN-US> :</SPAN></P>
<P class=a8><SPAN lang=EN-US>{ print $1, $2 * $3&nbsp; | "sort -k 1 &gt; result" 
}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>"date" |&nbsp; getline&nbsp; Date_data</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">读者请参考</SPAN><SPAN 
lang=EN-US>7.2 </SPAN><SPAN style="FONT-FAMILY: 宋体">节</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">其中有完整的范例说明</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">释放所占用的记忆体的指令</SPAN><SPAN 
lang=EN-US> </SPAN></H2>
<P class=MsoBodyText><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">程式中常使用数组</SPAN><SPAN lang=EN-US>(Array)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">来记忆大量数据</SPAN><SPAN lang=EN-US>, delete </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令便是用来释放数组中的元素所占用的内存空间</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">范</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">例</SPAN><SPAN lang=EN-US> :</SPAN></P>
<P class=a8><SPAN lang=EN-US>for( any in X_arr )&nbsp; </SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; delete X_arr[any]</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">读者请留心</SPAN><SPAN 
lang=EN-US>, delete </SPAN><SPAN 
style="FONT-FAMILY: 宋体">指令一次只能释放数组中的一个元素</SPAN><SPAN lang=EN-US>.</SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">中的数学运算符</SPAN><SPAN 
lang=EN-US>(Arithmetic Operators)</SPAN></H2>
<P class=MsoBodyText><SPAN lang=EN-US>+(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">加</SPAN><SPAN lang=EN-US>), -(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">p</SPAN><SPAN lang=EN-US>), *(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">乘</SPAN><SPAN lang=EN-US>), /(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">除</SPAN><SPAN lang=EN-US>), %(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">求余数</SPAN><SPAN lang=EN-US>), ^(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指数</SPAN><SPAN lang=EN-US>) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> C </SPAN><SPAN 
style="FONT-FAMILY: 宋体">语言中用法相同</SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">中的赋值运算符</SPAN><SPAN 
lang=EN-US>(Assignment Operators)</SPAN></H2>
<P class=MsoBodyText><SPAN lang=EN-US>=, +=, -=, *= , /=, %=, ^= </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>x += 5 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的意思为</SPAN><SPAN lang=EN-US> x = x + 5, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其余类推</SPAN><SPAN lang=EN-US>.</SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">中的条件运算符</SPAN><SPAN 
lang=EN-US>(Conditional&nbsp; Operator)</SPAN></H2>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">语</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">法</SPAN><SPAN lang=EN-US> :</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">判断条件</SPAN><SPAN lang=EN-US> 
? value1 : value2</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">若</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">判断条件</SPAN> <SPAN style="FONT-FAMILY: 宋体">成立</SPAN><SPAN 
lang=EN-US>(true) </SPAN><SPAN style="FONT-FAMILY: 宋体">则返回</SPAN><SPAN 
lang=EN-US> value1, </SPAN><SPAN style="FONT-FAMILY: 宋体">否则返回</SPAN><SPAN 
lang=EN-US> value2. </SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">中的逻辑运算符</SPAN><SPAN 
lang=EN-US>(Logical Operators) </SPAN></H2>
<P class=MsoBodyText><SPAN lang=EN-US>&amp;&amp;( and ), ||(or), 
!(not)</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Extended Regular Expression </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中使用</SPAN><SPAN lang=EN-US> "|" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示</SPAN><SPAN lang=EN-US> or </SPAN><SPAN 
style="FONT-FAMILY: 宋体">请勿混淆</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">中的关系运算符</SPAN><SPAN 
lang=EN-US>(Relational Operators)</SPAN></H2>
<P class=MsoBodyText><SPAN lang=EN-US>&gt;, &gt;=, &lt;, &lt; =, ==, !=, ~, 
!~</SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">中其它的运算符</SPAN></H2>
<P class=MsoBodyText><SPAN lang=EN-US>+(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">正号</SPAN><SPAN lang=EN-US>), -(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">负号</SPAN><SPAN lang=EN-US>),&nbsp; ++(Increment 
Operator), - -(Decrement Operator) </SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN lang=EN-US>awk 
</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">中各运算符的运算级</SPAN></H2>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">按优先高低排列</SPAN><SPAN 
lang=EN-US>:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; 
$&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">栏位运算元</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : i=3; $i</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示第</SPAN><SPAN lang=EN-US>3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">栏</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; 
^&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指数运算</SPAN><SPAN lang=EN-US>) </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; + ,- ,! (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">正</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">负号</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">及逻辑上的</SPAN><SPAN lang=EN-US> not) </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; * ,/ ,% (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">乘</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">除</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">余数</SPAN><SPAN lang=EN-US>)</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; + ,-&nbsp;&nbsp;&nbsp; 
(</SPAN><SPAN style="FONT-FAMILY: 宋体">加</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">p</SPAN><SPAN lang=EN-US>)&nbsp; </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; &gt;, &gt;&nbsp; =,&lt; 
, &lt; =, ==, != (</SPAN><SPAN style="FONT-FAMILY: 宋体">关系运算符</SPAN><SPAN 
lang=EN-US>)</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; ~, !~&nbsp;&nbsp; 
(match, not match)</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; 
&amp;&amp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">逻辑上的</SPAN><SPAN lang=EN-US> and)</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; 
||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">逻辑上的</SPAN><SPAN lang=EN-US> or )</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; ? 
:&nbsp;&nbsp;&nbsp;&nbsp; (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">条件运算符</SPAN><SPAN lang=EN-US>)</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; = , +=, -=,*=, /=, %=, 
^= (</SPAN><SPAN style="FONT-FAMILY: 宋体">赋值运算符</SPAN><SPAN 
lang=EN-US>)</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US></SPAN>&nbsp;</P>
<H1><SPAN lang=EN-US>14.<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">附录</SPAN><SPAN lang=EN-US>C 
── awk </SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">的冉ê数</SPAN><SPAN 
lang=EN-US>(Built-in Functions)</SPAN></H1>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">一</SPAN><SPAN 
lang=EN-US>). </SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">字串函数</SPAN></H2>
<P class=MsoBodyText><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>index( </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">原字串</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">找寻的子字串</SPAN> <SPAN lang=EN-US>): </SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">若原字串中含有欲找寻的子字串</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">则返回该子字串在原字串中第一次出现的位置</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">若未曾出现该子字串则返回</SPAN><SPAN 
lang=EN-US>0.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如执行</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk&nbsp; 'BEGIN{ print index("8-12-94","-") 
}'</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">结果印出</SPAN></P>
<P class=a8><SPAN lang=EN-US>2</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp; </SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>length( </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">字串</SPAN> <SPAN lang=EN-US>) : </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">返回该字串的长度</SPAN><SPAN lang=EN-US>. </SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如执行</SPAN><SPAN lang=EN-US> 
:</SPAN><SPAN style="FONT-FAMILY: 宋体">　　</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk&nbsp; 'BEGIN { print length("John") 
'}</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">结果印出</SPAN></P>
<P class=a8><SPAN lang=EN-US>4</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>match( </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">原字串</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">用以找寻比对的正则表达式</SPAN> <SPAN lang=EN-US>):</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">会在原字串中找寻合乎正则表达式的子字串</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">若合乎条件的子字串有多个</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">则以原字串中最左方的子字串为准</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">找到该字串后会依此字串为依据进行下列动作</SPAN><SPAN lang=EN-US>:</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">设定</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">冉ū淞</SPAN><SPAN lang=EN-US> 
RSTART, RLENGTH :</SPAN></P>
<P class=MsoBodyText><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RSTART =&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">合条件的子字串在原字串中的位置</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
=&nbsp; 0 ; </SPAN><SPAN style="FONT-FAMILY: 宋体">若未找到合条件的子字串</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RLENGTH = 
</SPAN><SPAN style="FONT-FAMILY: 宋体">合条件的子字串长度</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 
-1 ; </SPAN><SPAN style="FONT-FAMILY: 宋体">若未找到合条件的子字串</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">返回</SPAN><SPAN lang=EN-US> 
RSTART </SPAN><SPAN style="FONT-FAMILY: 宋体">之值</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如执行</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk ' BEGIN {</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; match( "banana", /(an)+/ 
)</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; print RSTART, RLENGTH</SPAN></P>
<P class=a8><SPAN lang=EN-US>} '&nbsp;&nbsp;&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">　　　</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">执行结果输出</SPAN></P>
<P class=a8><SPAN lang=EN-US>2 4</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>split( </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">原字串</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">数组名称</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">分隔字符</SPAN> <SPAN lang=EN-US>):</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将依所指定的分隔字符</SPAN><SPAN lang=EN-US>(field 
separator)</SPAN><SPAN style="FONT-FAMILY: 宋体">来分隔原字串成一个个的栏位</SPAN><SPAN 
lang=EN-US>(field),</SPAN><SPAN 
style="FONT-FAMILY: 宋体">并以指定的数组记录各个被分隔的栏位</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=a8><SPAN lang=EN-US>ArgLst = "5P12p89"</SPAN></P>
<P class=a8><SPAN lang=EN-US>split( ArgLst, Arr, /[Pp]/)</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">执行后</SPAN><SPAN lang=EN-US> : Arr[1]=5,&nbsp; 
Arr[2]=12,&nbsp; Arr[3]=89</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>sprintf(</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">格式字符串</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">项</SPAN><SPAN lang=EN-US>1, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">项</SPAN><SPAN lang=EN-US>2, ...)</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">该函数的用法与</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN 
lang=EN-US>C</SPAN><SPAN style="FONT-FAMILY: 宋体">的输出函数</SPAN><SPAN 
lang=EN-US>printf()</SPAN><SPAN style="FONT-FAMILY: 宋体">相同</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">所不同的是</SPAN><SPAN 
lang=EN-US>sprintf()</SPAN><SPAN 
style="FONT-FAMILY: 宋体">会将要求印出的结果当成一个字串返回</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">一般最常使用</SPAN><SPAN lang=EN-US>sprintf()</SPAN><SPAN 
style="FONT-FAMILY: 宋体">来改变资料格式</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US>: x </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为一数值资料</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若欲将其变成一个含二位小数的资料</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">可执行如下指令</SPAN><SPAN lang=EN-US>:</SPAN></P>
<P class=a8><SPAN lang=EN-US>x = 28</SPAN></P>
<P class=a8><SPAN lang=EN-US>x = sprintf("%.2f",x)</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">执行后</SPAN><SPAN lang=EN-US> x 
= "28.00"</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>sub( </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">比对用的正则表达式</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">将替Q的新字串</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">原字串</SPAN> <SPAN lang=EN-US>)</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>sub( )</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将原字串中第一个</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">最左边</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">合乎所指定的正则表达式的子字串改以新字串取代</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">第二个参数</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">将替Q的新字串</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">中可用</SPAN><SPAN 
lang=EN-US>"&amp;"</SPAN><SPAN style="FONT-FAMILY: 宋体">来代表</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">合於条件的子字串</SPAN><SPAN 
lang=EN-US>"</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">承上例</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">执行下列指令</SPAN><SPAN 
lang=EN-US>:</SPAN></P>
<P class=a8><SPAN lang=EN-US>A = "a6b12anan212.45an6a"</SPAN></P>
<P class=a8><SPAN lang=EN-US>sub( /(an)+[0-9]*/, "[&amp;]", A)</SPAN></P>
<P class=a8><SPAN lang=EN-US>print A</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">结果输出</SPAN></P>
<P class=a8><SPAN lang=EN-US>ab12[anan212].45an6a</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>sub()</SPAN><SPAN 
style="FONT-FAMILY: 宋体">不仅可执行替换</SPAN><SPAN lang=EN-US>(replacement)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的功用</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">当第二个参数为空字串</SPAN><SPAN lang=EN-US>("")</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>,sub()</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所执行的是</SPAN><SPAN lang=EN-US>"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">去除指定字串</SPAN><SPAN lang=EN-US>"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的功用</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">通过</SPAN><SPAN lang=EN-US> 
sub() </SPAN><SPAN style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> match() 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的搭配使用</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">可逐次取出原字串中合乎指定条件的所有子字串</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如执行下列程式</SPAN><SPAN 
lang=EN-US>:</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk '</SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN {</SPAN></P>
<P class=a8><SPAN lang=EN-US>data = "p12-P34 P56-p61"</SPAN></P>
<P class=a8><SPAN lang=EN-US>while( match( data ,/[0-9]+/) &gt; 0) {</SPAN></P>
<P class=a8><SPAN lang=EN-US>print substr(data, RSTART, RLENGTH )</SPAN></P>
<P class=a8><SPAN lang=EN-US>sub(/[0-9]+/,"",data)</SPAN></P>
<P class=a8><SPAN lang=EN-US>}</SPAN></P>
<P class=a8><SPAN lang=EN-US>}' </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">结果输出</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=a8><SPAN lang=EN-US>12</SPAN></P>
<P class=a8><SPAN lang=EN-US>34</SPAN></P>
<P class=a8><SPAN lang=EN-US>56</SPAN></P>
<P class=a8><SPAN lang=EN-US>61</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>sub( )</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中第三个参数</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">原字串</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">若未指定</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">则其预设值为</SPAN><SPAN lang=EN-US>$0.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">可用</SPAN><SPAN lang=EN-US> 
sub( /[9-0]+/,"digital" ) </SPAN><SPAN style="FONT-FAMILY: 宋体">表示</SPAN><SPAN 
lang=EN-US> sub(/[0-9]+/,"digital",$0 )</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>gsub( </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">比对用的正则表达式</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">将替Q的新字串</SPAN><SPAN lang=EN-US>, </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">原字串</SPAN> <SPAN lang=EN-US>)</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">这个函数与</SPAN><SPAN lang=EN-US> 
sub()</SPAN><SPAN style="FONT-FAMILY: 宋体">一样</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">同样是进行字串取代的函数</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">唯一不同点是</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp; 
gsub()</SPAN><SPAN style="FONT-FAMILY: 宋体">会取代所有合条件的子字串</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp; 
gsub()</SPAN><SPAN style="FONT-FAMILY: 宋体">会返回被取代的子字串个数</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">请参考</SPAN><SPAN lang=EN-US> 
sub().</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>substr( </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">字串</SPAN><SPAN lang=EN-US>,</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">起始位置</SPAN> <SPAN lang=EN-US>[,</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">长度</SPAN><SPAN lang=EN-US>] ):</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">返回从起始位置起</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">指定长度的子字串</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">若未指定长度</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">则返回起始位置到字串末尾的子字串</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">执行下例</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk 'BEGIN { print substr("User:Wei-Lin Liu", 
6)}'</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">结果印出</SPAN></P>
<P class=a8><SPAN lang=EN-US>Wei-Lin Liu</SPAN></P>
<H2><SPAN lang=EN-US 
style="FONT-WEIGHT: normal; FONT-FAMILY: Wingdings">&Oslash;</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">二</SPAN><SPAN 
lang=EN-US>). </SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">数学函数</SPAN></H2>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>int(x) : </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">返回</SPAN><SPAN lang=EN-US>x</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">的整数部分</SPAN><SPAN lang=EN-US>(</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">去掉小数</SPAN><SPAN lang=EN-US>).</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>int(7.8) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将返回</SPAN><SPAN lang=EN-US> 7</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>int(-7.8) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将返回</SPAN><SPAN lang=EN-US> -7</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>sqrt(x) : </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">返回</SPAN><SPAN lang=EN-US>x</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">的平方根</SPAN><SPAN lang=EN-US>. </SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>sqrt(9) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将返回</SPAN><SPAN lang=EN-US> 3</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US> x 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为负数</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">则执行</SPAN><SPAN lang=EN-US> sqrt(x)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时将造成</SPAN><SPAN lang=EN-US> Run Time Error 
[</SPAN><SPAN style="FONT-FAMILY: 宋体">译者注</SPAN><SPAN lang=EN-US>: </SPAN><SPAN 
style="FONT-FAMILY: 宋体">我这里没有发生错误</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">返回的是</SPAN><SPAN lang=EN-US>"nan"]</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>exp(x) : </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">将返回</SPAN><SPAN lang=EN-US>e</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US>x</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">次方</SPAN><SPAN lang=EN-US>. </SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>exp(1) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将返回</SPAN><SPAN lang=EN-US> 2.71828</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>log(x) : </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">将返回</SPAN><SPAN lang=EN-US>x</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US>e</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">为底的对数值</SPAN><SPAN lang=EN-US>.</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>log(exp(1))&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将返回</SPAN><SPAN lang=EN-US> 1</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">若</SPAN><SPAN lang=EN-US> 
x&lt; 0 ,</SPAN><SPAN style="FONT-FAMILY: 宋体">则执行</SPAN><SPAN lang=EN-US> 
sqrt(x)</SPAN><SPAN style="FONT-FAMILY: 宋体">时将造成</SPAN><SPAN lang=EN-US> Run 
Time Error. [</SPAN><SPAN style="FONT-FAMILY: 宋体">译者注</SPAN><SPAN lang=EN-US>: 
</SPAN><SPAN style="FONT-FAMILY: 宋体">我这里也没有发生错误</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">返回的是</SPAN><SPAN 
lang=EN-US>"nan"]</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>sin(x) : x </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">须以弧度为单位</SPAN><SPAN 
lang=EN-US>,sin(x)</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">将返回</SPAN><SPAN 
lang=EN-US>x</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">的</SPAN><SPAN 
lang=EN-US>sin</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">函数值</SPAN><SPAN 
lang=EN-US>.</SPAN></B></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>cos(x) : x </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">须以弧度为单位</SPAN><SPAN 
lang=EN-US>,cos(x)</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">将返回</SPAN><SPAN 
lang=EN-US>x</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">的</SPAN><SPAN 
lang=EN-US>cos</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">函数值</SPAN><SPAN 
lang=EN-US> </SPAN></B></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>atan2(y,x) : </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">返回</SPAN> <SPAN lang=EN-US>y/x </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">的</SPAN><SPAN lang=EN-US>tan</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">反函数之值</SPAN><SPAN lang=EN-US>,</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">返回值系以弧度为单位</SPAN><SPAN lang=EN-US>.</SPAN></B></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>rand() : </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">返回介于</SPAN> <SPAN lang=EN-US>0</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US>1</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">之间的</SPAN><SPAN lang=EN-US>(</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">近似</SPAN><SPAN lang=EN-US>)</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">随机数值</SPAN><SPAN lang=EN-US>; 0 &lt; 
rand()&lt;1.</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">除非使用者自行指定</SPAN><SPAN 
lang=EN-US>rand()</SPAN><SPAN style="FONT-FAMILY: 宋体">函数起始的种子</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">否则每次执行</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程式时</SPAN><SPAN 
lang=EN-US>,&nbsp; rand()</SPAN><SPAN 
style="FONT-FAMILY: 宋体">函数都将使用同一个榷ǖ闹肿</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">来产生随机数</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>srand([x]) : </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">指定以</SPAN><SPAN lang=EN-US>x</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>rand( )</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">函数起始的种子</SPAN><SPAN lang=EN-US>.</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">若省略了</SPAN><SPAN 
lang=EN-US>x,</SPAN><SPAN style="FONT-FAMILY: 宋体">则</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">会以执行时的日期与时间为</SPAN><SPAN 
lang=EN-US>rand()</SPAN><SPAN style="FONT-FAMILY: 宋体">函数起始的种子</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<H1><SPAN lang=EN-US>15.<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">附录</SPAN><SPAN lang=EN-US>D 
── awk </SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">的冉ū淞</SPAN><SPAN 
lang=EN-US> Built-in Variables </SPAN></H1>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">因冉ū淞康母鍪不多</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">此处按其相关性分类说明</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">并未按其字母顺序排列</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US></SPAN>&nbsp;</P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>ARGC</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>ARGC</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示命令行上除了选项</SPAN><SPAN lang=EN-US> -F, -v, -f 
</SPAN><SPAN style="FONT-FAMILY: 宋体">及其所对应的参数之外的所有参数的个数</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">若将</SPAN><SPAN 
lang=EN-US>"awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程式</SPAN><SPAN 
lang=EN-US>"</SPAN><SPAN style="FONT-FAMILY: 宋体">直接写於命令列上</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US> ARGC 
</SPAN><SPAN style="FONT-FAMILY: 宋体">亦不将该</SPAN><SPAN lang=EN-US>"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">程式部分</SPAN><SPAN lang=EN-US>"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">列入计算</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>ARGV </SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>ARGV</SPAN><SPAN 
style="FONT-FAMILY: 宋体">数组用以记录命令列上的参数</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例</SPAN><SPAN lang=EN-US> : 
</SPAN><SPAN style="FONT-FAMILY: 宋体">执行下列命令</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk&nbsp; -F\t -v a=8 -f prg.awk&nbsp; file1.dat 
file2.dat</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">或</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk&nbsp; -F\t -v a=8 '{ print $1 * a }' 
file1.dat file2.dat</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">执行上列任一程式后</SPAN></P>
<P class=MsoBodyText><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
ARGC&nbsp;&nbsp;&nbsp; =&nbsp; 3</SPAN></P>
<P class=MsoBodyText><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
ARGV[0] = "awk"</SPAN></P>
<P class=MsoBodyText><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
ARGV[1] = "file1.dat"</SPAN></P>
<P class=MsoBodyText><SPAN 
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
ARGV[2] = "file2.dat"</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">读者请留心</SPAN><SPAN lang=EN-US> 
: </SPAN><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN lang=EN-US> ARGC = 3 
</SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">命令列上仅指定了</SPAN><SPAN lang=EN-US> 2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">个文件</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">注</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>-F\t </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示以</SPAN><SPAN lang=EN-US> tab </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为栏位分隔字符</SPAN><SPAN lang=EN-US> FS(field 
seporator).</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>-v a=8 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">是用以初始化程序中的变量</SPAN><SPAN lang=EN-US> a.&nbsp; 
</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>FILENAME</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>FILENAME</SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以表示目前正在处理的文件档名</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>FS</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">栏位分隔字符</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>$0</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">表示目前</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">所读入的数据行</SPAN><SPAN 
lang=EN-US>. </SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>$1,$2..</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">分e表示所读入的数据行之第一栏</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">第二栏</SPAN><SPAN 
lang=EN-US>,..</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">说明</SPAN><SPAN 
lang=EN-US>:</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">当</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">读入一笔数据行</SPAN><SPAN 
lang=EN-US> "A123&nbsp; 8:15" </SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">会先以</SPAN><SPAN lang=EN-US>$0 
</SPAN><SPAN style="FONT-FAMILY: 宋体">记录</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">故</SPAN><SPAN lang=EN-US> $0 
= "A123&nbsp; 8:15"</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">若程序中进一步使用了</SPAN><SPAN 
lang=EN-US> $1, $2.. </SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN 
lang=EN-US> NF </SPAN><SPAN style="FONT-FAMILY: 宋体">等冉ū淞渴</SPAN><SPAN 
lang=EN-US>, awk</SPAN><SPAN style="FONT-FAMILY: 宋体">才会自动分割</SPAN><SPAN 
lang=EN-US> $0. </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">以便取得栏位相关的资料</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">切割后各个栏位的资料会分e以</SPAN><SPAN 
lang=EN-US>$1, $2, $3...</SPAN><SPAN style="FONT-FAMILY: 宋体">予以记录</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">榷</SPAN><SPAN lang=EN-US>(default)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">栏位分隔字符</SPAN><SPAN lang=EN-US>(FS) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN> <SPAN style="FONT-FAMILY: 宋体">空白字符</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">空格及</SPAN><SPAN 
lang=EN-US>tab).</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">以本例而言</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">读者若未改变</SPAN><SPAN lang=EN-US> 
FS, </SPAN><SPAN style="FONT-FAMILY: 宋体">则分割后</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">第一栏</SPAN><SPAN 
lang=EN-US>($1)="A123",&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">第二栏</SPAN><SPAN lang=EN-US>($2)="8:15".</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">使用者可用正则表达式自行定义</SPAN><SPAN 
lang=EN-US> FS. awk</SPAN><SPAN style="FONT-FAMILY: 宋体">每次需要分割数据行时</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">会参考目前</SPAN><SPAN 
lang=EN-US>FS</SPAN><SPAN style="FONT-FAMILY: 宋体">的值</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">令</SPAN><SPAN lang=EN-US> FS 
= "[ :]+" </SPAN><SPAN style="FONT-FAMILY: 宋体">表示任何由</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">空白</SPAN><SPAN lang=EN-US>" " </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN> <SPAN style="FONT-FAMILY: 宋体">冒号</SPAN><SPAN 
lang=EN-US>":" </SPAN><SPAN style="FONT-FAMILY: 宋体">所组成的字串都可当成分隔字符</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">则分割后</SPAN><SPAN lang=EN-US> 
:&nbsp;&nbsp; </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">第一栏</SPAN><SPAN 
lang=EN-US>($1) = "A123", </SPAN><SPAN style="FONT-FAMILY: 宋体">第二栏</SPAN><SPAN 
lang=EN-US>($2) = "8", </SPAN><SPAN style="FONT-FAMILY: 宋体">第三栏</SPAN><SPAN 
lang=EN-US>($3) = "15"</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>NR</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>NR </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表从</SPAN><SPAN lang=EN-US> awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">开始执行该程序后所读取的数据行数</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>FNR</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>FNR </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> NR </SPAN><SPAN 
style="FONT-FAMILY: 宋体">功用类似</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">不同的是</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">每打开一个新的文件</SPAN><SPAN lang=EN-US>,FNR </SPAN><SPAN 
style="FONT-FAMILY: 宋体">便从</SPAN><SPAN lang=EN-US> 0 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">重新累计</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>NF</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>NF</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表目前的数据行所被切分的栏位数</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>awk </SPAN><SPAN 
style="FONT-FAMILY: 宋体">每读入一笔资料后</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">在程序中可以</SPAN><SPAN lang=EN-US> NF </SPAN><SPAN 
style="FONT-FAMILY: 宋体">来得知该行数据包含的栏位个数</SPAN><SPAN lang=EN-US>.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">在下一笔资料被读入之前</SPAN><SPAN lang=EN-US>, NF </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不会改变</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">但使用者若自行使用</SPAN><SPAN lang=EN-US>$0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">来记录数据</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: </SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用</SPAN><SPAN lang=EN-US> getline , </SPAN><SPAN 
style="FONT-FAMILY: 宋体">此时</SPAN><SPAN lang=EN-US> NF </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将代表新的</SPAN><SPAN lang=EN-US> $0 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">上所记载的资料的栏位个数</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>OFS</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>OFS</SPAN><SPAN 
style="FONT-FAMILY: 宋体">输出时的栏位分隔字符</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">预设值</SPAN><SPAN lang=EN-US> " "(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">一个空白</SPAN><SPAN lang=EN-US>), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">详见下面说明</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>ORS</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>ORS</SPAN><SPAN 
style="FONT-FAMILY: 宋体">输出时数据行的分隔字符</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">预设值</SPAN><SPAN lang=EN-US> "\n"(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">跳行</SPAN><SPAN lang=EN-US>), </SPAN><SPAN 
style="FONT-FAMILY: 宋体">见下面说明</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>OFMT</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>OFMT</SPAN><SPAN 
style="FONT-FAMILY: 宋体">数值资料的输出格式</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">预设值</SPAN><SPAN lang=EN-US> "%.6g"(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">若须要时最多印出</SPAN><SPAN lang=EN-US>6</SPAN><SPAN 
style="FONT-FAMILY: 宋体">位小数</SPAN><SPAN lang=EN-US>)</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">当使用</SPAN><SPAN lang=EN-US> 
print </SPAN><SPAN style="FONT-FAMILY: 宋体">指令一次印出多项资料时</SPAN><SPAN 
lang=EN-US>,</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
print $1, $2 </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">输出时</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">会自动在</SPAN><SPAN lang=EN-US> $1 
</SPAN><SPAN style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> $2 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之间补上一个</SPAN><SPAN lang=EN-US> OFS </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">每次使用</SPAN><SPAN lang=EN-US> 
print </SPAN><SPAN style="FONT-FAMILY: 宋体">输出后</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">会自动补上</SPAN><SPAN lang=EN-US> ORS 
</SPAN><SPAN style="FONT-FAMILY: 宋体">之值</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">使用</SPAN><SPAN lang=EN-US> 
print </SPAN><SPAN style="FONT-FAMILY: 宋体">输出数值数据时</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">将采用</SPAN><SPAN lang=EN-US> OFMT 
</SPAN><SPAN style="FONT-FAMILY: 宋体">之值为输出格式</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$ awk 'BEGIN { print 2/3,1; OFS=":"; OFMT="%.2g"; 
print 2/3,1 }'</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">输出</SPAN><SPAN 
lang=EN-US>:</SPAN></P>
<P class=a8><SPAN lang=EN-US>0.666667 1 </SPAN></P>
<P class=a8><SPAN lang=EN-US>0.67:1 </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">程序中通过改变</SPAN><SPAN 
lang=EN-US>OFS</SPAN><SPAN style="FONT-FAMILY: 宋体">和</SPAN><SPAN 
lang=EN-US>OFMT</SPAN><SPAN style="FONT-FAMILY: 宋体">的值</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">改变了指令</SPAN><SPAN lang=EN-US> print 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的输出格式</SPAN><SPAN lang=EN-US>.&nbsp; 
</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>RS</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>RS( Record Separator) : awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">从文件上读取资料时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将根据</SPAN><SPAN lang=EN-US> RS </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的定义把资料切割成许多</SPAN><SPAN lang=EN-US>Records,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">而</SPAN><SPAN lang=EN-US>awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">一次仅读入一个</SPAN><SPAN lang=EN-US>Record,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">以进行处理</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>RS </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的预设值是</SPAN><SPAN lang=EN-US> "\n". </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所以一般</SPAN><SPAN lang=EN-US> awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">一次仅读入一行资料</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">有时一个</SPAN><SPAN 
lang=EN-US>Record</SPAN><SPAN style="FONT-FAMILY: 宋体">含括了几行资料</SPAN><SPAN 
lang=EN-US>(Multi-line Record). </SPAN><SPAN 
style="FONT-FAMILY: 宋体">这情r下不能再以</SPAN><SPAN lang=EN-US>"\n"</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">来分隔相邻的</SPAN><SPAN 
lang=EN-US>Records, </SPAN><SPAN style="FONT-FAMILY: 宋体">可改用</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">空白行</SPAN> <SPAN style="FONT-FAMILY: 宋体">来分隔</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">在</SPAN><SPAN 
lang=EN-US>awk</SPAN><SPAN style="FONT-FAMILY: 宋体">程式中</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">令</SPAN><SPAN lang=EN-US> RS = 
"" </SPAN><SPAN style="FONT-FAMILY: 宋体">表示以</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">空白行</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">来分隔相邻的</SPAN><SPAN lang=EN-US>Records.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>RSTART</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>RSTART</SPAN><SPAN 
style="FONT-FAMILY: 宋体">与使用字串函数</SPAN><SPAN lang=EN-US> match( )</SPAN><SPAN 
style="FONT-FAMILY: 宋体">有关的变量</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">详见下面说明</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>RLENGTH</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>RLENGTH</SPAN><SPAN 
style="FONT-FAMILY: 宋体">与使用字串函数</SPAN><SPAN lang=EN-US>match( )</SPAN><SPAN 
style="FONT-FAMILY: 宋体">有关之变量</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">当使用者使用</SPAN><SPAN 
lang=EN-US> match(...) </SPAN><SPAN style="FONT-FAMILY: 宋体">函数后</SPAN><SPAN 
lang=EN-US>, awk</SPAN><SPAN style="FONT-FAMILY: 宋体">会将</SPAN><SPAN lang=EN-US> 
match(...) </SPAN><SPAN style="FONT-FAMILY: 宋体">执行的结果以</SPAN><SPAN 
lang=EN-US>RSTART,RLENGTH </SPAN><SPAN style="FONT-FAMILY: 宋体">记录</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">请参考</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">附录</SPAN><SPAN lang=EN-US> C awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的冉ê数</SPAN><SPAN lang=EN-US> match().</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>SUBSEP</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>SUBSEP(Subscript Separator) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">数组下标的分隔字符</SPAN><SPAN lang=EN-US>, </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">预设值为</SPAN><SPAN 
lang=EN-US>"\034"</SPAN><SPAN style="FONT-FAMILY: 宋体">实际上</SPAN><SPAN 
lang=EN-US>, awk</SPAN><SPAN style="FONT-FAMILY: 宋体">中的</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">数组</SPAN> <SPAN style="FONT-FAMILY: 宋体">只接受</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">字串</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">当它的下标</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US>: Arr["John"].</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">但使用者在</SPAN><SPAN lang=EN-US> 
awk </SPAN><SPAN style="FONT-FAMILY: 宋体">中仍可使用</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">数字</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">当阵列的下标</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">甚至可使用多维的数组</SPAN><SPAN lang=EN-US>(Multi-dimenisional 
Array) </SPAN><SPAN style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US>: Arr[2,79] 
</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">事实上</SPAN><SPAN lang=EN-US>, 
awk</SPAN><SPAN style="FONT-FAMILY: 宋体">在接受</SPAN><SPAN lang=EN-US> Arr[2,79] 
</SPAN><SPAN style="FONT-FAMILY: 宋体">之前</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">就已先把其下标转换成字串</SPAN><SPAN lang=EN-US>"2\03479", 
</SPAN><SPAN style="FONT-FAMILY: 宋体">之后便以</SPAN><SPAN lang=EN-US>Arr["2\03479"] 
</SPAN><SPAN style="FONT-FAMILY: 宋体">代替</SPAN><SPAN lang=EN-US> 
Arr[2,79].</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">可参考下例</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk 'BEGIN { </SPAN></P>
<P class=a8><SPAN lang=EN-US>Arr[2,79] = 78</SPAN></P>
<P class=a8><SPAN lang=EN-US>print&nbsp; Arr[2,79]</SPAN></P>
<P class=a8><SPAN lang=EN-US>print&nbsp; Arr[ 2 , 79 ]</SPAN></P>
<P class=a8><SPAN lang=EN-US>print&nbsp; Arr["2\03479"]</SPAN></P>
<P class=a8><SPAN lang=EN-US>idx = 2 SUBSEP 79</SPAN></P>
<P class=a8><SPAN lang=EN-US>print Arr[idx]</SPAN></P>
<P class=a8><SPAN lang=EN-US>}</SPAN></P>
<P class=a8><SPAN lang=EN-US>' $*</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">执行结果输出</SPAN><SPAN 
lang=EN-US>:</SPAN></P>
<P class=a8><SPAN lang=EN-US>78</SPAN></P>
<P class=a8><SPAN lang=EN-US>78</SPAN></P>
<P class=a8><SPAN lang=EN-US>78</SPAN></P>
<P class=a8><SPAN lang=EN-US>78</SPAN></P>
<H1><SPAN lang=EN-US>16.<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">附录</SPAN><SPAN lang=EN-US>E 
── </SPAN><SPAN style="FONT-FAMILY: 文鼎PL细上海宋Uni">正则表达式</SPAN><SPAN 
lang=EN-US>(Regular Expression) </SPAN><SPAN 
style="FONT-FAMILY: 文鼎PL细上海宋Uni">简介</SPAN></H1>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN style="FONT-FAMILY: 宋体">为什么要使用正则表达式</SPAN></B></P>
<P class=MsoBodyText><SPAN lang=EN-US>UNIX </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中提供了许多</SPAN> <SPAN style="FONT-FAMILY: 宋体">指令</SPAN> 
<SPAN style="FONT-FAMILY: 宋体">和</SPAN><SPAN lang=EN-US> tools, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">它们具有在文件中</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">查找</SPAN><SPAN lang=EN-US>(Search)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">字串或替换</SPAN><SPAN lang=EN-US>(Replace)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">字串</SPAN> <SPAN style="FONT-FAMILY: 宋体">的功能</SPAN><SPAN 
lang=EN-US>. </SPAN><SPAN style="FONT-FAMILY: 宋体">像</SPAN><SPAN lang=EN-US> 
grep, vi , sed, awk,...</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">不论是查找字串或替换字串</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">都得先告诉这些指令所要查找</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">被替换</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">的字串为何</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">若未能预先明确知道所要查找</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">被替换</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">的字串为何</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">只知该字串存在的范围或特征时</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp; (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">一</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">找寻</SPAN><SPAN lang=EN-US> "T0.c", "T1.c", "T2.c".... 
"T9.c" </SPAN><SPAN style="FONT-FAMILY: 宋体">当中的任一字串</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>&nbsp;(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">二</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">找寻至少存在一个</SPAN><SPAN lang=EN-US> "A"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的任意字串</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">这情r下</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">如何告知执行查找字串的指令所要查找的字串为何</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例</SPAN><SPAN lang=EN-US> 
(</SPAN><SPAN style="FONT-FAMILY: 宋体">一</SPAN><SPAN lang=EN-US>) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">要查找任一在</SPAN><SPAN lang=EN-US> "T" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">与</SPAN><SPAN lang=EN-US> ".c" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之间存在一个阿拉伯数字的字串</SPAN><SPAN lang=EN-US>;</SPAN><SPAN 
style="FONT-FAMILY: 宋体">当然您可以列举的方式</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">一一把所要找寻的字串告诉执行命令的指令</SPAN><SPAN lang=EN-US>.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">但例</SPAN><SPAN lang=EN-US> (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">二</SPAN><SPAN lang=EN-US>) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中合乎该条件的字串有无限种可能</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">势必无法一一列举</SPAN><SPAN lang=EN-US>.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">此时</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">便需要另一种字串表示的方法</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">协定</SPAN><SPAN lang=EN-US>).</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN style="FONT-FAMILY: 宋体">什么是正则表达式</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">正则表达式</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">以下简称</SPAN><SPAN lang=EN-US> 
Regexp)</SPAN><SPAN style="FONT-FAMILY: 宋体">是一种字串表达的方式</SPAN><SPAN lang=EN-US>. 
</SPAN><SPAN style="FONT-FAMILY: 宋体">可用以指定具有某特征的所有字串</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">注</SPAN><SPAN lang=EN-US>: 
</SPAN><SPAN style="FONT-FAMILY: 宋体">为区e于一般字串</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">本附录中代表</SPAN><SPAN lang=EN-US> Regexp 
</SPAN><SPAN style="FONT-FAMILY: 宋体">的字串之前皆加</SPAN><SPAN lang=EN-US> "Regexp". 
awk </SPAN><SPAN style="FONT-FAMILY: 宋体">程式中常以</SPAN><SPAN 
lang=EN-US>/..../</SPAN><SPAN style="FONT-FAMILY: 宋体">括住</SPAN><SPAN lang=EN-US> 
Regexp; </SPAN><SPAN style="FONT-FAMILY: 宋体">以区e于一般字串</SPAN><SPAN lang=EN-US>. 
</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN style="FONT-FAMILY: 宋体">组成正则表达式的元素</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">普通字符</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">除了</SPAN><SPAN lang=EN-US> . * [ ] + ? ( ) \&nbsp; ^ $ 
</SPAN><SPAN style="FONT-FAMILY: 宋体">外之所有字符</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">由普通字符所组成的</SPAN><SPAN 
lang=EN-US>Regexp</SPAN><SPAN style="FONT-FAMILY: 宋体">其意义与原字串字面意义相同</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
Regexp "the" </SPAN><SPAN style="FONT-FAMILY: 宋体">与一般字串的</SPAN><SPAN lang=EN-US> 
"the" </SPAN><SPAN style="FONT-FAMILY: 宋体">代表相同的意义</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>. (Meta character) : </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以代表任意一字符</SPAN><SPAN lang=EN-US>. </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">须留心</SPAN><SPAN lang=EN-US> 
UNIX Shell </SPAN><SPAN style="FONT-FAMILY: 宋体">中使用</SPAN><SPAN lang=EN-US> 
"*"</SPAN><SPAN style="FONT-FAMILY: 宋体">表示</SPAN><SPAN lang=EN-US> Wild card, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">可用以代表任意长度的字串</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">而</SPAN><SPAN lang=EN-US> 
Regexp </SPAN><SPAN style="FONT-FAMILY: 宋体">中使用</SPAN><SPAN lang=EN-US> "." 
</SPAN><SPAN style="FONT-FAMILY: 宋体">来代表一个任意字符</SPAN><SPAN 
lang=EN-US>.(</SPAN><SPAN style="FONT-FAMILY: 宋体">注意</SPAN><SPAN lang=EN-US>: 
</SPAN><SPAN style="FONT-FAMILY: 宋体">并非任意长度的字串</SPAN><SPAN lang=EN-US>)Regexp 
</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US> "*" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">另有其它涵意</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不代表任意长度的字串</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>^ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示该字串必须出现于行首</SPAN><SPAN lang=EN-US>.&nbsp;&nbsp; 
</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>$ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示该字串必须出现于行末</SPAN><SPAN lang=EN-US>.&nbsp; </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /^The/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以表示所有出现于行首的字串</SPAN><SPAN lang=EN-US> "The".</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /The$/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以表示所有出现于行末字串</SPAN><SPAN lang=EN-US> "The".</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>\ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">将特殊字符还原成字面意义的字符</SPAN><SPAN lang=EN-US>(Escape 
character)</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中特殊字符将被解释成特定的意义</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若要表示特殊字符的字面</SPAN><SPAN lang=EN-US>(literal 
meaning)</SPAN><SPAN style="FONT-FAMILY: 宋体">意义时</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">在特殊字符之前加上</SPAN><SPAN 
lang=EN-US>"\"</SPAN><SPAN style="FONT-FAMILY: 宋体">即可</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">使用</SPAN><SPAN 
lang=EN-US>Regexp</SPAN><SPAN style="FONT-FAMILY: 宋体">来表示字串</SPAN><SPAN 
lang=EN-US> "a.out"</SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">不可写成</SPAN><SPAN lang=EN-US> 
/a.out/.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">因为</SPAN><SPAN lang=EN-US> 
"."</SPAN><SPAN style="FONT-FAMILY: 宋体">是特殊字符</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">表任一字符</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可符合</SPAN><SPAN lang=EN-US> Regexp / a.out/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的字串将不只</SPAN><SPAN lang=EN-US> "a.out" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">一个</SPAN><SPAN lang=EN-US>; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">字串</SPAN><SPAN lang=EN-US> "a2out", "a3out", "aaout" 
...</SPAN><SPAN style="FONT-FAMILY: 宋体">都符合</SPAN><SPAN lang=EN-US> Regexp 
/a.out/&nbsp; </SPAN><SPAN style="FONT-FAMILY: 宋体">正确的用法为</SPAN><SPAN 
lang=EN-US>:&nbsp; / a\.out/</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>[...]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">字符集合</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以表示两中括号间所有的字符当中的任一个</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /[Tt]/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可用以表示字符</SPAN><SPAN lang=EN-US> "T" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> "t".</SPAN><SPAN 
style="FONT-FAMILY: 宋体">故</SPAN><SPAN lang=EN-US> Regexp /[Tt]he/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示</SPAN> <SPAN style="FONT-FAMILY: 宋体">字串</SPAN><SPAN 
lang=EN-US> "The" </SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> 
"the".</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">字符集合</SPAN><SPAN lang=EN-US> 
[...] </SPAN><SPAN style="FONT-FAMILY: 宋体">炔豢伤嬉饬艨瞻</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
Regexp /[ Tt ]/ </SPAN><SPAN style="FONT-FAMILY: 宋体">其中括号扔锌瞻鬃址</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">除表示</SPAN><SPAN 
lang=EN-US>"T", "t" </SPAN><SPAN style="FONT-FAMILY: 宋体">中任一个字符</SPAN><SPAN 
lang=EN-US>, </SPAN><SPAN style="FONT-FAMILY: 宋体">也可代表一个</SPAN><SPAN lang=EN-US> 
" "(</SPAN><SPAN style="FONT-FAMILY: 宋体">空白字符</SPAN><SPAN 
lang=EN-US>)</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>- </SPAN><SPAN 
style="FONT-FAMILY: 宋体">字符集合中可使用</SPAN><SPAN lang=EN-US> "-" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">来指定字符的区间</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其用法如下</SPAN><SPAN lang=EN-US>:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /[0-9]/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">等于</SPAN><SPAN lang=EN-US> /[0123456789]/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以表示任意一个阿拉伯数字</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">同理</SPAN><SPAN lang=EN-US> 
Regexp /[A-Z]/ </SPAN><SPAN style="FONT-FAMILY: 宋体">用以表示任意一个大写英文字母</SPAN><SPAN 
lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">但应留心</SPAN><SPAN 
lang=EN-US>:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /[0-9a-z]/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">并不等于</SPAN><SPAN lang=EN-US> /[0-9][a-z]/; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">前者表示一个字符</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">后者表示二个字符</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /[-9]/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> /[9-]/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">只代表字符</SPAN><SPAN lang=EN-US> "9"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> "-".</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>[^...]</SPAN><SPAN 
style="FONT-FAMILY: 宋体">使用</SPAN><SPAN lang=EN-US>[^..] </SPAN><SPAN 
style="FONT-FAMILY: 宋体">产生字符集合的补集</SPAN><SPAN lang=EN-US>(complement 
set).</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">其用法如下</SPAN><SPAN lang=EN-US> 
:</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
</SPAN><SPAN style="FONT-FAMILY: 宋体">要指定</SPAN><SPAN lang=EN-US> "T" 
</SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> "t" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之外的任一个字符</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可用</SPAN><SPAN lang=EN-US> /[^Tt]/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表之</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">同理</SPAN><SPAN lang=EN-US> 
Regexp /[^a-zA-Z]/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示英文字母之外的任一个字符</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">须留心</SPAN><SPAN lang=EN-US> 
"^" </SPAN><SPAN style="FONT-FAMILY: 宋体">的位置</SPAN><SPAN lang=EN-US> : 
"^"</SPAN><SPAN style="FONT-FAMILY: 宋体">必须紧接於</SPAN><SPAN 
lang=EN-US>"["</SPAN><SPAN style="FONT-FAMILY: 宋体">之后</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">才代表字符集合的补集</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> 
:Regexp /[0-9\^]/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">只是用以表示一个阿拉伯数字或字符</SPAN><SPAN lang=EN-US>"^".</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>* </SPAN><SPAN 
style="FONT-FAMILY: 宋体">形容字符重复次数的特殊字符</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>"*" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">形容它前方之字符可出现</SPAN><SPAN lang=EN-US> 1 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">次或多次</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或不出现</SPAN><SPAN lang=EN-US>(0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">次</SPAN><SPAN lang=EN-US>).</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN 
lang=EN-US>:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /T[0-9]*\.c/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中</SPAN><SPAN lang=EN-US> * </SPAN><SPAN 
style="FONT-FAMILY: 宋体">形容其前</SPAN><SPAN lang=EN-US> [0-9] (</SPAN><SPAN 
style="FONT-FAMILY: 宋体">一个阿拉伯数字</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">出现的次数可为</SPAN><SPAN lang=EN-US> 0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">次或</SPAN> <SPAN style="FONT-FAMILY: 宋体">多次</SPAN><SPAN 
lang=EN-US>.</SPAN><SPAN style="FONT-FAMILY: 宋体">故</SPAN><SPAN lang=EN-US>Regexp 
/T[0-9]*\.c/ </SPAN><SPAN style="FONT-FAMILY: 宋体">可用以表示</SPAN><SPAN 
lang=EN-US>"T.c", "T0.c", "T1.c"..."T19.c"</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>+</SPAN><SPAN 
style="FONT-FAMILY: 宋体">形容其前的字符出现一次或一次以上</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /[0-9]+/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以表示一位或一位以上的数字</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>?&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">形容其前的字符可出现一次或不出现</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN 
lang=EN-US>:</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /[+-]?[0-9]+/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示数字</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">一位以上</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">之前可出现正负号或不出现正负号</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>(...)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">用以括住一群字符</SPAN><SPAN lang=EN-US>,</SPAN><SPAN 
style="FONT-FAMILY: 宋体">且将之视成一个</SPAN><SPAN lang=EN-US>group(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">见下面说明</SPAN><SPAN lang=EN-US>)</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US> : 
</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /12+/&nbsp;&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示字串</SPAN><SPAN lang=EN-US> "12", "122", "1222", 
"12222",...</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp /(12)+/ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示字串</SPAN><SPAN lang=EN-US> "12", "1212", "121212", 
"12121212"....</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">上式中</SPAN><SPAN lang=EN-US> 
12 </SPAN><SPAN style="FONT-FAMILY: 宋体">以</SPAN><SPAN lang=EN-US>( )</SPAN><SPAN 
style="FONT-FAMILY: 宋体">括住</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">故</SPAN><SPAN lang=EN-US> "+" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">所形容的是</SPAN><SPAN lang=EN-US> 12, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">重复出现的也是</SPAN><SPAN lang=EN-US> 12.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>| </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示逻辑上的</SPAN><SPAN lang=EN-US>"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US>"(or)</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>: 
</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>Regexp / Oranges? | apples?&nbsp; | water/ 
</SPAN><SPAN style="FONT-FAMILY: 宋体">可用以表示</SPAN><SPAN lang=EN-US> :&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">字串</SPAN><SPAN lang=EN-US> "Orange", 
"Oranges" </SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> 
"apple", "apples"&nbsp; </SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN 
lang=EN-US> "water"</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>match</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">是什么</SPAN><SPAN lang=EN-US>?&nbsp; </SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">讨论</SPAN><SPAN lang=EN-US> 
Regexp </SPAN><SPAN style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">经常遇到</SPAN><SPAN lang=EN-US> "</SPAN><SPAN 
style="FONT-FAMILY: 宋体">某字串匹配</SPAN><SPAN lang=EN-US>( match )</SPAN><SPAN 
style="FONT-FAMILY: 宋体">某</SPAN><SPAN lang=EN-US> Regexp"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的字眼</SPAN><SPAN lang=EN-US>. </SPAN><SPAN 
style="FONT-FAMILY: 宋体">其意思为</SPAN><SPAN lang=EN-US> :&nbsp; "</SPAN><SPAN 
style="FONT-FAMILY: 宋体">这个</SPAN><SPAN lang=EN-US> Regexp </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可被解释成该字串</SPAN><SPAN lang=EN-US>".</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>[ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">例如</SPAN><SPAN lang=EN-US>] : </SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">字串</SPAN><SPAN lang=EN-US> 
"the" </SPAN><SPAN style="FONT-FAMILY: 宋体">匹配</SPAN><SPAN lang=EN-US>(match) 
Regexp /[Tt]he/.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">因为</SPAN><SPAN lang=EN-US> 
Regexp /[Tt]he/ </SPAN><SPAN style="FONT-FAMILY: 宋体">可解释成字串</SPAN><SPAN 
lang=EN-US> "the" </SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> 
"The", </SPAN><SPAN style="FONT-FAMILY: 宋体">故字串</SPAN><SPAN lang=EN-US> "the" 
</SPAN><SPAN style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> "The"</SPAN><SPAN 
style="FONT-FAMILY: 宋体">都匹配</SPAN><SPAN lang=EN-US>(match) Regexp 
/[Th]he/.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN lang=EN-US>awk </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">中提供二个关系运算符</SPAN><SPAN lang=EN-US>(Relational 
Operator,</SPAN></B><B><SPAN style="FONT-FAMILY: 宋体">见注一</SPAN><SPAN 
lang=EN-US>) ~&nbsp;&nbsp; !~, </SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">它们也称之为</SPAN><SPAN 
lang=EN-US> match, not match.</SPAN><SPAN 
style="FONT-FAMILY: 宋体">但函义与一般常称的</SPAN><SPAN lang=EN-US> match </SPAN><SPAN 
style="FONT-FAMILY: 宋体">略有不同</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">其定义如下</SPAN><SPAN 
lang=EN-US>: </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>A&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表一字串</SPAN><SPAN lang=EN-US>, B </SPAN><SPAN 
style="FONT-FAMILY: 宋体">表一</SPAN><SPAN lang=EN-US> Regular Expression</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">只要</SPAN><SPAN lang=EN-US> A 
</SPAN><SPAN style="FONT-FAMILY: 宋体">字串中存在有子字串可</SPAN><SPAN lang=EN-US> match( 
</SPAN><SPAN style="FONT-FAMILY: 宋体">一般定义的</SPAN><SPAN lang=EN-US> match) 
Regexp&nbsp; B , </SPAN><SPAN style="FONT-FAMILY: 宋体">则</SPAN><SPAN lang=EN-US> 
A ~B </SPAN><SPAN style="FONT-FAMILY: 宋体">就算成立</SPAN><SPAN lang=EN-US>, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">其值为</SPAN><SPAN lang=EN-US> true, 
</SPAN><SPAN style="FONT-FAMILY: 宋体">反之则为</SPAN><SPAN lang=EN-US> 
false.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>! ~ </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的定义与</SPAN><SPAN lang=EN-US>~</SPAN><SPAN 
style="FONT-FAMILY: 宋体">恰好相反</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">例</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">如</SPAN><SPAN lang=EN-US> : </SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>"another" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">中含有子字串</SPAN><SPAN lang=EN-US> "the" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">可</SPAN><SPAN lang=EN-US> match Regexp /[Tt]he/ , 
</SPAN><SPAN style="FONT-FAMILY: 宋体">所以</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>"another" ~ /[Tt]he/&nbsp; </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值为</SPAN><SPAN lang=EN-US> true.</SPAN></P>
<P class=MsoBodyText><SPAN lang=EN-US>[</SPAN><SPAN 
style="FONT-FAMILY: 宋体">注</SPAN> <SPAN style="FONT-FAMILY: 宋体">一</SPAN><SPAN 
lang=EN-US>] : </SPAN><SPAN style="FONT-FAMILY: 宋体">有些论著不把这两个运算符</SPAN><SPAN 
lang=EN-US>( ~, !~)</SPAN><SPAN style="FONT-FAMILY: 宋体">与</SPAN><SPAN 
lang=EN-US> Relational Operators </SPAN><SPAN 
style="FONT-FAMILY: 宋体">归为一类</SPAN><SPAN lang=EN-US>.</SPAN></P>
<P class=MsoNormal style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt"><SPAN 
lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Wingdings">l<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><B><SPAN style="FONT-FAMILY: 宋体">应用</SPAN> <SPAN 
lang=EN-US>Regular Expression </SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">解题的简例</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">下面列出一些应用</SPAN><SPAN 
lang=EN-US> Regular Expression </SPAN><SPAN 
style="FONT-FAMILY: 宋体">的简例</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">部分范例中会更改</SPAN><SPAN lang=EN-US>$0 </SPAN><SPAN 
style="FONT-FAMILY: 宋体">之值</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">若您使用的</SPAN><SPAN lang=EN-US> awk</SPAN><SPAN 
style="FONT-FAMILY: 宋体">不允许用户更改</SPAN><SPAN lang=EN-US> $0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时</SPAN><SPAN lang=EN-US>, </SPAN><SPAN 
style="FONT-FAMILY: 宋体">请改用</SPAN><SPAN lang=EN-US> gawk.&nbsp;&nbsp; 
</SPAN></P>
<P class=MsoBodyText><B><SPAN style="FONT-FAMILY: 宋体">例</SPAN><SPAN 
lang=EN-US>1:</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">将文件中所有的字串</SPAN><SPAN 
lang=EN-US> "Regular Expression" </SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US> "Regular expression" 
</SPAN><SPAN style="FONT-FAMILY: 宋体">换成</SPAN><SPAN lang=EN-US> 
"Regexp"</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk '</SPAN></P>
<P class=a8><SPAN lang=EN-US>{ gsub( /Regular[ \t]+[Ee]xpression/, "Regexp") 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>print</SPAN></P>
<P class=a8><SPAN lang=EN-US>}</SPAN></P>
<P class=a8><SPAN lang=EN-US>' $*</SPAN></P>
<P class=MsoBodyText><B><SPAN style="FONT-FAMILY: 宋体">例</SPAN><SPAN 
lang=EN-US>2:</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">去除文件中的空白行</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">或仅含空白字符或</SPAN><SPAN 
lang=EN-US>tab</SPAN><SPAN style="FONT-FAMILY: 宋体">的行</SPAN><SPAN 
lang=EN-US>)</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk '$0 !~ /^[ \t]*$/ { print }' $*</SPAN></P>
<P class=MsoBodyText><B><SPAN style="FONT-FAMILY: 宋体">例</SPAN><SPAN 
lang=EN-US>3:</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">在文件中具有</SPAN><SPAN 
lang=EN-US> ddd-dddd (</SPAN><SPAN style="FONT-FAMILY: 宋体">电话号码型态</SPAN><SPAN 
lang=EN-US>, d </SPAN><SPAN style="FONT-FAMILY: 宋体">表</SPAN><SPAN 
lang=EN-US>digital)</SPAN><SPAN style="FONT-FAMILY: 宋体">的字串前加上</SPAN><SPAN 
lang=EN-US>"TEL : "</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk '</SPAN></P>
<P class=a8><SPAN lang=EN-US>{ gsub( /[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]/, 
"TEL : &amp;" )</SPAN></P>
<P class=a8><SPAN lang=EN-US>print</SPAN></P>
<P class=a8><SPAN lang=EN-US>}</SPAN></P>
<P class=a8><SPAN lang=EN-US>' $*</SPAN></P>
<P class=MsoBodyText><B><SPAN style="FONT-FAMILY: 宋体">例</SPAN><SPAN 
lang=EN-US>4:</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">从文件的</SPAN><SPAN lang=EN-US> 
Fullname </SPAN><SPAN style="FONT-FAMILY: 宋体">中分离出</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">路径</SPAN> <SPAN style="FONT-FAMILY: 宋体">与</SPAN> <SPAN 
style="FONT-FAMILY: 宋体">档名</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk '</SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN{</SPAN></P>
<P class=a8><SPAN lang=EN-US>Fullname = "/usr/local/bin/xdvi"</SPAN></P>
<P class=a8><SPAN lang=EN-US>match( Fullname, /.*\//)</SPAN></P>
<P class=a8><SPAN lang=EN-US>path = substr(Fullname, 1, RLENGTH-1)</SPAN></P>
<P class=a8><SPAN lang=EN-US>name = substr(Fullname, RLENGTH+1)</SPAN></P>
<P class=a8><SPAN lang=EN-US>print "path :", path,"&nbsp; name 
:",name</SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>' $*</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">结果印出</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>path : /usr/local/bin&nbsp;&nbsp; name : xdvi 
</SPAN></P>
<P class=MsoBodyText><B><SPAN style="FONT-FAMILY: 宋体">例</SPAN><SPAN 
lang=EN-US>5:</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">将某一数值改以现金表示法表示</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">整数部分每三位加一撇</SPAN><SPAN 
lang=EN-US>,</SPAN><SPAN style="FONT-FAMILY: 宋体">且含二位小数</SPAN><SPAN 
lang=EN-US>)</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk ' </SPAN></P>
<P class=a8><SPAN lang=EN-US>BEGIN {</SPAN></P>
<P class=a8><SPAN lang=EN-US>Number = 123456789</SPAN></P>
<P class=a8><SPAN lang=EN-US>Number = sprintf("$%.2f",Number)</SPAN></P>
<P class=a8><SPAN lang=EN-US>while( match(Number,/[0-9][0-9][0-9][0-9]/ ) 
)</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; sub(/[0-9][0-9][0-9][.,]/, 
",&amp;", Number)</SPAN></P>
<P class=a8><SPAN lang=EN-US>print Number</SPAN></P>
<P class=a8><SPAN lang=EN-US>}</SPAN></P>
<P class=a8><SPAN lang=EN-US>' $*</SPAN></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">结果输出</SPAN><SPAN lang=EN-US> 
</SPAN></P>
<P class=a8><SPAN lang=EN-US>$123,456,789.00</SPAN></P>
<P class=MsoBodyText><B><SPAN style="FONT-FAMILY: 宋体">例</SPAN><SPAN 
lang=EN-US>6:</SPAN></B></P>
<P class=MsoBodyText><SPAN style="FONT-FAMILY: 宋体">把文件中所有具</SPAN><SPAN 
lang=EN-US> "program</SPAN><SPAN style="FONT-FAMILY: 宋体">数字</SPAN><SPAN 
lang=EN-US>.f"</SPAN><SPAN style="FONT-FAMILY: 宋体">形态的字串改为</SPAN><SPAN 
lang=EN-US>"[Ref : program</SPAN><SPAN style="FONT-FAMILY: 宋体">数字</SPAN><SPAN 
lang=EN-US>.c]"</SPAN></P>
<P class=a8><SPAN lang=EN-US>awk '</SPAN></P>
<P class=a8><SPAN lang=EN-US>{ </SPAN></P>
<P class=a8><SPAN lang=EN-US>while( match( $0, /program[0-9]+\.f/ )&nbsp; 
){</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; Replace = "[Ref : " substr( $0, 
RSTART, RLENGTH-2) ".c]"</SPAN></P>
<P class=a8><SPAN lang=EN-US>&nbsp;&nbsp;&nbsp; sub( /program[0-9]+\.f/, 
Replace)</SPAN></P>
<P class=a8><SPAN lang=EN-US>} </SPAN></P>
<P class=a8><SPAN lang=EN-US>print</SPAN></P>
<P class=a8><SPAN lang=EN-US>}</SPAN></P>
<P class=a8><SPAN lang=EN-US>' $*</SPAN></P></DIV></BODY></HTML>
